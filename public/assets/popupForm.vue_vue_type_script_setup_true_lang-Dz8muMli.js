import{h as D,s as h,al as L,a as T,q as n,W as p,o as s,N as d,O as r,Z as c,k as x,U as b,T as g,x as e,m as F,l as k,p as i,_ as W,a5 as $,a6 as j,Y as q,X as A,V as K}from"./vue-Cm_-Ome7.js";import{c as R,e as M,w as O}from"./index-BGkrm5xk.js";import{F as m}from"./index-Gg8Utg5G.js";import{b as w}from"./validate-CLs7Ey-q.js";const X="/admin/cms.formField/",Y=async _=>await R({url:X+"getFormFieldList",method:"get",params:{fcode:_}}),Z={class:"title"},te=D({__name:"popupForm",setup(_){const V=M(),u=h(),t=L("baTable"),v=h([]);Y(1).then(f=>{f.code==1&&(v.value=f.data.list)});const{t:l}=O.useI18n(),C=T({recontent:[w({name:"required",title:l("cms.message.recontent")})],uid:[w({name:"number",title:l("cms.message.uid")})]});return(f,o)=>{const U=n("el-form"),E=n("el-scrollbar"),y=n("el-button"),P=n("el-dialog"),S=p("drag"),I=p("zoom"),N=p("loading"),z=p("blur");return s(),d(P,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":["Add","Edit"].includes(e(t).form.operate),onClose:e(t).toggleForm,width:"50%"},{header:r(()=>[c((s(),x("div",Z,[b(g(e(t).form.operate?e(l)("cms.message.reply"):""),1)])),[[S,[".ba-operate-dialog",".el-dialog__header"]],[I,".ba-operate-dialog"]])]),footer:r(()=>[F("div",{style:k("width: calc(100% - "+e(t).form.labelWidth/1.8+"px)")},[i(y,{onClick:o[8]||(o[8]=a=>e(t).toggleForm())},{default:r(()=>[b(g(e(l)("Cancel")),1)]),_:1}),c((s(),d(y,{loading:e(t).form.submitLoading,onClick:o[9]||(o[9]=a=>e(t).onSubmit(u.value)),type:"primary"},{default:r(()=>[b(g(e(t).form.operateIds&&e(t).form.operateIds.length>1?e(l)("Save and edit next item"):e(l)("Save")),1)]),_:1},8,["loading"])),[[z]])],4)]),default:r(()=>[c((s(),d(E,{class:"ba-table-form-scrollbar"},{default:r(()=>[F("div",{class:W(["ba-operate-form","ba-"+e(t).form.operate+"-form"]),style:k(e(V).layout.shrink?"":"width: calc(100% - "+e(t).form.labelWidth/2+"px)")},[e(t).form.loading?K("",!0):(s(),d(U,{key:0,ref_key:"formRef",ref:u,onSubmit:o[6]||(o[6]=$(()=>{},["prevent"])),onKeyup:o[7]||(o[7]=j(a=>e(t).onSubmit(u.value),["enter"])),model:e(t).form.items,"label-position":e(V).layout.shrink?"top":"right","label-width":e(t).form.labelWidth+"px",rules:C},{default:r(()=>[(s(!0),x(q,null,A(v.value,(a,G)=>(s(),d(m,{type:"string",label:a.description,modelValue:e(t).form.items[a.name],"onUpdate:modelValue":B=>e(t).form.items[a.name]=B,prop:a.name,"input-attr":{disabled:e(t).form.operate==="Edit"},placeholder:e(l)("Please input field",{field:a.description})},null,8,["label","modelValue","onUpdate:modelValue","prop","input-attr","placeholder"]))),256)),i(m,{label:e(l)("cms.message.user_ip"),"input-attr":{disabled:e(t).form.operate=="Edit"},type:"string",modelValue:e(t).form.items.user_ip,"onUpdate:modelValue":o[0]||(o[0]=a=>e(t).form.items.user_ip=a),prop:"user_ip",placeholder:e(l)("Please input field",{field:e(l)("cms.message.user_ip")})},null,8,["label","input-attr","modelValue","placeholder"]),i(m,{label:e(l)("cms.message.user_os"),"input-attr":{disabled:e(t).form.operate=="Edit"},type:"string",modelValue:e(t).form.items.user_os,"onUpdate:modelValue":o[1]||(o[1]=a=>e(t).form.items.user_os=a),prop:"user_os",placeholder:e(l)("Please input field",{field:e(l)("cms.message.user_os")})},null,8,["label","input-attr","modelValue","placeholder"]),i(m,{label:e(l)("cms.message.user_bs"),"input-attr":{disabled:e(t).form.operate=="Edit"},type:"string",modelValue:e(t).form.items.user_bs,"onUpdate:modelValue":o[2]||(o[2]=a=>e(t).form.items.user_bs=a),prop:"user_bs",placeholder:e(l)("Please input field",{field:e(l)("cms.message.user_bs")})},null,8,["label","input-attr","modelValue","placeholder"]),i(m,{label:e(l)("cms.message.create_time"),"input-attr":{disabled:e(t).form.operate=="Edit"},type:"string",modelValue:e(t).form.items.create_time,"onUpdate:modelValue":o[3]||(o[3]=a=>e(t).form.items.create_time=a),prop:"create_time",placeholder:e(l)("Please input field",{field:e(l)("cms.message.create_time")})},null,8,["label","input-attr","modelValue","placeholder"]),i(m,{label:e(l)("cms.message.recontent"),type:"textarea",modelValue:e(t).form.items.recontent,"onUpdate:modelValue":o[4]||(o[4]=a=>e(t).form.items.recontent=a),prop:"recontent",placeholder:e(l)("Please input field",{field:e(l)("cms.message.recontent")})},null,8,["label","modelValue","placeholder"]),i(m,{label:e(l)("cms.message.status"),type:"radio",modelValue:e(t).form.items.status,"onUpdate:modelValue":o[5]||(o[5]=a=>e(t).form.items.status=a),prop:"status","input-attr":{content:{1:"显示",0:"隐藏"}},placeholder:e(l)("Please select field",{field:e(l)("cms.message.status")})},null,8,["label","modelValue","placeholder"])]),_:1},8,["model","label-position","label-width","rules"]))],6)]),_:1})),[[N,e(t).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{te as _};
