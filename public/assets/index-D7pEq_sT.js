const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CnPDeo3v.js","assets/vue-Cm_-Ome7.js"])))=>i.map(i=>d[i]);
var $o=Object.defineProperty;var Mo=(n,e,t)=>e in n?$o(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var J=(n,e,t)=>Mo(n,typeof e!="symbol"?e+"":e,t);import{i as Fo,a0 as Qt,a1 as xo,a2 as Uo,a3 as Lo,_ as ae,w as Dt,j as pt,Z as Yo,f as Be,a4 as mt,e as fo,C as po,a5 as zo,a6 as je,a7 as Bo,v as ht,a8 as jo,a9 as Ho,t as Go,u as qo,k as Zt,o as Ko,q as Jt,aa as Xo,ab as Wo}from"./index-BGkrm5xk.js";import{h as Q,s as Pe,a as ye,j as fe,D as Fe,B as lt,q as D,o as m,N as C,O as S,p as k,m as L,k as I,T as B,V as $,_ as De,Y as q,X as ue,a5 as nt,n as Ge,W as xe,U as ge,Z as ne,x as h,al as at,am as Qo,an as me,l as Zo,ag as It,L as Ht,i as we,ao as he,ap as Vt,a6 as mo,aq as ho,aa as Jo,ab as en,ar as go,b as tn,M as on,as as At,at as nn,au as ln,av as bo,aw as vo,ax as an,ay as rn,a9 as sn,ac as eo,C as un}from"./vue-Cm_-Ome7.js";import{p as cn}from"./index-6wQyfZWi.js";const dn={class:"icon-selector-box"},fn={class:"selector-header"},pn={class:"selector-title"},mn={class:"selector-tab"},hn=["title"],gn=["title"],bn=["title"],vn=["title"],_n={class:"selector-body"},yn={key:0},wn=["title","onClick"],Sn={class:"icon-prepend"},Tn={key:0,class:"name"},En=Q({__name:"iconSelector",props:{size:{default:"default"},disabled:{type:Boolean,default:!1},title:{default:""},type:{default:"ele"},placement:{default:"bottom"},modelValue:{default:""},showIconName:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(n,{emit:e}){const t=n,o=e,l=Pe(),r=Pe(),a=ye({iconType:t.type,selectorWidth:0,popoverVisible:!1,inputFocus:!1,iconSelectorMouseover:!1,fontIconNames:[],inputValue:"",prependIcon:t.modelValue,defaultModelValue:t.modelValue||"fa fa-circle-o",iconKey:0}),i=()=>{a.inputFocus=a.popoverVisible=!0},u=()=>{a.inputFocus=!1,a.popoverVisible=a.iconSelectorMouseover},d=()=>{a.iconKey++,a.prependIcon=a.defaultModelValue,a.inputValue="",o("update:modelValue",a.defaultModelValue),o("change",a.defaultModelValue)},g=s=>{a.iconType=s,a.fontIconNames=[],s=="ele"?Qt().then(T=>{a.fontIconNames=T}):s=="awe"?xo().then(T=>{a.fontIconNames=T.map(M=>`fa ${M}`)}):s=="ali"?Uo().then(T=>{a.fontIconNames=T.map(M=>`iconfont ${M}`)}):s=="local"&&Lo().then(T=>{a.fontIconNames=T})},v=s=>{a.iconSelectorMouseover=a.popoverVisible=!1,a.iconKey++,a.prependIcon=s,a.inputValue="",o("update:modelValue",s),o("change",s),Ge(()=>{l.value.blur()})},y=fe(()=>{if(!a.inputValue)return a.fontIconNames;let s=a.inputValue.trim().toLowerCase();return a.fontIconNames.filter(T=>{if(T.toLowerCase().indexOf(s)!==-1)return T})}),_=()=>{Ge(()=>{a.selectorWidth=l.value.$el.offsetWidth<260?260:l.value.$el.offsetWidth})},c=()=>{a.popoverVisible=!!(a.inputFocus||a.iconSelectorMouseover)};return Fe(()=>t.modelValue,()=>{a.iconKey++,t.modelValue!=a.prependIcon&&(a.defaultModelValue=t.modelValue),t.modelValue==""&&(a.defaultModelValue="fa fa-circle-o"),a.prependIcon=t.modelValue}),lt(()=>{_(),Fo(document,"click",c),Qt().then(s=>{a.fontIconNames=s})}),(s,T)=>{const M=D("Icon"),A=D("el-scrollbar"),z=D("el-input"),F=D("el-popover");return m(),C(F,{placement:s.placement,trigger:"focus","hide-after":0,width:a.selectorWidth,visible:a.popoverVisible},{reference:S(()=>[k(z,{modelValue:a.inputValue,"onUpdate:modelValue":T[6]||(T[6]=V=>a.inputValue=V),size:s.size,disabled:s.disabled,placeholder:s.$t("Search")+s.$t("utils.Icon"),ref_key:"selectorInput",ref:l,onFocus:i,onBlur:u,class:De("size-"+s.size)},{prepend:S(()=>[L("div",Sn,[(m(),C(M,{key:"icon"+a.iconKey,name:a.prependIcon?a.prependIcon:a.defaultModelValue},null,8,["name"])),s.showIconName?(m(),I("div",Tn,B(a.prependIcon?a.prependIcon:a.defaultModelValue),1)):$("",!0)])]),append:S(()=>[k(M,{onClick:d,name:"el-icon-RefreshRight"})]),_:1},8,["modelValue","size","disabled","placeholder","class"])]),default:S(()=>[L("div",{onMouseover:T[4]||(T[4]=nt(V=>a.iconSelectorMouseover=!0,["stop"])),onMouseout:T[5]||(T[5]=nt(V=>a.iconSelectorMouseover=!1,["stop"])),class:"icon-selector"},[L("div",dn,[L("div",fn,[L("div",pn,B(s.title?s.title:s.$t("utils.Please select an icon")),1),L("div",mn,[L("span",{title:"Element Puls "+s.$t("utils.Icon"),onClick:T[0]||(T[0]=V=>g("ele")),class:De(a.iconType=="ele"?"active":"")}," ele ",10,hn),L("span",{title:"Font Awesome "+s.$t("utils.Icon"),onClick:T[1]||(T[1]=V=>g("awe")),class:De(a.iconType=="awe"?"active":"")}," awe ",10,gn),L("span",{title:s.$t("utils.Ali iconcont Icon"),onClick:T[2]||(T[2]=V=>g("ali")),class:De(a.iconType=="ali"?"active":"")}," ali ",10,bn),L("span",{title:s.$t("utils.Local icon title"),onClick:T[3]||(T[3]=V=>g("local")),class:De(a.iconType=="local"?"active":"")}," local ",10,vn)])]),L("div",_n,[k(A,{ref_key:"selectorScrollbarRef",ref:r},{default:S(()=>[y.value.length>0?(m(),I("div",yn,[(m(!0),I(q,null,ue(y.value,(V,p)=>(m(),I("div",{class:"icon-selector-item",title:V,onClick:f=>v(V),key:p},[k(M,{name:V},null,8,["name"])],8,wn))),128))])):$("",!0)]),_:1},512)])])],32)]),_:1},8,["placement","width","visible"])}}}),kn=ae(En,[["__scopeId","data-v-13330066"]]),Dn=["string","password","number","radio","checkbox","switch","textarea","array","datetime","year","date","time","select","selects","remoteSelect","remoteSelects","editor","city","image","images","file","files","icon","color"],In=Q({__name:"array",props:{modelValue:{default:()=>[]},keyTitle:{default:""},valueTitle:{default:""}},setup(n){const{t:e}=Dt.useI18n(),t=n,o=ye({value:t.modelValue,keyTitle:t.keyTitle?t.keyTitle:e("utils.ArrayKey"),valueTitle:t.valueTitle?t.valueTitle:e("utils.ArrayValue")}),l=()=>{o.value.push({key:"",value:""})},r=a=>{o.value.splice(a,1)};return Fe(()=>t.modelValue,a=>{o.value=a}),(a,i)=>{const u=D("el-col"),d=D("el-row"),g=D("el-input"),v=D("el-button"),y=xe("blur");return m(),I("div",null,[k(d,{gutter:10},{default:S(()=>[k(u,{span:10,class:"ba-array-key"},{default:S(()=>[ge(B(o.keyTitle),1)]),_:1}),k(u,{span:10,class:"ba-array-value"},{default:S(()=>[ge(B(o.valueTitle),1)]),_:1})]),_:1}),(m(!0),I(q,null,ue(o.value,(_,c)=>(m(),C(d,{class:"ba-array-item",gutter:10,key:c},{default:S(()=>[k(u,{span:10},{default:S(()=>[k(g,{modelValue:_.key,"onUpdate:modelValue":s=>_.key=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),k(u,{span:10},{default:S(()=>[k(g,{modelValue:_.value,"onUpdate:modelValue":s=>_.value=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),k(u,{span:4},{default:S(()=>[k(v,{onClick:s=>r(c),size:"small",icon:"el-icon-Delete",circle:""},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),k(d,{gutter:10},{default:S(()=>[k(u,{span:10,offset:10},{default:S(()=>[ne((m(),C(v,{class:"ba-add-array-item",onClick:l,icon:"el-icon-Plus"},{default:S(()=>[ge(B(h(e)("Add")),1)]),_:1})),[[y]])]),_:1})]),_:1})])}}}),Vn=ae(In,[["__scopeId","data-v-b7b95894"]]),H=()=>({null:!1,primaryKey:!1,unsigned:!1,autoIncrement:!1}),za={string:{type:"varchar",length:255,precision:0,defaultType:"EMPTY STRING",...H()},password:{type:"varchar",length:32,precision:0,defaultType:"EMPTY STRING",...H()},number:{type:"int",length:10,precision:0,default:"0",defaultType:"INPUT",...H()},radio:{type:"enum",length:0,precision:0,defaultType:"NULL",...H()},checkbox:{type:"set",length:0,precision:0,defaultType:"NULL",...H()},switch:{type:"tinyint",length:1,precision:0,default:"0",defaultType:"INPUT",...H(),unsigned:!0},textarea:{type:"varchar",length:255,precision:0,defaultType:"EMPTY STRING",...H()},array:{type:"varchar",length:255,precision:0,defaultType:"EMPTY STRING",...H()},datetime:{type:"bigint",length:16,precision:0,defaultType:"NULL",...H(),null:!0,unsigned:!0},year:{type:"year",length:4,precision:0,defaultType:"NULL",...H(),null:!0},date:{type:"date",length:0,precision:0,defaultType:"NULL",...H(),null:!0},time:{type:"time",length:0,precision:0,defaultType:"NULL",...H(),null:!0},select:{type:"enum",length:0,precision:0,defaultType:"NULL",...H()},selects:{type:"varchar",length:255,precision:0,defaultType:"EMPTY STRING",...H()},remoteSelect:{type:"int",length:10,precision:0,default:"0",defaultType:"INPUT",...H(),unsigned:!0},remoteSelects:{type:"varchar",length:255,precision:0,defaultType:"EMPTY STRING",...H()},editor:{type:"text",length:0,precision:0,defaultType:"NULL",...H(),null:!0},city:{type:"varchar",length:100,precision:0,defaultType:"EMPTY STRING",...H()},image:{type:"varchar",length:255,precision:0,defaultType:"EMPTY STRING",...H()},images:{type:"varchar",length:1500,precision:0,defaultType:"EMPTY STRING",...H()},file:{type:"varchar",length:255,precision:0,defaultType:"EMPTY STRING",...H()},files:{type:"varchar",length:1500,precision:0,defaultType:"EMPTY STRING",...H()},icon:{type:"varchar",length:50,precision:0,defaultType:"EMPTY STRING",...H()},color:{type:"varchar",length:50,precision:0,defaultType:"EMPTY STRING",...H()}},to=n=>typeof n=="string"?n==""?[]:n.split(","):n,Cn={key:1,class:"text"},An={key:1,class:"text"},Rn={class:"ml-6"},On={key:1,class:"text"},Pn={key:1,class:"text"},Nn=Q({__name:"buttons",props:{row:{},field:{},column:{},index:{}},setup(n){const{t:e,te:t}=Dt.useI18n(),o=n,l=at("baTable"),r=i=>{if(typeof i.click=="function"){i.click(o.row,o.field);return}l.onTableAction(i.name,o)},a=i=>i?t(i)?e(i):i:"";return(i,u)=>{const d=D("Icon"),g=D("el-button"),v=D("el-tooltip"),y=D("el-popconfirm"),_=xe("blur");return Qo([i.field],()=>(m(),I("div",null,[(m(!0),I(q,null,ue(i.field.buttons,(c,s)=>(m(),I(q,{key:s},[!c.display||c.display(i.row,i.field)?(m(),I(q,{key:0},[c.render=="basicButton"?ne((m(),C(g,me({key:0,onClick:T=>r(c),class:[c.class,"ba-table-render-buttons-item"],type:c.type,disabled:c.disabled&&c.disabled(i.row,i.field),ref_for:!0},c.attr),{default:S(()=>[c.icon?(m(),C(d,{key:0,name:c.icon},null,8,["name"])):$("",!0),c.text?(m(),I("div",Cn,B(a(c.text)),1)):$("",!0)]),_:2},1040,["onClick","class","type","disabled"])),[[_]]):$("",!0),c.render=="tipButton"&&(c.name=="edit"&&h(l).auth("edit")||c.name!="edit")?(m(),C(v,{key:1,disabled:!(c.title&&!c.disabledTip),content:a(c.title),placement:"top"},{default:S(()=>[ne((m(),C(g,me({onClick:T=>r(c),class:[c.class,"ba-table-render-buttons-item"],type:c.type,disabled:c.disabled&&c.disabled(i.row,i.field),ref_for:!0},c.attr),{default:S(()=>[c.icon?(m(),C(d,{key:0,name:c.icon},null,8,["name"])):$("",!0),c.text?(m(),I("div",An,B(a(c.text)),1)):$("",!0)]),_:2},1040,["onClick","class","type","disabled"])),[[_]])]),_:2},1032,["disabled","content"])):$("",!0),c.render=="confirmButton"&&(c.name=="delete"&&h(l).auth("del")||c.name!="delete")?(m(),C(y,me({key:2,disabled:c.disabled&&c.disabled(i.row,i.field),ref_for:!0},c.popconfirm,{onConfirm:T=>r(c)}),{reference:S(()=>[L("div",Rn,[k(v,{disabled:!c.title,content:a(c.title),placement:"top"},{default:S(()=>[ne((m(),C(g,me({class:[c.class,"ba-table-render-buttons-item"],type:c.type,disabled:c.disabled&&c.disabled(i.row,i.field),ref_for:!0},c.attr),{default:S(()=>[c.icon?(m(),C(d,{key:0,name:c.icon},null,8,["name"])):$("",!0),c.text?(m(),I("div",On,B(a(c.text)),1)):$("",!0)]),_:2},1040,["class","type","disabled"])),[[_]])]),_:2},1032,["disabled","content"])])]),_:2},1040,["disabled","onConfirm"])):$("",!0),c.render=="moveButton"&&(c.name=="weigh-sort"&&h(l).auth("sortable")||c.name!="weigh-sort")?(m(),C(v,{key:3,disabled:!(c.title&&!c.disabledTip),content:a(c.title),placement:"top"},{default:S(()=>[k(g,me({class:[c.class,"ba-table-render-buttons-item move-button"],type:c.type,disabled:c.disabled&&c.disabled(i.row,i.field),ref_for:!0},c.attr),{default:S(()=>[c.icon?(m(),C(d,{key:0,name:c.icon},null,8,["name"])):$("",!0),c.text?(m(),I("div",Pn,B(a(c.text)),1)):$("",!0)]),_:2},1040,["class","type","disabled"])]),_:2},1032,["disabled","content"])):$("",!0)],64)):$("",!0)],64))),128))])),u,0)}}}),$n=ae(Nn,[["__scopeId","data-v-bbe2c6a6"]]),Mn=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"})),Se=(n,e,t,o)=>{if(!e.prop)return"";const l=e.prop;let r=n[l];if(l.indexOf(".")>-1){const a=l.split(".");r=n[a[0]];for(let i=1;i<a.length;i++)r=r?r[a[i]]??"":"";return r}return r==null&&(r=e.default),e.renderFormatter&&typeof e.renderFormatter=="function"&&(r=e.renderFormatter(n,e,r,t,o),console.warn("baTable.table.column.renderFormatter 即将废弃，请直接使用兼容 el-table 的 baTable.table.column.formatter 代替")),e.formatter&&typeof e.formatter=="function"&&(r=e.formatter(n,t,r,o)),r},Ba=(n=["weigh-sort","edit","delete"])=>{const e=new Map([["weigh-sort",{render:"moveButton",name:"weigh-sort",title:"Drag sort",text:"",type:"info",icon:"fa fa-arrows",class:"table-row-weigh-sort",disabledTip:!1}],["edit",{render:"tipButton",name:"edit",title:"Edit",text:"",type:"primary",icon:"fa fa-pencil",class:"table-row-edit",disabledTip:!1}],["delete",{render:"confirmButton",name:"delete",title:"Delete",text:"",type:"danger",icon:"fa fa-trash",class:"table-row-delete",popconfirm:{confirmButtonText:pt.global.t("Delete"),cancelButtonText:pt.global.t("Cancel"),confirmButtonType:"danger",title:pt.global.t("Are you sure to delete the selected record?")},disabledTip:!1}],["reply",{render:"basicButton",name:"edit",title:"Reply",text:"",type:"primary",icon:"fa fa-mail-reply",class:"table-row-delete",disabledTip:!1}]]),t=[];for(const o in n)e.has(n[o])&&t.push(e.get(n[o]));return t},Lt=(n,e,t=-1)=>{for(const o in n){if(typeof t=="number"&&t++,t==e)return n[o];if(n[o].children&&(t=Lt(n[o].children,e,t),typeof t!="number"))return t}return t},Fn=Q({__name:"color",props:{row:{},field:{},column:{},index:{}},setup(n){const e=n,t=Se(e.row,e.field,e.column,e.index);return(o,l)=>(m(),I("div",null,[L("div",{style:Zo({background:h(t)}),class:"ba-table-render-color"},null,4)]))}}),xn=ae(Fn,[["__scopeId","data-v-5c132ae2"]]),Un=Object.freeze(Object.defineProperty({__proto__:null,default:xn},Symbol.toStringTag,{value:"Module"})),Ln=Q({__name:"customRender",props:{row:{},field:{},column:{},index:{}},setup(n){const e=n,t=Se(e.row,e.field,e.column,e.index);return(o,l)=>(m(),I("div",null,[(m(),C(It(o.field.customRender),{renderRow:o.row,renderField:o.field,renderValue:h(t),renderColumn:o.column,renderIndex:o.index},null,8,["renderRow","renderField","renderValue","renderColumn","renderIndex"]))]))}}),Yn=Object.freeze(Object.defineProperty({__proto__:null,default:Ln},Symbol.toStringTag,{value:"Module"})),zn=["innerHTML"],Bn=Q({__name:"customTemplate",props:{row:{},field:{},column:{},index:{}},setup(n){const e=n,t=Se(e.row,e.field,e.column,e.index);return(o,l)=>(m(),I("div",null,[L("div",{innerHTML:o.field.customTemplate?o.field.customTemplate(o.row,o.field,h(t),o.column,o.index):""},null,8,zn)]))}}),jn=Object.freeze(Object.defineProperty({__proto__:null,default:Bn},Symbol.toStringTag,{value:"Module"})),Hn=Q({__name:"datetime",props:{row:{},field:{},column:{},index:{}},setup(n){const e=n,t=Se(e.row,e.field,e.column,e.index);return(o,l)=>(m(),I("div",null,B(h(t)?h(Yo)(h(t),o.field.timeFormat??"yyyy-mm-dd hh:MM:ss"):"-"),1))}}),Gn=Object.freeze(Object.defineProperty({__proto__:null,default:Hn},Symbol.toStringTag,{value:"Module"})),qn={};function Kn(n,e){const t=D("el-tag");return m(),I("div",null,[k(t,{effect:"dark",type:"danger"},{default:S(()=>e[0]||(e[0]=[ge("Field renderer not found")])),_:1})])}const Xn=ae(qn,[["render",Kn]]),Wn=Object.freeze(Object.defineProperty({__proto__:null,default:Xn},Symbol.toStringTag,{value:"Module"})),Qn=Q({__name:"icon",props:{row:{},field:{},column:{},index:{}},setup(n){const e=n;return(t,o)=>{const l=D("Icon",!0);return m(),I("div",null,[k(l,{color:"var(--el-text-color-primary)",name:h(Se)(e.row,e.field,e.column,e.index)},null,8,["name"])])}}}),Zn=Object.freeze(Object.defineProperty({__proto__:null,default:Qn},Symbol.toStringTag,{value:"Module"})),Jn=Q({__name:"image",props:{row:{},field:{},column:{},index:{}},setup(n){const e=n,t=Se(e.row,e.field,e.column,e.index);return(o,l)=>{const r=D("el-image");return m(),I("div",null,[h(t)?(m(),C(r,{key:0,"hide-on-click-modal":!0,"preview-teleported":!0,"preview-src-list":[h(Be)(h(t))],src:h(Be)(h(t)),class:"ba-table-render-image"},null,8,["preview-src-list","src"])):$("",!0)])}}}),el=ae(Jn,[["__scopeId","data-v-f9208128"]]),tl=Object.freeze(Object.defineProperty({__proto__:null,default:el},Symbol.toStringTag,{value:"Module"})),ol=Q({__name:"images",props:{row:{},field:{},column:{},index:{}},setup(n){const e=n,t=Se(e.row,e.field,e.column,e.index);return(o,l)=>{const r=D("el-image");return m(),I("div",null,[h(Ht)(h(t))&&h(t).length?(m(!0),I(q,{key:0},ue(h(t),(a,i)=>(m(),C(r,{key:i,"initial-index":i,"preview-teleported":!0,"preview-src-list":h(mt)(h(t)),class:"ba-table-render-images-item",src:h(Be)(a),"hide-on-click-modal":!0},null,8,["initial-index","preview-src-list","src"]))),128)):$("",!0)])}}}),nl=ae(ol,[["__scopeId","data-v-9d865e58"]]),ll=Object.freeze(Object.defineProperty({__proto__:null,default:nl},Symbol.toStringTag,{value:"Module"})),al=Q({__name:"switch",props:{row:{},field:{},column:{},index:{}},setup(n){const e=Pe(!1),t=n,o=at("baTable"),l=Pe(Se(t.row,t.field,t.column,t.index));typeof l.value=="number"&&(l.value=l.value.toString());const r=a=>{e.value=!0,o.api.postData("edit",{[o.table.pk]:t.row[o.table.pk],[t.field.prop]:a}).then(()=>{l.value=a,o.onTableAction("field-change",{value:a,...t})}).finally(()=>{e.value=!1})};return(a,i)=>{const u=D("el-switch");return m(),I("div",null,[a.field.prop?(m(),C(u,{key:0,onChange:r,"model-value":l.value,loading:e.value,"active-value":"1","inactive-value":"0"},null,8,["model-value","loading"])):$("",!0)])}}}),rl=Object.freeze(Object.defineProperty({__proto__:null,default:al},Symbol.toStringTag,{value:"Module"})),il=Q({__name:"tag",props:{row:{},field:{},column:{},index:{}},setup(n){const e=n,t=Se(e.row,e.field,e.column,e.index),o=(l,r)=>!we(r)&&r[l]?r[l]:"primary";return(l,r)=>{const a=D("el-tag");return m(),I("div",null,[h(t)!==""?(m(),C(a,{key:0,type:o(h(t),l.field.custom),effect:l.field.effect??"light",size:l.field.size??"default"},{default:S(()=>[ge(B(h(we)(l.field.replaceValue)?h(t):l.field.replaceValue[h(t)]??h(t)),1)]),_:1},8,["type","effect","size"])):$("",!0)])}}}),sl=Object.freeze(Object.defineProperty({__proto__:null,default:il},Symbol.toStringTag,{value:"Module"})),ul=Q({__name:"tags",props:{row:{},field:{},column:{},index:{}},setup(n){const e=n,t=Se(e.row,e.field,e.column,e.index),o=(l,r)=>!we(r)&&r[l]?r[l]:"primary";return(l,r)=>{const a=D("el-tag");return m(),I("div",null,[h(Ht)(h(t))?(m(!0),I(q,{key:0},ue(h(t),(i,u)=>(m(),I(q,{key:u},[i!==""?(m(),C(a,{key:0,class:"m-4",type:o(i,l.field.custom),effect:l.field.effect??"light",size:l.field.size??"default"},{default:S(()=>[ge(B(h(we)(l.field.replaceValue)?i:l.field.replaceValue[i]??i),1)]),_:2},1032,["type","effect","size"])):$("",!0)],64))),128)):(m(),I(q,{key:1},[h(t)!==""?(m(),C(a,{key:0,type:o(h(t),l.field.custom),effect:l.field.effect??"light",size:l.field.size??"default"},{default:S(()=>[ge(B(h(we)(l.field.replaceValue)?h(t):l.field.replaceValue[h(t)]??h(t)),1)]),_:1},8,["type","effect","size"])):$("",!0)],64))])}}}),cl=ae(ul,[["__scopeId","data-v-fef3d181"]]),dl=Object.freeze(Object.defineProperty({__proto__:null,default:cl},Symbol.toStringTag,{value:"Module"})),fl=Q({__name:"url",props:{row:{},field:{},column:{},index:{}},setup(n){const e=n;e.field.click&&console.warn("baTable.table.column.click 即将废弃，请使用 el-table 的 @cell-click 或单元格自定义渲染代替");const t=Se(e.row,e.field,e.column,e.index),o=(l,r)=>{r.target=="_blank"?window.open(l):window.location.href=l};return(l,r)=>{const a=D("Icon"),i=D("el-button"),u=D("el-input");return m(),I("div",null,[k(u,{"model-value":h(t),placeholder:l.$t("Link address")},{append:S(()=>[k(i,{onClick:r[0]||(r[0]=d=>o(h(t),l.field))},{default:S(()=>[k(a,{color:"#606266",name:"el-icon-Position"})]),_:1})]),_:1},8,["model-value","placeholder"])])}}}),pl=Object.freeze(Object.defineProperty({__proto__:null,default:fl},Symbol.toStringTag,{value:"Module"})),ml={key:0,class:"table-pagination"},hl=Q({__name:"index",props:{pagination:{type:Boolean,default:!0}},setup(n,{expose:e}){const t=fo(),o=Pe(),l=at("baTable"),r=n,a={},i=Object.assign({"./fieldRender/buttons.vue":Mn,"./fieldRender/color.vue":Un,"./fieldRender/customRender.vue":Yn,"./fieldRender/customTemplate.vue":jn,"./fieldRender/datetime.vue":Gn,"./fieldRender/default.vue":Wn,"./fieldRender/icon.vue":Zn,"./fieldRender/image.vue":tl,"./fieldRender/images.vue":ll,"./fieldRender/switch.vue":rl,"./fieldRender/tag.vue":sl,"./fieldRender/tags.vue":dl,"./fieldRender/url.vue":pl});for(const p in i){const f=p.replace("./fieldRender/","").replace(".vue","");a[f]=i[p].default}const u=(p,f,b)=>f.getRenderKey&&typeof f.getRenderKey=="function"?f.getRenderKey(b.row,f,b.column,b.$index):f.render=="switch"?f.render+f.prop:p+b.$index+"-"+f.render+"-"+(f.prop?"-"+f.prop+"-"+b.row[f.prop]:""),d=p=>{l.onTableAction("page-size-change",{size:p})},g=p=>{l.onTableAction("current-page-change",{page:p})},v=({order:p,prop:f})=>{l.onTableAction("sort-change",{prop:f,order:p?p=="ascending"?"asc":"desc":""})},y=fe(()=>{let p=[10,20,50,100];return l.table.filter.limit&&(p.includes(l.table.filter.limit)||p.push(l.table.filter.limit)),p}),_=p=>{var f;c(p.map(b=>b[l.table.pk].toString()))?p.map(b=>{b.children&&s(b.children,!0)}):(f=o.value)==null||f.clearSelection()},c=p=>{let f=l.table.data;for(const b in f)return p.includes(f[b][l.table.pk].toString());return!1},s=(p,f)=>{p.map(b=>{T(b,f),b.children&&s(b.children,f)})},T=(p,f)=>{p&&Ge(()=>{var b;(b=o.value)==null||b.toggleRowSelection(p,f)})},M=(p,f)=>{p.some(b=>f[l.table.pk]===b[l.table.pk])?f.children&&s(f.children,!0):f.children&&s(f.children,!1)},A=p=>{l.onTableAction("selection-change",p)},z=(p,f)=>{var b;for(const E in p)(b=o.value)==null||b.toggleRowExpansion(p[E],f),p[E].children&&z(p[E].children,f)};return e({unFoldAll:p=>{z(l.table.data,p)},getRef:()=>o.value}),(p,f)=>{const b=D("el-table-column"),E=D("el-table"),P=D("el-pagination"),x=xe("loading");return m(),I("div",null,[he(p.$slots,"neck",{},void 0,!0),ne((m(),C(E,me({ref_key:"tableRef",ref:o,class:"ba-data-table w100","header-cell-class-name":"table-header-cell","default-expand-all":h(l).table.expandAll,data:h(l).table.data,"row-key":h(l).table.pk,border:!0,stripe:"",onSelectAll:_,onSelect:M,onSelectionChange:A,onSortChange:v,onRowDblclick:h(l).onTableDblclick},p.$attrs),{default:S(()=>[he(p.$slots,"columnPrepend",{},void 0,!0),(m(!0),I(q,null,ue(h(l).table.column,(j,K)=>(m(),I(q,null,[j.show!==!1?(m(),I(q,{key:0},[j.render=="slot"?he(p.$slots,j.slotName,{key:0},void 0,!0):(m(),C(b,me({key:K+"-column",ref_for:!0},j,{"column-key":(j.columnKey?j.columnKey:`table-column-${j.prop}`)||h(po)()}),Vt({_:2},[j.render?{name:"default",fn:S(X=>[(m(),C(It(a[j.render]??a.default),{row:X.row,field:j,column:X.column,index:X.$index,key:u(K,j,X)},null,8,["row","field","column","index"]))]),key:"0"}:void 0]),1040,["column-key"]))],64)):$("",!0)],64))),256)),he(p.$slots,"columnAppend",{},void 0,!0)]),_:3},16,["default-expand-all","data","row-key","onRowDblclick"])),[[x,h(l).table.loading]]),r.pagination?(m(),I("div",ml,[k(P,{currentPage:h(l).table.filter.page,"page-size":h(l).table.filter.limit,"page-sizes":y.value,background:"",layout:h(t).layout.shrink?"prev, next, jumper":"sizes,total, ->, prev, pager, next, jumper",total:h(l).table.total,onSizeChange:d,onCurrentChange:g},null,8,["currentPage","page-size","page-sizes","layout","total"])])):$("",!0),he(p.$slots,"footer",{},void 0,!0)])}}}),gl=ae(hl,[["__scopeId","data-v-7145c785"]]),bl={class:"table-com-search"},vl={key:0,class:"com-search-col-label"},_l={class:"com-search-col-input"},yl={key:0,class:"com-search-col-label w16"},wl={class:"com-search-col-input-range w83"},Sl={key:0,class:"com-search-col-label"},Tl={key:1,class:"com-search-col-input-range"},El={class:"range-separator"},kl={key:2,class:"com-search-col-input"},Dl={key:3,class:"com-search-col-input"},Il={class:"com-search-col pl-20"},Vl=Q({__name:"index",setup(n){const e=at("baTable"),t=()=>{e.initComSearch(),e.onTableAction("com-search",{})};return(o,l)=>{const r=D("el-col"),a=D("el-date-picker"),i=D("el-input"),u=D("el-checkbox"),d=D("el-option"),g=D("el-select"),v=D("el-button"),y=D("el-row"),_=D("el-form"),c=xe("blur");return m(),I("div",bl,[k(_,{onSubmit:l[2]||(l[2]=nt(()=>{},["prevent"])),onKeyup:l[3]||(l[3]=mo(s=>h(e).onTableAction("com-search",{}),["enter"])),"label-position":"top",model:h(e).comSearch.form},{default:S(()=>[k(y,null,{default:S(()=>[(m(!0),I(q,null,ue(h(e).table.column,(s,T)=>{var M,A,z,F;return m(),I(q,{key:T},[s.operator!==!1?(m(),I(q,{key:0},[s.comSearchRender=="customRender"||s.comSearchRender=="slot"?(m(),C(r,me({key:0,ref_for:!0},{xs:(M=s.comSearchColAttr)!=null&&M.xs?(A=s.comSearchColAttr)==null?void 0:A.xs:24,sm:(z=s.comSearchColAttr)!=null&&z.sm?(F=s.comSearchColAttr)==null?void 0:F.sm:6,...s.comSearchColAttr}),{default:S(()=>[L("div",{class:De(["com-search-col",s.prop])},[s.comSearchShowLabel!==!1?(m(),I("div",vl,B(s.label),1)):$("",!0),L("div",_l,[s.comSearchRender=="customRender"?(m(),C(It(s.comSearchCustomRender),{key:0,renderRow:s,renderField:s.prop,renderValue:h(e).comSearch.form[s.prop]},null,8,["renderRow","renderField","renderValue"])):s.comSearchRender=="slot"?he(o.$slots,s.comSearchSlotName,{key:1},void 0,!0):$("",!0)])],2)]),_:2},1040)):s.render=="datetime"&&(s.operator=="RANGE"||s.operator=="NOT RANGE")?(m(),C(r,{key:1,xs:24,sm:12},{default:S(()=>[L("div",{class:De(["com-search-col",s.prop])},[s.comSearchShowLabel!==!1?(m(),I("div",yl,B(s.label),1)):$("",!0),L("div",wl,[k(a,{class:"datetime-picker w100",modelValue:h(e).comSearch.form[s.prop],"onUpdate:modelValue":V=>h(e).comSearch.form[s.prop]=V,"default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,1,1,23,59,59)],type:s.comSearchRender=="date"?"daterange":"datetimerange","range-separator":o.$t("To"),"start-placeholder":o.$t("el.datepicker.startDate"),"end-placeholder":o.$t("el.datepicker.endDate"),"value-format":s.comSearchRender=="date"?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss",teleported:!1},null,8,["modelValue","onUpdate:modelValue","default-time","type","range-separator","start-placeholder","end-placeholder","value-format"])])],2)]),_:2},1024)):(m(),C(r,{key:2,xs:24,sm:6},{default:S(()=>[L("div",{class:De(["com-search-col",s.prop])},[s.comSearchShowLabel!==!1?(m(),I("div",Sl,B(s.label),1)):$("",!0),s.operator=="RANGE"||s.operator=="NOT RANGE"?(m(),I("div",Tl,[k(i,{placeholder:s.operatorPlaceholder,type:"string",modelValue:h(e).comSearch.form[s.prop+"-start"],"onUpdate:modelValue":V=>h(e).comSearch.form[s.prop+"-start"]=V,clearable:!0},null,8,["placeholder","modelValue","onUpdate:modelValue"]),L("div",El,B(o.$t("To")),1),k(i,{placeholder:s.operatorPlaceholder,type:"string",modelValue:h(e).comSearch.form[s.prop+"-end"],"onUpdate:modelValue":V=>h(e).comSearch.form[s.prop+"-end"]=V,clearable:!0},null,8,["placeholder","modelValue","onUpdate:modelValue"])])):s.operator=="NULL"||s.operator=="NOT NULL"?(m(),I("div",kl,[k(u,{modelValue:h(e).comSearch.form[s.prop],"onUpdate:modelValue":V=>h(e).comSearch.form[s.prop]=V,label:s.operator,size:"large"},null,8,["modelValue","onUpdate:modelValue","label"])])):s.operator?(m(),I("div",Dl,[s.render=="datetime"||s.comSearchRender=="date"?(m(),C(a,{key:0,class:"datetime-picker w100",modelValue:h(e).comSearch.form[s.prop],"onUpdate:modelValue":V=>h(e).comSearch.form[s.prop]=V,type:s.comSearchRender=="date"?"date":"datetime","value-format":s.comSearchRender=="date"?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss",placeholder:s.operatorPlaceholder,teleported:!1},null,8,["modelValue","onUpdate:modelValue","type","value-format","placeholder"])):(s.render=="tag"||s.render=="tags"||s.comSearchRender=="select")&&s.replaceValue?(m(),C(g,{key:1,class:"w100",placeholder:s.operatorPlaceholder,modelValue:h(e).comSearch.form[s.prop],"onUpdate:modelValue":V=>h(e).comSearch.form[s.prop]=V,multiple:s.operator=="IN"||s.operator=="NOT IN",clearable:!0},{default:S(()=>[(m(!0),I(q,null,ue(s.replaceValue,(V,p)=>(m(),C(d,{key:s.prop+p,label:V,value:p},null,8,["label","value"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","multiple"])):s.comSearchRender=="remoteSelect"?(m(),C(Ma,{key:2,type:"remoteSelect",modelValue:h(e).comSearch.form[s.prop],"onUpdate:modelValue":V=>h(e).comSearch.form[s.prop]=V,attr:s.remote,placeholder:s.operatorPlaceholder},null,8,["modelValue","onUpdate:modelValue","attr","placeholder"])):s.render=="switch"?(m(),C(g,{key:3,placeholder:s.operatorPlaceholder,modelValue:h(e).comSearch.form[s.prop],"onUpdate:modelValue":V=>h(e).comSearch.form[s.prop]=V,clearable:!0,class:"w100"},{default:S(()=>[h(we)(s.replaceValue)?(m(),I(q,{key:1},[k(d,{label:o.$t("utils.open"),value:"1"},null,8,["label"]),k(d,{label:o.$t("utils.close"),value:"0"},null,8,["label"])],64)):(m(!0),I(q,{key:0},ue(s.replaceValue,(V,p)=>(m(),C(d,{key:s.prop+p,label:V,value:p},null,8,["label","value"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue"])):(m(),C(i,{key:4,placeholder:s.operatorPlaceholder,type:"string",modelValue:h(e).comSearch.form[s.prop],"onUpdate:modelValue":V=>h(e).comSearch.form[s.prop]=V,clearable:!0},null,8,["placeholder","modelValue","onUpdate:modelValue"]))])):$("",!0)],2)]),_:2},1024))],64)):$("",!0)],64)}),128)),k(r,{xs:24,sm:6},{default:S(()=>[L("div",Il,[ne((m(),C(v,{onClick:l[0]||(l[0]=s=>h(e).onTableAction("com-search",{})),type:"primary"},{default:S(()=>[ge(B(o.$t("Search")),1)]),_:1})),[[c]]),k(v,{onClick:l[1]||(l[1]=s=>t())},{default:S(()=>[ge(B(o.$t("Reset")),1)]),_:1})])]),_:1})]),_:3})]),_:3},8,["model"])])}}}),Cl=ae(Vl,[["__scopeId","data-v-3914b51f"]]),Al={class:"table-header-operate-text"},Rl={class:"table-header-operate-text"},Ol={class:"mlr-12"},Pl={class:"table-header-operate-text"},Nl={class:"table-header-operate-text"},$l={class:"table-search"},Ml={key:1,class:"table-search-button-group"},Fl=Q({__name:"index",props:{buttons:{default:()=>["refresh","add","edit","delete"]},quickSearchPlaceholder:{default:""}},setup(n){const{t:e}=Dt.useI18n(),t=at("baTable"),o=n,l=fe(()=>{let d=[];for(let g of t.table.column)g.type==="selection"||g.render==="buttons"||g.enableColumnDisplayControl===!1||d.push(g);return d}),r=fe(()=>t.table.selection.length>0),a=(d,g={})=>{t.onTableHeaderAction(d,g)},i=ho(()=>{t.onTableHeaderAction("quick-search",{keyword:t.table.filter.quickSearch})},500),u=(d,g)=>{t.onTableHeaderAction("change-show-column",{field:g,value:d})};return(d,g)=>{const v=D("Icon"),y=D("el-button"),_=D("el-tooltip"),c=D("el-popconfirm"),s=D("el-input"),T=D("el-checkbox"),M=D("el-dropdown-item"),A=D("el-dropdown-menu"),z=D("el-dropdown"),F=xe("blur");return m(),I(q,null,[k(en,{name:"el-zoom-in-bottom",mode:"out-in"},{default:S(()=>[ne(k(Cl,null,Vt({_:2},[ue(d.$slots,(V,p)=>({name:p,fn:S(()=>[he(d.$slots,p,{},void 0,!0)])}))]),1536),[[Jo,o.buttons.includes("comSearch")&&h(t).table.showComSearch]])]),_:3}),L("div",me(d.$attrs,{class:"table-header ba-scroll-style"}),[he(d.$slots,"refreshPrepend",{},void 0,!0),o.buttons.includes("refresh")?(m(),C(_,{key:0,content:h(e)("Refresh"),placement:"top"},{default:S(()=>[ne((m(),C(y,{onClick:g[0]||(g[0]=V=>a("refresh",{loading:!0})),color:"#40485b",class:"table-header-operate",type:"info"},{default:S(()=>[k(v,{name:"fa fa-refresh"})]),_:1})),[[F]])]),_:1},8,["content"])):$("",!0),he(d.$slots,"refreshAppend",{},void 0,!0),o.buttons.includes("add")&&h(t).auth("add")?(m(),C(_,{key:1,content:h(e)("Add"),placement:"top"},{default:S(()=>[ne((m(),C(y,{onClick:g[1]||(g[1]=V=>a("add")),class:"table-header-operate",type:"primary"},{default:S(()=>[k(v,{name:"fa fa-plus"}),L("span",Al,B(h(e)("Add")),1)]),_:1})),[[F]])]),_:1},8,["content"])):$("",!0),o.buttons.includes("edit")&&h(t).auth("edit")?(m(),C(_,{key:2,content:h(e)("Edit selected row"),placement:"top"},{default:S(()=>[ne((m(),C(y,{onClick:g[2]||(g[2]=V=>a("edit")),disabled:!r.value,class:"table-header-operate",type:"primary"},{default:S(()=>[k(v,{name:"fa fa-pencil"}),L("span",Rl,B(h(e)("Edit")),1)]),_:1},8,["disabled"])),[[F]])]),_:1},8,["content"])):$("",!0),o.buttons.includes("delete")&&h(t).auth("del")?(m(),C(c,{key:3,onConfirm:g[3]||(g[3]=V=>a("delete")),"confirm-button-text":h(e)("Delete"),"cancel-button-text":h(e)("Cancel"),confirmButtonType:"danger",title:h(e)("Are you sure to delete the selected record?"),disabled:!r.value},{reference:S(()=>[L("div",Ol,[k(_,{content:h(e)("Delete selected row"),placement:"top"},{default:S(()=>[ne((m(),C(y,{disabled:!r.value,class:"table-header-operate",type:"danger"},{default:S(()=>[k(v,{name:"fa fa-trash"}),L("span",Pl,B(h(e)("Delete")),1)]),_:1},8,["disabled"])),[[F]])]),_:1},8,["content"])])]),_:1},8,["confirm-button-text","cancel-button-text","title","disabled"])):$("",!0),o.buttons.includes("unfold")?(m(),C(_,{key:4,content:(h(t).table.expandAll?h(e)("Shrink"):h(e)("Open"))+h(e)("All submenus"),placement:"top"},{default:S(()=>[ne((m(),C(y,{onClick:g[4]||(g[4]=V=>h(t).onTableHeaderAction("unfold",{unfold:!h(t).table.expandAll})),class:"table-header-operate",type:h(t).table.expandAll?"danger":"warning"},{default:S(()=>[L("span",Nl,B(h(t).table.expandAll?h(e)("Shrink all"):h(e)("Expand all")),1)]),_:1},8,["type"])),[[F]])]),_:1},8,["content"])):$("",!0),he(d.$slots,"default",{},void 0,!0),L("div",$l,[he(d.$slots,"quickSearchPrepend",{},void 0,!0),o.buttons.includes("quickSearch")?(m(),C(s,{key:0,modelValue:h(t).table.filter.quickSearch,"onUpdate:modelValue":g[5]||(g[5]=V=>h(t).table.filter.quickSearch=V),class:"xs-hidden quick-search",onInput:h(i),placeholder:d.quickSearchPlaceholder?d.quickSearchPlaceholder:h(e)("Search"),clearable:""},null,8,["modelValue","onInput","placeholder"])):$("",!0),o.buttons.includes("columnDisplay")||o.buttons.includes("comSearch")?(m(),I("div",Ml,[o.buttons.includes("columnDisplay")?(m(),C(z,{key:0,"max-height":380,"hide-on-click":!1},{dropdown:S(()=>[k(A,null,{default:S(()=>[(m(!0),I(q,null,ue(l.value,(V,p)=>(m(),C(M,{key:p},{default:S(()=>[V.prop?(m(),C(T,{key:0,onChange:f=>u(f,V.prop),checked:!V.show,"model-value":V.show,size:"small",label:V.label},null,8,["onChange","checked","model-value","label"])):$("",!0)]),_:2},1024))),128))]),_:1})]),default:S(()=>[ne((m(),C(y,{class:De(["table-search-button-item",o.buttons.includes("comSearch")?"right-border":""]),color:"#dcdfe6",plain:""},{default:S(()=>[k(v,{size:"14",name:"el-icon-Grid"})]),_:1},8,["class"])),[[F]])]),_:1})):$("",!0),o.buttons.includes("comSearch")?(m(),C(_,{key:1,disabled:h(t).table.showComSearch,content:h(e)("Expand generic search"),placement:"top"},{default:S(()=>[ne((m(),C(y,{class:"table-search-button-item",onClick:g[6]||(g[6]=V=>h(t).table.showComSearch=!h(t).table.showComSearch),color:"#dcdfe6",plain:""},{default:S(()=>[k(v,{size:"14",name:"el-icon-Search"})]),_:1})),[[F]])]),_:1},8,["disabled","content"])):$("",!0)])):$("",!0)])],16)],64)}}}),xl=ae(Fl,[["__scopeId","data-v-c9d99de7"]]);/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function oo(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),t.push.apply(t,o)}return t}function ke(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oo(Object(t),!0).forEach(function(o){Ul(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oo(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function gt(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gt=function(e){return typeof e}:gt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt(n)}function Ul(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ve(){return Ve=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Ve.apply(this,arguments)}function Ll(n,e){if(n==null)return{};var t={},o=Object.keys(n),l,r;for(r=0;r<o.length;r++)l=o[r],!(e.indexOf(l)>=0)&&(t[l]=n[l]);return t}function Yl(n,e){if(n==null)return{};var t=Ll(n,e),o,l;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(l=0;l<r.length;l++)o=r[l],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(n,o)&&(t[o]=n[o])}return t}var zl="1.15.6";function Ie(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Ce=Ie(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),rt=Ie(/Edge/i),no=Ie(/firefox/i),Ze=Ie(/safari/i)&&!Ie(/chrome/i)&&!Ie(/android/i),Gt=Ie(/iP(ad|od|hone)/i),_o=Ie(/chrome/i)&&Ie(/android/i),yo={capture:!1,passive:!1};function Y(n,e,t){n.addEventListener(e,t,!Ce&&yo)}function U(n,e,t){n.removeEventListener(e,t,!Ce&&yo)}function wt(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function wo(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function _e(n,e,t,o){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&wt(n,e):wt(n,e))||o&&n===t)return n;if(n===t)break}while(n=wo(n))}return null}var lo=/\s+/g;function ce(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var o=(" "+n.className+" ").replace(lo," ").replace(" "+e+" "," ");n.className=(o+(t?" "+e:"")).replace(lo," ")}}function O(n,e,t){var o=n&&n.style;if(o){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=t+(typeof t=="string"?"":"px")}}function He(n,e){var t="";if(typeof n=="string")t=n;else do{var o=O(n,"transform");o&&o!=="none"&&(t=o+" "+t)}while(!e&&(n=n.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function So(n,e,t){if(n){var o=n.getElementsByTagName(e),l=0,r=o.length;if(t)for(;l<r;l++)t(o[l],l);return o}return[]}function Ee(){var n=document.scrollingElement;return n||document.documentElement}function te(n,e,t,o,l){if(!(!n.getBoundingClientRect&&n!==window)){var r,a,i,u,d,g,v;if(n!==window&&n.parentNode&&n!==Ee()?(r=n.getBoundingClientRect(),a=r.top,i=r.left,u=r.bottom,d=r.right,g=r.height,v=r.width):(a=0,i=0,u=window.innerHeight,d=window.innerWidth,g=window.innerHeight,v=window.innerWidth),(e||t)&&n!==window&&(l=l||n.parentNode,!Ce))do if(l&&l.getBoundingClientRect&&(O(l,"transform")!=="none"||t&&O(l,"position")!=="static")){var y=l.getBoundingClientRect();a-=y.top+parseInt(O(l,"border-top-width")),i-=y.left+parseInt(O(l,"border-left-width")),u=a+r.height,d=i+r.width;break}while(l=l.parentNode);if(o&&n!==window){var _=He(l||n),c=_&&_.a,s=_&&_.d;_&&(a/=s,i/=c,v/=c,g/=s,u=a+g,d=i+v)}return{top:a,left:i,bottom:u,right:d,width:v,height:g}}}function ao(n,e,t){for(var o=Oe(n,!0),l=te(n)[e];o;){var r=te(o)[t],a=void 0;if(a=l>=r,!a)return o;if(o===Ee())break;o=Oe(o,!1)}return!1}function qe(n,e,t,o){for(var l=0,r=0,a=n.children;r<a.length;){if(a[r].style.display!=="none"&&a[r]!==R.ghost&&(o||a[r]!==R.dragged)&&_e(a[r],t.draggable,n,!1)){if(l===e)return a[r];l++}r++}return null}function qt(n,e){for(var t=n.lastElementChild;t&&(t===R.ghost||O(t,"display")==="none"||e&&!wt(t,e));)t=t.previousElementSibling;return t||null}function pe(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==R.clone&&(!e||wt(n,e))&&t++;return t}function ro(n){var e=0,t=0,o=Ee();if(n)do{var l=He(n),r=l.a,a=l.d;e+=n.scrollLeft*r,t+=n.scrollTop*a}while(n!==o&&(n=n.parentNode));return[e,t]}function Bl(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===n[t][o])return Number(t)}return-1}function Oe(n,e){if(!n||!n.getBoundingClientRect)return Ee();var t=n,o=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=O(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Ee();if(o||e)return t;o=!0}}while(t=t.parentNode);return Ee()}function jl(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Rt(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var Je;function To(n,e){return function(){if(!Je){var t=arguments,o=this;t.length===1?n.call(o,t[0]):n.apply(o,t),Je=setTimeout(function(){Je=void 0},e)}}}function Hl(){clearTimeout(Je),Je=void 0}function Eo(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function ko(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function Do(n,e,t){var o={};return Array.from(n.children).forEach(function(l){var r,a,i,u;if(!(!_e(l,e.draggable,n,!1)||l.animated||l===t)){var d=te(l);o.left=Math.min((r=o.left)!==null&&r!==void 0?r:1/0,d.left),o.top=Math.min((a=o.top)!==null&&a!==void 0?a:1/0,d.top),o.right=Math.max((i=o.right)!==null&&i!==void 0?i:-1/0,d.right),o.bottom=Math.max((u=o.bottom)!==null&&u!==void 0?u:-1/0,d.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var se="Sortable"+new Date().getTime();function Gl(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(l){if(!(O(l,"display")==="none"||l===R.ghost)){n.push({target:l,rect:te(l)});var r=ke({},n[n.length-1].rect);if(l.thisAnimationDuration){var a=He(l,!0);a&&(r.top-=a.f,r.left-=a.e)}l.fromRect=r}})}},addAnimationState:function(o){n.push(o)},removeAnimationState:function(o){n.splice(Bl(n,{target:o}),1)},animateAll:function(o){var l=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var r=!1,a=0;n.forEach(function(i){var u=0,d=i.target,g=d.fromRect,v=te(d),y=d.prevFromRect,_=d.prevToRect,c=i.rect,s=He(d,!0);s&&(v.top-=s.f,v.left-=s.e),d.toRect=v,d.thisAnimationDuration&&Rt(y,v)&&!Rt(g,v)&&(c.top-v.top)/(c.left-v.left)===(g.top-v.top)/(g.left-v.left)&&(u=Kl(c,y,_,l.options)),Rt(v,g)||(d.prevFromRect=g,d.prevToRect=v,u||(u=l.options.animation),l.animate(d,c,v,u)),u&&(r=!0,a=Math.max(a,u),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},u),d.thisAnimationDuration=u)}),clearTimeout(e),r?e=setTimeout(function(){typeof o=="function"&&o()},a):typeof o=="function"&&o(),n=[]},animate:function(o,l,r,a){if(a){O(o,"transition",""),O(o,"transform","");var i=He(this.el),u=i&&i.a,d=i&&i.d,g=(l.left-r.left)/(u||1),v=(l.top-r.top)/(d||1);o.animatingX=!!g,o.animatingY=!!v,O(o,"transform","translate3d("+g+"px,"+v+"px,0)"),this.forRepaintDummy=ql(o),O(o,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),O(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){O(o,"transition",""),O(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},a)}}}}function ql(n){return n.offsetWidth}function Kl(n,e,t,o){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*o.animation}var Ue=[],Ot={initializeByDefault:!0},it={mount:function(e){for(var t in Ot)Ot.hasOwnProperty(t)&&!(t in e)&&(e[t]=Ot[t]);Ue.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ue.push(e)},pluginEvent:function(e,t,o){var l=this;this.eventCanceled=!1,o.cancel=function(){l.eventCanceled=!0};var r=e+"Global";Ue.forEach(function(a){t[a.pluginName]&&(t[a.pluginName][r]&&t[a.pluginName][r](ke({sortable:t},o)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](ke({sortable:t},o)))})},initializePlugins:function(e,t,o,l){Ue.forEach(function(i){var u=i.pluginName;if(!(!e.options[u]&&!i.initializeByDefault)){var d=new i(e,t,e.options);d.sortable=e,d.options=e.options,e[u]=d,Ve(o,d.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var a=this.modifyOption(e,r,e.options[r]);typeof a<"u"&&(e.options[r]=a)}},getEventProperties:function(e,t){var o={};return Ue.forEach(function(l){typeof l.eventProperties=="function"&&Ve(o,l.eventProperties.call(t[l.pluginName],e))}),o},modifyOption:function(e,t,o){var l;return Ue.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[t]=="function"&&(l=r.optionListeners[t].call(e[r.pluginName],o))}),l}};function Xl(n){var e=n.sortable,t=n.rootEl,o=n.name,l=n.targetEl,r=n.cloneEl,a=n.toEl,i=n.fromEl,u=n.oldIndex,d=n.newIndex,g=n.oldDraggableIndex,v=n.newDraggableIndex,y=n.originalEvent,_=n.putSortable,c=n.extraEventProperties;if(e=e||t&&t[se],!!e){var s,T=e.options,M="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Ce&&!rt?s=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent(o,!0,!0)),s.to=a||t,s.from=i||t,s.item=l||t,s.clone=r,s.oldIndex=u,s.newIndex=d,s.oldDraggableIndex=g,s.newDraggableIndex=v,s.originalEvent=y,s.pullMode=_?_.lastPutMode:void 0;var A=ke(ke({},c),it.getEventProperties(o,e));for(var z in A)s[z]=A[z];t&&t.dispatchEvent(s),T[M]&&T[M].call(e,s)}}var Wl=["evt"],ie=function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=o.evt,r=Yl(o,Wl);it.pluginEvent.bind(R)(e,t,ke({dragEl:w,parentEl:Z,ghostEl:N,rootEl:G,nextEl:Me,lastDownEl:bt,cloneEl:W,cloneHidden:Re,dragStarted:Xe,putSortable:oe,activeSortable:R.active,originalEvent:l,oldIndex:ze,oldDraggableIndex:et,newIndex:de,newDraggableIndex:Ae,hideGhostForTarget:Ao,unhideGhostForTarget:Ro,cloneNowHidden:function(){Re=!0},cloneNowShown:function(){Re=!1},dispatchSortableEvent:function(i){re({sortable:t,name:i,originalEvent:l})}},r))};function re(n){Xl(ke({putSortable:oe,cloneEl:W,targetEl:w,rootEl:G,oldIndex:ze,oldDraggableIndex:et,newIndex:de,newDraggableIndex:Ae},n))}var w,Z,N,G,Me,bt,W,Re,ze,de,et,Ae,ut,oe,Ye=!1,St=!1,Tt=[],Ne,ve,Pt,Nt,io,so,Xe,Le,tt,ot=!1,ct=!1,vt,le,$t=[],Yt=!1,Et=[],Ct=typeof document<"u",dt=Gt,uo=rt||Ce?"cssFloat":"float",Ql=Ct&&!_o&&!Gt&&"draggable"in document.createElement("div"),Io=function(){if(Ct){if(Ce)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Vo=function(e,t){var o=O(e),l=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),r=qe(e,0,t),a=qe(e,1,t),i=r&&O(r),u=a&&O(a),d=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+te(r).width,g=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+te(a).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&i.float&&i.float!=="none"){var v=i.float==="left"?"left":"right";return a&&(u.clear==="both"||u.clear===v)?"vertical":"horizontal"}return r&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||d>=l&&o[uo]==="none"||a&&o[uo]==="none"&&d+g>l)?"vertical":"horizontal"},Zl=function(e,t,o){var l=o?e.left:e.top,r=o?e.right:e.bottom,a=o?e.width:e.height,i=o?t.left:t.top,u=o?t.right:t.bottom,d=o?t.width:t.height;return l===i||r===u||l+a/2===i+d/2},Jl=function(e,t){var o;return Tt.some(function(l){var r=l[se].options.emptyInsertThreshold;if(!(!r||qt(l))){var a=te(l),i=e>=a.left-r&&e<=a.right+r,u=t>=a.top-r&&t<=a.bottom+r;if(i&&u)return o=l}}),o},Co=function(e){function t(r,a){return function(i,u,d,g){var v=i.options.group.name&&u.options.group.name&&i.options.group.name===u.options.group.name;if(r==null&&(a||v))return!0;if(r==null||r===!1)return!1;if(a&&r==="clone")return r;if(typeof r=="function")return t(r(i,u,d,g),a)(i,u,d,g);var y=(a?i:u).options.group.name;return r===!0||typeof r=="string"&&r===y||r.join&&r.indexOf(y)>-1}}var o={},l=e.group;(!l||gt(l)!="object")&&(l={name:l}),o.name=l.name,o.checkPull=t(l.pull,!0),o.checkPut=t(l.put),o.revertClone=l.revertClone,e.group=o},Ao=function(){!Io&&N&&O(N,"display","none")},Ro=function(){!Io&&N&&O(N,"display","")};Ct&&!_o&&document.addEventListener("click",function(n){if(St)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),St=!1,!1},!0);var $e=function(e){if(w){e=e.touches?e.touches[0]:e;var t=Jl(e.clientX,e.clientY);if(t){var o={};for(var l in e)e.hasOwnProperty(l)&&(o[l]=e[l]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[se]._onDragOver(o)}}},ea=function(e){w&&w.parentNode[se]._isOutsideThisEl(e.target)};function R(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Ve({},e),n[se]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Vo(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,i){a.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:R.supportPointer!==!1&&"PointerEvent"in window&&(!Ze||Gt),emptyInsertThreshold:5};it.initializePlugins(this,n,t);for(var o in t)!(o in e)&&(e[o]=t[o]);Co(e);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=e.forceFallback?!1:Ql,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Y(n,"pointerdown",this._onTapStart):(Y(n,"mousedown",this._onTapStart),Y(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(Y(n,"dragover",this),Y(n,"dragenter",this)),Tt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ve(this,Gl())}R.prototype={constructor:R,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Le=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,w):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,o=this.el,l=this.options,r=l.preventOnFilter,a=e.type,i=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(i||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,g=l.filter;if(sa(o),!w&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||l.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Ze&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=_e(u,l.draggable,o,!1),!(u&&u.animated)&&bt!==u)){if(ze=pe(u),et=pe(u,l.draggable),typeof g=="function"){if(g.call(this,e,u,this)){re({sortable:t,rootEl:d,name:"filter",targetEl:u,toEl:o,fromEl:o}),ie("filter",t,{evt:e}),r&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(v){if(v=_e(d,v.trim(),o,!1),v)return re({sortable:t,rootEl:v,name:"filter",targetEl:u,fromEl:o,toEl:o}),ie("filter",t,{evt:e}),!0}),g)){r&&e.preventDefault();return}l.handle&&!_e(d,l.handle,o,!1)||this._prepareDragStart(e,i,u)}}},_prepareDragStart:function(e,t,o){var l=this,r=l.el,a=l.options,i=r.ownerDocument,u;if(o&&!w&&o.parentNode===r){var d=te(o);if(G=r,w=o,Z=w.parentNode,Me=w.nextSibling,bt=o,ut=a.group,R.dragged=w,Ne={target:w,clientX:(t||e).clientX,clientY:(t||e).clientY},io=Ne.clientX-d.left,so=Ne.clientY-d.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,w.style["will-change"]="all",u=function(){if(ie("delayEnded",l,{evt:e}),R.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!no&&l.nativeDraggable&&(w.draggable=!0),l._triggerDragStart(e,t),re({sortable:l,name:"choose",originalEvent:e}),ce(w,a.chosenClass,!0)},a.ignore.split(",").forEach(function(g){So(w,g.trim(),Mt)}),Y(i,"dragover",$e),Y(i,"mousemove",$e),Y(i,"touchmove",$e),a.supportPointer?(Y(i,"pointerup",l._onDrop),!this.nativeDraggable&&Y(i,"pointercancel",l._onDrop)):(Y(i,"mouseup",l._onDrop),Y(i,"touchend",l._onDrop),Y(i,"touchcancel",l._onDrop)),no&&this.nativeDraggable&&(this.options.touchStartThreshold=4,w.draggable=!0),ie("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(rt||Ce))){if(R.eventCanceled){this._onDrop();return}a.supportPointer?(Y(i,"pointerup",l._disableDelayedDrag),Y(i,"pointercancel",l._disableDelayedDrag)):(Y(i,"mouseup",l._disableDelayedDrag),Y(i,"touchend",l._disableDelayedDrag),Y(i,"touchcancel",l._disableDelayedDrag)),Y(i,"mousemove",l._delayedDragTouchMoveHandler),Y(i,"touchmove",l._delayedDragTouchMoveHandler),a.supportPointer&&Y(i,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(u,a.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){w&&Mt(w),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;U(e,"mouseup",this._disableDelayedDrag),U(e,"touchend",this._disableDelayedDrag),U(e,"touchcancel",this._disableDelayedDrag),U(e,"pointerup",this._disableDelayedDrag),U(e,"pointercancel",this._disableDelayedDrag),U(e,"mousemove",this._delayedDragTouchMoveHandler),U(e,"touchmove",this._delayedDragTouchMoveHandler),U(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Y(document,"pointermove",this._onTouchMove):t?Y(document,"touchmove",this._onTouchMove):Y(document,"mousemove",this._onTouchMove):(Y(w,"dragend",this),Y(G,"dragstart",this._onDragStart));try{document.selection?_t(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ye=!1,G&&w){ie("dragStarted",this,{evt:t}),this.nativeDraggable&&Y(document,"dragover",ea);var o=this.options;!e&&ce(w,o.dragClass,!1),ce(w,o.ghostClass,!0),R.active=this,e&&this._appendGhost(),re({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ve){this._lastX=ve.clientX,this._lastY=ve.clientY,Ao();for(var e=document.elementFromPoint(ve.clientX,ve.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ve.clientX,ve.clientY),e!==t);)t=e;if(w.parentNode[se]._isOutsideThisEl(e),t)do{if(t[se]){var o=void 0;if(o=t[se]._onDragOver({clientX:ve.clientX,clientY:ve.clientY,target:e,rootEl:t}),o&&!this.options.dragoverBubble)break}e=t}while(t=wo(t));Ro()}},_onTouchMove:function(e){if(Ne){var t=this.options,o=t.fallbackTolerance,l=t.fallbackOffset,r=e.touches?e.touches[0]:e,a=N&&He(N,!0),i=N&&a&&a.a,u=N&&a&&a.d,d=dt&&le&&ro(le),g=(r.clientX-Ne.clientX+l.x)/(i||1)+(d?d[0]-$t[0]:0)/(i||1),v=(r.clientY-Ne.clientY+l.y)/(u||1)+(d?d[1]-$t[1]:0)/(u||1);if(!R.active&&!Ye){if(o&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(N){a?(a.e+=g-(Pt||0),a.f+=v-(Nt||0)):a={a:1,b:0,c:0,d:1,e:g,f:v};var y="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");O(N,"webkitTransform",y),O(N,"mozTransform",y),O(N,"msTransform",y),O(N,"transform",y),Pt=g,Nt=v,ve=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!N){var e=this.options.fallbackOnBody?document.body:G,t=te(w,!0,dt,!0,e),o=this.options;if(dt){for(le=e;O(le,"position")==="static"&&O(le,"transform")==="none"&&le!==document;)le=le.parentNode;le!==document.body&&le!==document.documentElement?(le===document&&(le=Ee()),t.top+=le.scrollTop,t.left+=le.scrollLeft):le=Ee(),$t=ro(le)}N=w.cloneNode(!0),ce(N,o.ghostClass,!1),ce(N,o.fallbackClass,!0),ce(N,o.dragClass,!0),O(N,"transition",""),O(N,"transform",""),O(N,"box-sizing","border-box"),O(N,"margin",0),O(N,"top",t.top),O(N,"left",t.left),O(N,"width",t.width),O(N,"height",t.height),O(N,"opacity","0.8"),O(N,"position",dt?"absolute":"fixed"),O(N,"zIndex","100000"),O(N,"pointerEvents","none"),R.ghost=N,e.appendChild(N),O(N,"transform-origin",io/parseInt(N.style.width)*100+"% "+so/parseInt(N.style.height)*100+"%")}},_onDragStart:function(e,t){var o=this,l=e.dataTransfer,r=o.options;if(ie("dragStart",this,{evt:e}),R.eventCanceled){this._onDrop();return}ie("setupClone",this),R.eventCanceled||(W=ko(w),W.removeAttribute("id"),W.draggable=!1,W.style["will-change"]="",this._hideClone(),ce(W,this.options.chosenClass,!1),R.clone=W),o.cloneId=_t(function(){ie("clone",o),!R.eventCanceled&&(o.options.removeCloneOnHide||G.insertBefore(W,w),o._hideClone(),re({sortable:o,name:"clone"}))}),!t&&ce(w,r.dragClass,!0),t?(St=!0,o._loopId=setInterval(o._emulateDragOver,50)):(U(document,"mouseup",o._onDrop),U(document,"touchend",o._onDrop),U(document,"touchcancel",o._onDrop),l&&(l.effectAllowed="move",r.setData&&r.setData.call(o,l,w)),Y(document,"drop",o),O(w,"transform","translateZ(0)")),Ye=!0,o._dragStartId=_t(o._dragStarted.bind(o,t,e)),Y(document,"selectstart",o),Xe=!0,window.getSelection().removeAllRanges(),Ze&&O(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,o=e.target,l,r,a,i=this.options,u=i.group,d=R.active,g=ut===u,v=i.sort,y=oe||d,_,c=this,s=!1;if(Yt)return;function T(Ke,Po){ie(Ke,c,ke({evt:e,isOwner:g,axis:_?"vertical":"horizontal",revert:a,dragRect:l,targetRect:r,canSort:v,fromSortable:y,target:o,completed:A,onMove:function(Wt,No){return ft(G,t,w,l,Wt,te(Wt),e,No)},changed:z},Po))}function M(){T("dragOverAnimationCapture"),c.captureAnimationState(),c!==y&&y.captureAnimationState()}function A(Ke){return T("dragOverCompleted",{insertion:Ke}),Ke&&(g?d._hideClone():d._showClone(c),c!==y&&(ce(w,oe?oe.options.ghostClass:d.options.ghostClass,!1),ce(w,i.ghostClass,!0)),oe!==c&&c!==R.active?oe=c:c===R.active&&oe&&(oe=null),y===c&&(c._ignoreWhileAnimating=o),c.animateAll(function(){T("dragOverAnimationComplete"),c._ignoreWhileAnimating=null}),c!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(o===w&&!w.animated||o===t&&!o.animated)&&(Le=null),!i.dragoverBubble&&!e.rootEl&&o!==document&&(w.parentNode[se]._isOutsideThisEl(e.target),!Ke&&$e(e)),!i.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),s=!0}function z(){de=pe(w),Ae=pe(w,i.draggable),re({sortable:c,name:"change",toEl:t,newIndex:de,newDraggableIndex:Ae,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=_e(o,i.draggable,t,!0),T("dragOver"),R.eventCanceled)return s;if(w.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||c._ignoreWhileAnimating===o)return A(!1);if(St=!1,d&&!i.disabled&&(g?v||(a=Z!==G):oe===this||(this.lastPutMode=ut.checkPull(this,d,w,e))&&u.checkPut(this,d,w,e))){if(_=this._getDirection(e,o)==="vertical",l=te(w),T("dragOverValid"),R.eventCanceled)return s;if(a)return Z=G,M(),this._hideClone(),T("revert"),R.eventCanceled||(Me?G.insertBefore(w,Me):G.appendChild(w)),A(!0);var F=qt(t,i.draggable);if(!F||la(e,_,this)&&!F.animated){if(F===w)return A(!1);if(F&&t===e.target&&(o=F),o&&(r=te(o)),ft(G,t,w,l,o,r,e,!!o)!==!1)return M(),F&&F.nextSibling?t.insertBefore(w,F.nextSibling):t.appendChild(w),Z=t,z(),A(!0)}else if(F&&na(e,_,this)){var V=qe(t,0,i,!0);if(V===w)return A(!1);if(o=V,r=te(o),ft(G,t,w,l,o,r,e,!1)!==!1)return M(),t.insertBefore(w,V),Z=t,z(),A(!0)}else if(o.parentNode===t){r=te(o);var p=0,f,b=w.parentNode!==t,E=!Zl(w.animated&&w.toRect||l,o.animated&&o.toRect||r,_),P=_?"top":"left",x=ao(o,"top","top")||ao(w,"top","top"),j=x?x.scrollTop:void 0;Le!==o&&(f=r[P],ot=!1,ct=!E&&i.invertSwap||b),p=aa(e,o,r,_,E?1:i.swapThreshold,i.invertedSwapThreshold==null?i.swapThreshold:i.invertedSwapThreshold,ct,Le===o);var K;if(p!==0){var X=pe(w);do X-=p,K=Z.children[X];while(K&&(O(K,"display")==="none"||K===N))}if(p===0||K===o)return A(!1);Le=o,tt=p;var be=o.nextElementSibling,Te=!1;Te=p===1;var st=ft(G,t,w,l,o,r,e,Te);if(st!==!1)return(st===1||st===-1)&&(Te=st===1),Yt=!0,setTimeout(oa,30),M(),Te&&!be?t.appendChild(w):o.parentNode.insertBefore(w,Te?be:o),x&&Eo(x,0,j-x.scrollTop),Z=w.parentNode,f!==void 0&&!ct&&(vt=Math.abs(f-te(o)[P])),z(),A(!0)}if(t.contains(w))return A(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){U(document,"mousemove",this._onTouchMove),U(document,"touchmove",this._onTouchMove),U(document,"pointermove",this._onTouchMove),U(document,"dragover",$e),U(document,"mousemove",$e),U(document,"touchmove",$e)},_offUpEvents:function(){var e=this.el.ownerDocument;U(e,"mouseup",this._onDrop),U(e,"touchend",this._onDrop),U(e,"pointerup",this._onDrop),U(e,"pointercancel",this._onDrop),U(e,"touchcancel",this._onDrop),U(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;if(de=pe(w),Ae=pe(w,o.draggable),ie("drop",this,{evt:e}),Z=w&&w.parentNode,de=pe(w),Ae=pe(w,o.draggable),R.eventCanceled){this._nulling();return}Ye=!1,ct=!1,ot=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),zt(this.cloneId),zt(this._dragStartId),this.nativeDraggable&&(U(document,"drop",this),U(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ze&&O(document.body,"user-select",""),O(w,"transform",""),e&&(Xe&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),N&&N.parentNode&&N.parentNode.removeChild(N),(G===Z||oe&&oe.lastPutMode!=="clone")&&W&&W.parentNode&&W.parentNode.removeChild(W),w&&(this.nativeDraggable&&U(w,"dragend",this),Mt(w),w.style["will-change"]="",Xe&&!Ye&&ce(w,oe?oe.options.ghostClass:this.options.ghostClass,!1),ce(w,this.options.chosenClass,!1),re({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:e}),G!==Z?(de>=0&&(re({rootEl:Z,name:"add",toEl:Z,fromEl:G,originalEvent:e}),re({sortable:this,name:"remove",toEl:Z,originalEvent:e}),re({rootEl:Z,name:"sort",toEl:Z,fromEl:G,originalEvent:e}),re({sortable:this,name:"sort",toEl:Z,originalEvent:e})),oe&&oe.save()):de!==ze&&de>=0&&(re({sortable:this,name:"update",toEl:Z,originalEvent:e}),re({sortable:this,name:"sort",toEl:Z,originalEvent:e})),R.active&&((de==null||de===-1)&&(de=ze,Ae=et),re({sortable:this,name:"end",toEl:Z,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ie("nulling",this),G=w=Z=N=Me=W=bt=Re=Ne=ve=Xe=de=Ae=ze=et=Le=tt=oe=ut=R.dragged=R.ghost=R.clone=R.active=null,Et.forEach(function(e){e.checked=!0}),Et.length=Pt=Nt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":w&&(this._onDragOver(e),ta(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,o=this.el.children,l=0,r=o.length,a=this.options;l<r;l++)t=o[l],_e(t,a.draggable,this.el,!1)&&e.push(t.getAttribute(a.dataIdAttr)||ia(t));return e},sort:function(e,t){var o={},l=this.el;this.toArray().forEach(function(r,a){var i=l.children[a];_e(i,this.options.draggable,l,!1)&&(o[r]=i)},this),t&&this.captureAnimationState(),e.forEach(function(r){o[r]&&(l.removeChild(o[r]),l.appendChild(o[r]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return _e(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(t===void 0)return o[e];var l=it.modifyOption(this,e,t);typeof l<"u"?o[e]=l:o[e]=t,e==="group"&&Co(o)},destroy:function(){ie("destroy",this);var e=this.el;e[se]=null,U(e,"mousedown",this._onTapStart),U(e,"touchstart",this._onTapStart),U(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(U(e,"dragover",this),U(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Tt.splice(Tt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Re){if(ie("hideClone",this),R.eventCanceled)return;O(W,"display","none"),this.options.removeCloneOnHide&&W.parentNode&&W.parentNode.removeChild(W),Re=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Re){if(ie("showClone",this),R.eventCanceled)return;w.parentNode==G&&!this.options.group.revertClone?G.insertBefore(W,w):Me?G.insertBefore(W,Me):G.appendChild(W),this.options.group.revertClone&&this.animate(w,W),O(W,"display",""),Re=!1}}};function ta(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function ft(n,e,t,o,l,r,a,i){var u,d=n[se],g=d.options.onMove,v;return window.CustomEvent&&!Ce&&!rt?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=n,u.dragged=t,u.draggedRect=o,u.related=l||e,u.relatedRect=r||te(e),u.willInsertAfter=i,u.originalEvent=a,n.dispatchEvent(u),g&&(v=g.call(d,u,a)),v}function Mt(n){n.draggable=!1}function oa(){Yt=!1}function na(n,e,t){var o=te(qe(t.el,0,t.options,!0)),l=Do(t.el,t.options,N),r=10;return e?n.clientX<l.left-r||n.clientY<o.top&&n.clientX<o.right:n.clientY<l.top-r||n.clientY<o.bottom&&n.clientX<o.left}function la(n,e,t){var o=te(qt(t.el,t.options.draggable)),l=Do(t.el,t.options,N),r=10;return e?n.clientX>l.right+r||n.clientY>o.bottom&&n.clientX>o.left:n.clientY>l.bottom+r||n.clientX>o.right&&n.clientY>o.top}function aa(n,e,t,o,l,r,a,i){var u=o?n.clientY:n.clientX,d=o?t.height:t.width,g=o?t.top:t.left,v=o?t.bottom:t.right,y=!1;if(!a){if(i&&vt<d*l){if(!ot&&(tt===1?u>g+d*r/2:u<v-d*r/2)&&(ot=!0),ot)y=!0;else if(tt===1?u<g+vt:u>v-vt)return-tt}else if(u>g+d*(1-l)/2&&u<v-d*(1-l)/2)return ra(e)}return y=y||a,y&&(u<g+d*r/2||u>v-d*r/2)?u>g+d/2?1:-1:0}function ra(n){return pe(w)<pe(n)?1:-1}function ia(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,o=0;t--;)o+=e.charCodeAt(t);return o.toString(36)}function sa(n){Et.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var o=e[t];o.checked&&Et.push(o)}}function _t(n){return setTimeout(n,0)}function zt(n){return clearTimeout(n)}Ct&&Y(document,"touchmove",function(n){(R.active||Ye)&&n.cancelable&&n.preventDefault()});R.utils={on:Y,off:U,css:O,find:So,is:function(e,t){return!!_e(e,t,e,!1)},extend:jl,throttle:To,closest:_e,toggleClass:ce,clone:ko,index:pe,nextTick:_t,cancelNextTick:zt,detectDirection:Vo,getChild:qe,expando:se};R.get=function(n){return n[se]};R.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(R.utils=ke(ke({},R.utils),o.utils)),it.mount(o)})};R.create=function(n,e){return new R(n,e)};R.version=zl;var ee=[],We,Bt,jt=!1,Ft,xt,kt,Qe;function ua(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var o=t.originalEvent;this.sortable.nativeDraggable?Y(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Y(document,"pointermove",this._handleFallbackAutoScroll):o.touches?Y(document,"touchmove",this._handleFallbackAutoScroll):Y(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var o=t.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?U(document,"dragover",this._handleAutoScroll):(U(document,"pointermove",this._handleFallbackAutoScroll),U(document,"touchmove",this._handleFallbackAutoScroll),U(document,"mousemove",this._handleFallbackAutoScroll)),co(),yt(),Hl()},nulling:function(){kt=Bt=We=jt=Qe=Ft=xt=null,ee.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,o){var l=this,r=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,i=document.elementFromPoint(r,a);if(kt=t,o||this.options.forceAutoScrollFallback||rt||Ce||Ze){Ut(t,this.options,i,o);var u=Oe(i,!0);jt&&(!Qe||r!==Ft||a!==xt)&&(Qe&&co(),Qe=setInterval(function(){var d=Oe(document.elementFromPoint(r,a),!0);d!==u&&(u=d,yt()),Ut(t,l.options,d,o)},10),Ft=r,xt=a)}else{if(!this.options.bubbleScroll||Oe(i,!0)===Ee()){yt();return}Ut(t,this.options,Oe(i,!1),!1)}}},Ve(n,{pluginName:"scroll",initializeByDefault:!0})}function yt(){ee.forEach(function(n){clearInterval(n.pid)}),ee=[]}function co(){clearInterval(Qe)}var Ut=To(function(n,e,t,o){if(e.scroll){var l=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,a=e.scrollSensitivity,i=e.scrollSpeed,u=Ee(),d=!1,g;Bt!==t&&(Bt=t,yt(),We=e.scroll,g=e.scrollFn,We===!0&&(We=Oe(t,!0)));var v=0,y=We;do{var _=y,c=te(_),s=c.top,T=c.bottom,M=c.left,A=c.right,z=c.width,F=c.height,V=void 0,p=void 0,f=_.scrollWidth,b=_.scrollHeight,E=O(_),P=_.scrollLeft,x=_.scrollTop;_===u?(V=z<f&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),p=F<b&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(V=z<f&&(E.overflowX==="auto"||E.overflowX==="scroll"),p=F<b&&(E.overflowY==="auto"||E.overflowY==="scroll"));var j=V&&(Math.abs(A-l)<=a&&P+z<f)-(Math.abs(M-l)<=a&&!!P),K=p&&(Math.abs(T-r)<=a&&x+F<b)-(Math.abs(s-r)<=a&&!!x);if(!ee[v])for(var X=0;X<=v;X++)ee[X]||(ee[X]={});(ee[v].vx!=j||ee[v].vy!=K||ee[v].el!==_)&&(ee[v].el=_,ee[v].vx=j,ee[v].vy=K,clearInterval(ee[v].pid),(j!=0||K!=0)&&(d=!0,ee[v].pid=setInterval((function(){o&&this.layer===0&&R.active._onTouchMove(kt);var be=ee[this.layer].vy?ee[this.layer].vy*i:0,Te=ee[this.layer].vx?ee[this.layer].vx*i:0;typeof g=="function"&&g.call(R.dragged.parentNode[se],Te,be,n,kt,ee[this.layer].el)!=="continue"||Eo(ee[this.layer].el,Te,be)}).bind({layer:v}),24))),v++}while(e.bubbleScroll&&y!==u&&(y=Oe(y,!1)));jt=d}},30),Oo=function(e){var t=e.originalEvent,o=e.putSortable,l=e.dragEl,r=e.activeSortable,a=e.dispatchSortableEvent,i=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(t){var d=o||r;i();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,v=document.elementFromPoint(g.clientX,g.clientY);u(),d&&!d.el.contains(v)&&(a("spill"),this.onSpill({dragEl:l,putSortable:o}))}};function Kt(){}Kt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var l=qe(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(t,l):this.sortable.el.appendChild(t),this.sortable.animateAll(),o&&o.animateAll()},drop:Oo};Ve(Kt,{pluginName:"revertOnSpill"});function Xt(){}Xt.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable,l=o||this.sortable;l.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),l.animateAll()},drop:Oo};Ve(Xt,{pluginName:"removeOnSpill"});R.mount(new ua);R.mount(Xt,Kt);class ca{constructor(e,t,o={},l={},r={}){J(this,"api");J(this,"table",ye({ref:void 0,pk:"id",data:[],remark:null,loading:!1,selection:[],column:[],total:0,filter:{},dragSortLimitField:"pid",acceptQuery:!0,showComSearch:!1,dblClickNotEditColumn:[void 0],expandAll:!1,extend:{}}));J(this,"form",ye({ref:void 0,labelWidth:160,operate:"",operateIds:[],items:{},submitLoading:!1,defaultItems:{},loading:!1,extend:{}}));J(this,"before");J(this,"after");J(this,"comSearch",ye({form:{},fieldData:new Map}));J(this,"getIndex",()=>{if(this.runBefore("getIndex")!==!1)return this.table.loading=!0,this.api.index(this.table.filter).then(e=>{this.table.data=e.data.list,this.table.total=e.data.total,this.table.remark=e.data.remark,this.runAfter("getIndex",{res:e})}).finally(()=>{this.table.loading=!1})});J(this,"postDel",e=>{this.runBefore("postDel",{ids:e})!==!1&&this.api.del(e).then(t=>{this.onTableHeaderAction("refresh",{}),this.runAfter("postDel",{res:t})})});J(this,"requestEdit",e=>{if(this.runBefore("requestEdit",{id:e})!==!1)return this.form.loading=!0,this.form.items={},this.api.edit({[this.table.pk]:e}).then(t=>{console.info(t.data.row),this.form.items=t.data.row,this.runAfter("requestEdit",{res:t})}).catch(t=>{this.toggleForm(),this.runAfter("requestEdit",{err:t})}).finally(()=>{this.form.loading=!1})});J(this,"onTableDblclick",(e,t)=>{if(!this.table.dblClickNotEditColumn.includes("all")&&!this.table.dblClickNotEditColumn.includes(t.property)){if(this.runBefore("onTableDblclick",{row:e,column:t})===!1)return;this.toggleForm("Edit",[e[this.table.pk]]),this.runAfter("onTableDblclick",{row:e,column:t})}});J(this,"toggleForm",(e="",t=[])=>{if(this.runBefore("toggleForm",{operate:e,operateIds:t})!==!1){if(e=="Edit"){if(!t.length)return!1;this.requestEdit(t[0])}else e=="Add"&&(this.form.items=go(this.form.defaultItems));this.form.operate=e,this.form.operateIds=t,this.runAfter("toggleForm",{operate:e,operateIds:t})}});J(this,"onSubmit",(e=void 0)=>{const t=this.form.operate.replace(this.form.operate[0],this.form.operate[0].toLowerCase());if(this.runBefore("onSubmit",{formEl:e,operate:t,items:this.form.items})===!1)return;Object.keys(this.form.items).forEach(l=>{this.form.items[l]===null&&delete this.form.items[l]});const o=()=>{this.form.submitLoading=!0,this.api.postData(t,this.form.items).then(l=>{var r;this.onTableHeaderAction("refresh",{}),(r=this.form.operateIds)==null||r.shift(),this.form.operateIds.length>0?this.toggleForm("Edit",this.form.operateIds):this.toggleForm(),this.runAfter("onSubmit",{res:l})}).finally(()=>{this.form.submitLoading=!1})};e?(this.form.ref=e,e.validate(l=>{l&&o()})):o()});J(this,"onTableAction",(e,t)=>{if(this.runBefore("onTableAction",{event:e,data:t})===!1)return;const o=new Map([["selection-change",()=>{this.table.selection=t}],["page-size-change",()=>{this.table.filter.limit=t.size,this.onTableHeaderAction("refresh",{event:"page-size-change",...t})}],["current-page-change",()=>{this.table.filter.page=t.page,this.onTableHeaderAction("refresh",{event:"current-page-change",...t})}],["sort-change",()=>{let r;t.prop&&t.order&&(r=t.prop+","+t.order),r!=this.table.filter.order&&(this.table.filter.order=r,this.onTableHeaderAction("refresh",{event:"sort-change",...t}))}],["edit",()=>{this.toggleForm("Edit",[t.row[this.table.pk]])}],["delete",()=>{this.postDel([t.row[this.table.pk]])}],["field-change",()=>{}],["com-search",()=>{this.table.filter.search=this.getComSearchData(),this.onTableHeaderAction("refresh",{event:"com-search",data:this.table.filter.search})}],["default",()=>{console.warn("No action defined")}]]);return(o.get(e)||o.get("default")).call(this),this.runAfter("onTableAction",{event:e,data:t})});J(this,"onTableHeaderAction",(e,t)=>{if(this.runBefore("onTableHeaderAction",{event:e,data:t})===!1)return;const o=new Map([["refresh",()=>{this.table.data=[],this.getIndex()}],["add",()=>{this.toggleForm("Add")}],["edit",()=>{this.toggleForm("Edit",this.getSelectionIds())}],["delete",()=>{this.postDel(this.getSelectionIds())}],["unfold",()=>{if(!this.table.ref){console.warn("Collapse/expand failed because table ref is not defined. Please assign table ref when onMounted");return}this.table.expandAll=t.unfold,this.table.ref.unFoldAll(t.unfold)}],["quick-search",()=>{this.onTableHeaderAction("refresh",{event:"quick-search",...t})}],["change-show-column",()=>{const r=je(this.table.column,"prop",t.field);this.table.column[r].show=t.value}],["default",()=>{console.warn("No action defined")}]]);return(o.get(e)||o.get("default")).call(this),this.runAfter("onTableHeaderAction",{event:e,data:t})});J(this,"initSort",()=>{var e;if(this.table.defaultOrder&&this.table.defaultOrder.prop){if(!this.table.ref){console.warn("Failed to initialize default sorting because table ref is not defined. Please assign table ref when onMounted");return}const t=this.table.defaultOrder.prop+","+this.table.defaultOrder.order;this.table.filter&&this.table.filter.order!=t&&(this.table.filter.order=t,(e=this.table.ref.getRef())==null||e.sort(this.table.defaultOrder.prop,this.table.defaultOrder.order=="desc"?"descending":"ascending"))}});J(this,"dragSort",()=>{var r;const e=je(this.table.column,"render","buttons");if(e===!1)return;const t=je((r=this.table.column[e])==null?void 0:r.buttons,"render","moveButton");if(t===!1)return;if(!this.table.ref){console.warn("Failed to initialize drag sort because table ref is not defined. Please assign table ref when onMounted");return}const o=this.table.ref.getRef().$el.querySelector(".el-table__body-wrapper .el-table__body tbody"),l=this.table.column[e].buttons[t].disabledTip;R.create(o,{animation:200,handle:".table-row-weigh-sort",ghostClass:"ba-table-row",onStart:()=>{this.table.column[e].buttons[t].disabledTip=!0},onEnd:a=>{var d;if(this.table.column[e].buttons[t].disabledTip=l,a.oldIndex==a.newIndex||typeof a.newIndex>"u"||typeof a.oldIndex>"u")return;const i=Lt(this.table.data,a.oldIndex),u=Lt(this.table.data,a.newIndex);if(this.table.dragSortLimitField&&i[this.table.dragSortLimitField]!=u[this.table.dragSortLimitField]){this.onTableHeaderAction("refresh",{}),tn({type:"error",message:pt.global.t("utils.The moving position is beyond the movable range!")});return}this.api.sortable({move:i[this.table.pk],target:u[this.table.pk],order:(d=this.table.filter)==null?void 0:d.order,direction:a.newIndex>a.oldIndex?"down":"up"}).finally(()=>{this.onTableHeaderAction("refresh",{})})}})});J(this,"mount",()=>{var t;if(this.runBefore("mount")===!1)return;const e=on();this.table.routePath=e.fullPath,this.initComSearch(),this.table.acceptQuery&&!we(e.query)&&(this.setComSearchData(e.query),this.table.filter.search=this.getComSearchData().concat(((t=this.table.filter)==null?void 0:t.search)??[]))});J(this,"initComSearch",()=>{const e={},t=this.table.column;if(!(t.length<=0)){for(const o in t){if(t[o].operator===!1)continue;typeof t[o].operator>"u"&&(t[o].operator="eq");const l=t[o].prop;l&&(t[o].operator=="RANGE"||t[o].operator=="NOT RANGE"?(e[l]="",e[l+"-start"]="",e[l+"-end"]=""):t[o].operator=="NULL"||t[o].operator=="NOT NULL"?e[l]=!1:e[l]="",this.comSearch.fieldData.set(l,{operator:t[o].operator,render:t[o].render,comSearchRender:t[o].comSearchRender}))}this.comSearch.form=Object.assign(this.comSearch.form,e)}});J(this,"setComSearchData",e=>{for(const t in this.table.column){const o=this.table.column[t].prop;if(o&&typeof e[o]<"u"){const l=e[o]??"";if(this.table.column[t].operator=="RANGE"||this.table.column[t].operator=="NOT RANGE"){const r=l.split(",");if(this.table.column[t].render=="datetime"||this.table.column[t].comSearchRender=="date"){if(r&&r.length>=2){const a=[At(r[0]),At(r[1])];a[0].isValid()&&a[1].isValid()&&(this.table.column[t].comSearchRender=="date"?this.comSearch.form[o]=[a[0].format("YYYY-MM-DD"),a[1].format("YYYY-MM-DD")]:this.comSearch.form[o]=[a[0].format("YYYY-MM-DD HH:mm:ss"),a[1].format("YYYY-MM-DD HH:mm:ss")])}}else this.comSearch.form[o+"-start"]=r[0]??"",this.comSearch.form[o+"-end"]=r[1]??""}else if(this.table.column[t].operator=="NULL"||this.table.column[t].operator=="NOT NULL")this.comSearch.form[o]=!!l;else if(this.table.column[t].render=="datetime"||this.table.column[t].comSearchRender=="date"){const r=At(l);r.isValid()&&(this.comSearch.form[o]=r.format(this.table.column[t].comSearchRender=="date"?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss"))}else this.comSearch.form[o]=l}}});J(this,"getComSearchData",()=>{const e=[];for(const t in this.comSearch.form){if(!this.comSearch.fieldData.has(t))continue;let o=null;const l=this.comSearch.fieldData.get(t);if(l.render=="datetime"&&(l.operator=="RANGE"||l.operator=="NOT RANGE"))this.comSearch.form[t]&&this.comSearch.form[t].length>=2&&(l.comSearchRender=="date"?o=this.comSearch.form[t][0]+" 00:00:00,"+this.comSearch.form[t][1]+" 23:59:59":o=this.comSearch.form[t][0]+","+this.comSearch.form[t][1]);else if(l.operator=="RANGE"||l.operator=="NOT RANGE"){if(!this.comSearch.form[t+"-start"]&&!this.comSearch.form[t+"-end"])continue;o=this.comSearch.form[t+"-start"]+","+this.comSearch.form[t+"-end"]}else this.comSearch.form[t]&&(o=this.comSearch.form[t]);o!==null&&e.push({field:t,val:o,operator:l.operator,render:l.render})}return e});this.api=e,this.form=Object.assign(this.form,o),this.table=Object.assign(this.table,t),this.before=l,this.after=r}auth(e){return zo(e)}runBefore(e,t={}){return this.before&&this.before[e]&&typeof this.before[e]=="function"?this.before[e]({...t})!==!1:!0}runAfter(e,t={}){return this.after&&this.after[e]&&typeof this.after[e]=="function"?this.after[e]({...t})!==!1:!0}getSelectionIds(){var t;const e=[];return(t=this.table.selection)==null||t.forEach(o=>{e.push(o[this.table.pk])}),e}}const da={class:"table-header-operate-text"},fa={key:0,class:"ml-10"},pa={class:"selection-count"},ma=Q({__name:"selectFile",props:{type:{default:"file"},limit:{default:0},modelValue:{type:Boolean,default:!1},returnFullUrl:{type:Boolean,default:!1}},emits:["update:modelValue","choice"],setup(n,{emit:e}){const t=n,o=e,l=Pe(),{t:r}=Dt.useI18n(),a=ye({ready:!1,tableSelectable:!0}),i=[{render:"tipButton",name:"choice",text:r("utils.choice"),type:"primary",icon:"fa fa-check",class:"table-row-choice",disabledTip:!1,click:y=>{l.value.getRef().clearSelection(),o("choice",t.returnFullUrl?[y.full_url]:[y.url])}}],u=new ca(new Bo("/admin/routine.Attachment/"),{acceptQuery:!1,column:[{type:"selection",selectable:y=>{if(t.limit==0)return!0;if(u.table.selection){for(const _ in u.table.selection)if(y.id==u.table.selection[_].id)return!0}return a.tableSelectable},align:"center",operator:!1},{label:r("Id"),prop:"id",align:"center",operator:"LIKE",operatorPlaceholder:r("Fuzzy query"),width:70},{label:r("utils.Breakdown"),prop:"topic",align:"center",operator:"LIKE",operatorPlaceholder:r("Fuzzy query")},{label:r("utils.preview"),prop:"suffix",align:"center",formatter:cn,render:"image",operator:!1},{label:r("utils.type"),prop:"mimetype",align:"center",operator:"LIKE",showOverflowTooltip:!0,operatorPlaceholder:r("Fuzzy query")},{label:r("utils.size"),prop:"size",align:"center",formatter:(y,_,c)=>{var s=parseFloat(c),T=Math.floor(Math.log(s)/Math.log(1024));return parseInt((s/Math.pow(1024,T)).toFixed(T<2?0:2))*1+" "+["B","KB","MB","GB","TB"][T]},operator:"RANGE",sortable:"custom",operatorPlaceholder:"bytes"},{label:r("utils.Last upload time"),prop:"last_upload_time",align:"center",render:"datetime",operator:"RANGE",width:160,sortable:"custom"},{show:!1,label:r("utils.Upload (Reference) times"),prop:"quote",align:"center",width:150,operator:"RANGE",sortable:"custom"},{label:r("utils.Original name"),prop:"name",align:"center",showOverflowTooltip:!0,operator:"LIKE",operatorPlaceholder:r("Fuzzy query")},{label:r("Operate"),align:"center",width:"100",render:"buttons",buttons:i,operator:!1}],defaultOrder:{prop:"last_upload_time",order:"desc"}});nn("baTable",u);const d=()=>{var y;t.type=="image"&&(u.table.filter.search=[{field:"mimetype",val:"image",operator:"LIKE"}]),u.table.ref=l.value,u.table.filter.limit=8,(y=u.getIndex())==null||y.then(()=>{u.initSort()}),a.ready=!0},g=()=>{var y;if((y=u.table.selection)!=null&&y.length){let _=[];for(const s in u.table.selection)_.push(t.returnFullUrl?u.table.selection[s].full_url:u.table.selection[s].url);o("choice",_),l.value.getRef().clearSelection()}},v=y=>{t.limit!=0&&(y.length>t.limit&&l.value.getRef().toggleRowSelection(y[y.length-1],!1),a.tableSelectable=!(y.length>=t.limit))};return lt(()=>{u.mount()}),Fe(()=>t.modelValue,y=>{y&&!a.ready&&Ge(()=>{d()})}),(y,_)=>{const c=D("Icon"),s=D("el-button"),T=D("el-tooltip"),M=D("el-dialog"),A=xe("blur");return m(),I("div",null,[k(M,{onClose:_[0]||(_[0]=z=>o("update:modelValue",!1)),width:"60%","model-value":y.modelValue,class:"ba-upload-select-dialog",title:h(r)("utils.Select File"),"append-to-body":!0,"destroy-on-close":!0,top:"4vh"},{default:S(()=>[k(xl,{buttons:["refresh","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":h(r)("Quick search placeholder",{fields:h(r)("utils.Original name")})},{default:S(()=>[k(T,{content:h(r)("utils.choice"),placement:"top"},{default:S(()=>[ne((m(),C(s,{onClick:g,disabled:!(h(u).table.selection.length>0),class:"table-header-operate",type:"primary"},{default:S(()=>[k(c,{name:"fa fa-check"}),L("span",da,B(h(r)("utils.choice")),1)]),_:1},8,["disabled"])),[[A]])]),_:1},8,["content"]),y.limit!==0?(m(),I("div",fa,[ge(B(h(r)("utils.You can also select"))+" ",1),L("span",pa,B(y.limit-h(u).table.selection.length),1),ge(" "+B(h(r)("utils.items")),1)])):$("",!0)]),_:1},8,["quick-search-placeholder"]),k(gl,{ref_key:"tableRef",ref:l,onSelectionChange:v},null,512)]),_:1},8,["model-value","title"])])}}}),ha={class:"w100"},ga={class:"ml-6"},ba={class:"ba-upload-preview-scroll ba-scroll-style"},va=["src"],_a=Q({inheritAttrs:!1,__name:"baUpload",props:{type:{default:"image"},data:{default:()=>({})},modelValue:{default:()=>[]},returnFullUrl:{type:Boolean,default:!1},hideSelectFile:{type:Boolean,default:!1},attr:{default:()=>({})},forceLocal:{type:Boolean,default:!1},hideImagePlusOnOverLimit:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{expose:e,emit:t}){const o=n,l=t,r=ln(),a=Pe(),i=ye({key:ht(),defaultReturnType:"string",preview:{show:!1,url:""},fileList:[],attrs:{},uploading:0,selectFile:{show:!1,type:"file",returnFullUrl:o.returnFullUrl},events:{}}),u={change:["onChange","on-change"],remove:["onRemove","on-remove"],preview:["onPreview","on-preview"],exceed:["onExceed","on-exceed"],beforeUpload:["beforeUpload","onBeforeUpload","before-upload","on-before-upload"],progress:["onProgress","on-progress"],success:["onSuccess","on-success"],error:["onError","on-error"]},d=(f,b)=>{const E=je(b,"uid",f.uid);if(!E||(f=b[E],!f||!f.raw)||s("beforeUpload",[f])===!1)return;let P=new FormData;P.append("file",f.raw),P=z(P),i.uploading++,Ho(P,{uuid:ht()},o.forceLocal,{onUploadProgress:x=>{const j=x;x.total&&x.total>0&&["ready","uploading"].includes(f.status)&&(j.percent=x.loaded/x.total*100,f.status="uploading",f.percentage=Math.round(j.percent),s("progress",[j,f,b]))}}).then(x=>{x.code==1?(f.serverUrl=x.data.file.url,f.status="success",l("update:modelValue",A()),s("success",[x,f,b])):(f.status="fail",b.splice(E,1),s("error",[x,f,b]))}).catch(x=>{f.status="fail",b.splice(E,1),s("error",[x,f,b])}).finally(()=>{i.uploading--,F(f,b)})},g=(f,b)=>{s("remove",[f,b]),F(f,b),l("update:modelValue",A())},v=f=>{if(s("preview",[f]),!(!f||!f.serverUrl)){if(o.type=="file"||o.type=="files"){window.open(Be(f.serverUrl));return}i.preview.show=!0,i.preview.url=Be(f.serverUrl)}},y=f=>{const b=f[0];b.uid=an(),a.value.handleStart(b),s("exceed",[b,i.fileList])},_=f=>{f=A("array").concat(f),M(f),l("update:modelValue",A()),F(f,i.fileList),i.selectFile.show=!1},c=()=>{Ge(()=>{var E;let f=(E=a.value)==null?void 0:E.$el.querySelector(".el-upload-list");f.getElementsByClassName("el-upload-list__item").length>=2&&R.create(f,{animation:200,draggable:".el-upload-list__item",onEnd:P=>{P.oldIndex!=P.newIndex&&(i.fileList[P.newIndex]=[i.fileList[P.oldIndex],i.fileList[P.oldIndex]=i.fileList[P.newIndex]][0],l("update:modelValue",A()))}})})},s=(f,b)=>{const E=u[f];if(E){for(const P in E)if(typeof i.events[E[P]]=="function"&&i.events[E[P]](...b)===!1)return!1}};lt(()=>{const f={};if(!we(o.attr)){const P=["onPreview","onRemove","onSuccess","onError","onChange","onExceed","beforeUpload","onProgress"];for(const x in o.attr)P.includes(x)?i.events[x]=o.attr[x]:f[x]=o.attr[x];console.warn("图片/文件上传组件的 props.attr 已经弃用，并将于 v2.2.0 版本彻底删除，请将 props.attr 的部分直接作为 props 传递！")}let b=[],E={};for(const P in u)b=[...b,...u[P]];for(const P in r)b.includes(P)?i.events[P]=r[P]:E[P]=r[P];o.type=="image"||o.type=="file"?E={...E,limit:1}:E={...E,multiple:!0},(o.type=="image"||o.type=="images")&&(i.selectFile.type="image",E={...E,accept:"image/*",listType:"picture-card"}),i.attrs={...E,...f},i.attrs.limit&&(i.selectFile.limit=i.attrs.limit),M(o.modelValue),c()});const T=()=>i.attrs.limit&&i.fileList.length>i.attrs.limit?(i.fileList=i.fileList.slice(i.fileList.length-i.attrs.limit),!0):!1,M=f=>{let b=to(f);i.fileList=[],i.defaultReturnType=typeof f=="string"||o.type=="file"||o.type=="image"?"string":"array";for(const E in b)i.fileList.push({name:jo(b[E]),url:Be(b[E]),serverUrl:b[E]});(T()||o.returnFullUrl)&&l("update:modelValue",A()),i.key=ht()},A=(f=i.defaultReturnType)=>{T();let b=[];for(const E in i.fileList)i.fileList[E].serverUrl&&b.push(i.fileList[E].serverUrl);return o.returnFullUrl&&(b=mt(b)),f==="string"?b.join(","):b},z=f=>{if(o.data&&!we(o.data))for(const b in o.data)f.append(b,o.data[b]);return f},F=(f,b)=>{c(),s("change",[f,b])},V=()=>a.value,p=()=>{i.attrs.disabled||(i.selectFile.show=!0)};return e({getRef:V,showSelectFile:p}),Fe(()=>o.modelValue,f=>{if(i.uploading>0)return;if(f==null)return M("");let b=mt(to(go(f))),E=mt(A("array"));b.sort().toString()!=E.sort().toString()&&M(f)}),(f,b)=>{const E=D("Icon"),P=D("el-button"),x=D("el-upload"),j=D("el-dialog"),K=xe("blur");return m(),I("div",ha,[(m(),C(x,me({ref_key:"upload",ref:a,class:["ba-upload",[f.type,i.attrs.disabled?"is-disabled":"",f.hideImagePlusOnOverLimit&&i.attrs.limit&&i.fileList.length>=i.attrs.limit?"hide-image-plus":""]],"file-list":i.fileList,"onUpdate:fileList":b[2]||(b[2]=X=>i.fileList=X),"auto-upload":!1,onChange:d,onRemove:g,onPreview:v,onExceed:y},i.attrs,{key:i.key}),Vt({_:2},[f.$slots.default?void 0:{name:"default",fn:S(()=>[f.type=="image"||f.type=="images"?(m(),I(q,{key:0},[f.hideSelectFile?$("",!0):(m(),I("div",{key:0,onClick:b[0]||(b[0]=nt(X=>p(),["stop"])),class:"ba-upload-select-image"},B(f.$t("utils.choice")),1)),k(E,{class:"ba-upload-icon",name:"el-icon-Plus",size:"30",color:"#c0c4cc"})],64)):(m(),I(q,{key:1},[ne((m(),C(P,{type:"primary"},{default:S(()=>[k(E,{name:"el-icon-Plus",color:"#ffffff"}),L("span",null,B(f.$t("Upload")),1)]),_:1})),[[K]]),f.hideSelectFile?$("",!0):ne((m(),C(P,{key:0,onClick:b[1]||(b[1]=nt(X=>p(),["stop"])),type:"success"},{default:S(()=>[k(E,{name:"fa fa-th-list",size:"14px",color:"#ffffff"}),L("span",ga,B(f.$t("utils.choice")),1)]),_:1})),[[K]])],64))]),key:"0"},ue(f.$slots,(X,be)=>({name:be,fn:S(Te=>[he(f.$slots,be,bo(vo(Te)),void 0,!0)])}))]),1040,["class","file-list"])),k(j,{modelValue:i.preview.show,"onUpdate:modelValue":b[3]||(b[3]=X=>i.preview.show=X),class:"ba-upload-preview"},{default:S(()=>[L("div",ba,[L("img",{src:i.preview.url,class:"ba-upload-preview-img",alt:""},null,8,va)])]),_:1},8,["modelValue"]),k(ma,me({modelValue:i.selectFile.show,"onUpdate:modelValue":b[4]||(b[4]=X=>i.selectFile.show=X)},i.selectFile,{onChoice:_}),null,16,["modelValue"])])}}}),ya=ae(_a,[["__scopeId","data-v-66b5947b"]]),wa={},Sa={class:"tips"};function Ta(n,e){return m(),I("div",Sa,B(n.$t("utils.Please install editor")),1)}const Ea=ae(wa,[["render",Ta],["__scopeId","data-v-5d5c399b"]]),ka=Object.freeze(Object.defineProperty({__proto__:null,default:Ea},Symbol.toStringTag,{value:"Module"})),Da={class:"ba-editor ueditorplus"},Ia={key:1,class:"editor-loading"},Va=Q({__name:"ueditorplus",props:{height:{default:"320px"},mode:{default:"default"},placeholder:{default:"请输入内容..."},modelValue:{default:""},fileForceLocal:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=Go(),o=qo(),l=n,r=e,a=ye({mounted:!1,value:l.modelValue?l.modelValue:"<p></p>"});let i="/admin/ueditor/init?ba-token="+t.getToken("auth");Zt.path!=="/admin"&&Ko()&&/^\/admin\//.test(i)?i=i.replace(/^\/admin\//,Zt.path+".php/"):i="/index.php"+i,i=o.cdnUrl+i;const u={serverUrl:i,UEDITOR_HOME_URL:"/static/UEditorPlus/",UEDITOR_CORS_URL:"/static/UEditorPlus/",initialFrameWidth:"100%",initialFrameHeight:300,zIndex:9999},d=rn({loader:()=>Jt(()=>import("./index-CnPDeo3v.js"),__vite__mapDeps([0,1])).then(g=>g.VueUeditorWrap),loadingComponent:()=>'<div class="loading">编辑器加载中...</div>',delay:200,onError(g,v,y,_){console.error("加载编辑器失败:",g),_<3?v():y()}});return Fe(()=>a.value,g=>{r("update:modelValue",g)}),Fe(()=>l.modelValue,g=>{a.value=g||"<p></p>"}),lt(async()=>{try{await Jt(()=>import("./index-CnPDeo3v.js"),__vite__mapDeps([0,1])),a.mounted=!0}catch(g){console.error("加载编辑器失败:",g)}}),(g,v)=>(m(),I("div",Da,[a.mounted?(m(),C(h(d),{key:0,modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=y=>a.value=y),"editor-id":`editor-${h(ht)()}`,config:u,style:{width:"100%"},editorDependencies:["ueditor.config.js","ueditor.all.js"]},null,8,["modelValue","editor-id"])):(m(),I("div",Ia,v[1]||(v[1]=[L("i",{class:"el-icon-loading"},null,-1),ge(" 编辑器初始化中... ")])))]))}}),Ca=ae(Va,[["__scopeId","data-v-c6c1ccdb"]]),Aa=Object.freeze(Object.defineProperty({__proto__:null,default:Ca},Symbol.toStringTag,{value:"Module"})),Ra=Q({__name:"editor",props:{editorType:{default:"default"}},setup(n){const e=n,t=ye({editorType:e.editorType}),o={},l=Object.assign({"../../mixins/editor/default.vue":ka,"../../mixins/editor/ueditorplus.vue":Aa});for(const r in l){const a=r.replace("../../mixins/editor/","").replace(".vue","");o[a]=l[r].default,e.editorType=="default"&&a!="default"&&(t.editorType=a)}return(r,a)=>(m(),I("div",null,[(m(),C(It(o[t.editorType]),bo(vo(r.$attrs)),null,16))]))}}),Oa={class:"w100"},Pa=Q({__name:"remoteSelect",props:{pk:{default:"id"},field:{default:"name"},params:{default:()=>({})},remoteUrl:{default:""},modelValue:{default:""},pagination:{type:Boolean,default:!0},tooltipParams:{default:()=>({})},paginationLayout:{default:"total, ->, prev, pager, next"},labelFormatter:{},escBlur:{type:Boolean,default:!0}},emits:["update:modelValue","row"],setup(n,{expose:e,emit:t}){const o=fo(),l=Pe(),r=n,a=ye({primaryKey:r.pk,options:[],loading:!1,total:0,currentPage:1,pageSize:10,params:r.params,keyword:"",value:r.modelValue?r.modelValue:"",initializeFlag:!1,optionValidityFlag:!1,focusStatus:!1});let i=null;const u=un(),d=t,g=p=>{var f;if(p||(a.value=p=r.multiple?[]:""),d("update:modelValue",p),typeof((f=u==null?void 0:u.vnode.props)==null?void 0:f.onRow)=="function")if(typeof p=="number"||typeof p=="string"){const b=je(a.options,a.primaryKey,""+p);d("row",b?eo(a.options[b]):{})}else{const b=[];for(const E in p){let P=je(a.options,a.primaryKey,""+p[E]);P&&b.push(eo(a.options[P]))}d("row",b)}},v=p=>{var f,b,E;r.escBlur&&(p.stopPropagation(),(f=l.value)==null||f.blur(),(E=(b=l.value)==null?void 0:b.inputRef)==null||E.blur())},y=()=>{a.focusStatus=!0,a.optionValidityFlag||T()},_=()=>{Ge(()=>{var p,f;(p=l.value)==null||p.focus(),(f=l.value)==null||f.$el.click()})},c=()=>{a.keyword="",a.focusStatus=!1},s=ho(p=>{a.keyword!=p&&(a.keyword=p,a.currentPage=1,T())},300),T=(p="")=>{a.loading=!0,a.params.page=a.currentPage,a.params.initKey=r.pk,a.params.initValue=p,Xo(r.remoteUrl,a.keyword,a.params).then(f=>{let b=f.data.options?f.data.options:f.data.list;if(typeof r.labelFormatter=="function")for(const E in b)b[E][r.field]=r.labelFormatter(b[E],E);a.options=b,a.total=f.data.total??0,a.optionValidityFlag=!(a.keyword||(typeof p=="object"?!we(p):p))}).finally(()=>{a.loading=!1,a.initializeFlag=!0})},M=p=>{a.currentPage=p,T()},A=()=>{if(a.value)if(typeof a.value=="object")for(const p in a.value)a.value[p]=""+a.value[p];else typeof a.value=="number"&&(a.value=""+a.value);T(a.value)};return lt(()=>{a.params.uuid=po();let p=r.pk.split(".");a.primaryKey=p[p.length-1],A(),setTimeout(()=>{var f;window!=null&&window.IntersectionObserver&&(i=new IntersectionObserver(b=>{var E;for(const P in b)b[P].isIntersecting||(E=l.value)==null||E.blur()}),((f=l.value)==null?void 0:f.$el)instanceof Element&&i.observe(l.value.$el))},500)}),sn(()=>{i==null||i.disconnect()}),Fe(()=>r.modelValue,p=>{String(a.value)!=String(p)&&(a.value=p||"",A())}),e({blur:()=>{var p;(p=l.value)==null||p.blur()},focus:()=>{var p;(p=l.value)==null||p.focus()},getRef:()=>l.value,getData:T}),(p,f)=>{const b=D("el-tooltip"),E=D("el-option"),P=D("el-pagination"),x=D("el-select"),j=D("el-popover");return m(),I("div",Oa,[k(j,{width:"100%",placement:"bottom","popper-class":"remote-select-popper",visible:a.focusStatus&&!a.loading&&!a.keyword&&!a.options.length,teleported:!1,content:p.$t("utils.No data"),"hide-after":0},{reference:S(()=>[k(x,me({ref_key:"selectRef",ref:l,class:"w100",remote:"",clearable:"",filterable:"","automatic-dropdown":"","remote-show-suffix":"",modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=K=>a.value=K),loading:a.loading,disabled:r.disabled||!a.initializeFlag,onBlur:c,onFocus:y,onClear:_,onChange:g,onKeydownCapture:mo(v,["esc"]),"remote-method":h(s)},p.$attrs),Vt({default:S(()=>[(m(!0),I(q,null,ue(a.options,K=>(m(),C(E,{class:"remote-select-option",label:K[p.field],value:K[a.primaryKey].toString(),key:K[a.primaryKey]},{default:S(()=>[h(we)(p.tooltipParams)?$("",!0):(m(),C(b,{key:0,placement:"right",effect:"light"},{content:S(()=>[(m(!0),I(q,null,ue(p.tooltipParams,(X,be)=>(m(),I("p",{key:be},B(be)+": "+B(K[X]),1))),128))]),default:S(()=>[L("div",null,B(K[p.field]),1)]),_:2},1024))]),_:2},1032,["label","value"]))),128))]),_:2},[a.total&&r.pagination?{name:"footer",fn:S(()=>[k(P,{currentPage:a.currentPage,"page-size":a.pageSize,"pager-count":5,class:"select-pagination",layout:r.paginationLayout,total:a.total,onCurrentChange:M,small:h(o).layout.shrink},null,8,["currentPage","page-size","layout","total","small"])]),key:"0"}:void 0]),1040,["modelValue","loading","disabled","remote-method"])]),_:1},8,["visible","content"])])}}}),Na=ae(Pa,[["__scopeId","data-v-8e1e3bdc"]]),$a=Q({name:"baInput",props:{type:{type:String,required:!0,validator:n=>Dn.includes(n)},modelValue:{type:null,required:!0},attr:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(n,{emit:e,slots:t}){const o=fe(()=>({...n.attr,...n.data})),l=_=>{e("update:modelValue",_)},r=()=>()=>k(D("el-input"),{type:n.type=="string"?"text":n.type,...o.value,modelValue:n.modelValue,"onUpdate:modelValue":l},t),a=()=>{o.value.content||console.warn("请传递 "+n.type+" 的 content");const _=fe(()=>{const c=[],s=Ht(o.value.content),T=o.value.button?n.type+"-button":n.type;for(const M in o.value.content){let A={};s?(typeof o.value.content[M].value=="number"&&console.warn(n.type+" 的 content.value 不能是数字"),A={...o.value.content[M],border:o.value.border?o.value.border:!1,...o.value.childrenAttr||{}}):A={value:M,label:o.value.content[M],border:o.value.border?o.value.border:!1,...o.value.childrenAttr||{}},c.push(k(D("el-"+T),A,t))}return c});return()=>{const c=fe(()=>{if(n.type=="radio")return n.modelValue==null?"":""+n.modelValue;{let s=[];for(const T in n.modelValue)s[T]=""+n.modelValue[T];return s}});return k(D("el-"+n.type+"-group"),{...o.value,modelValue:c.value,"onUpdate:modelValue":l},()=>_.value)}},i=()=>{o.value.content||console.warn("请传递 "+n.type+"的 content");const _=fe(()=>{const c=[];for(const s in o.value.content)c.push(k(D("el-option"),{key:s,label:o.value.content[s],value:s,...o.value.childrenAttr||{}},t));return c});return()=>{const c=fe(()=>{if(n.type=="select")return n.modelValue==null?"":""+n.modelValue;{let s=[];for(const T in n.modelValue)s[T]=""+n.modelValue[T];return s}});return k(D("el-select"),{class:"w100",multiple:n.type!="select",clearable:!0,...o.value,modelValue:c.value,"onUpdate:modelValue":l},()=>_.value)}},u=()=>{let _="YYYY-MM-DD HH:mm:ss";switch(n.type){case"date":_="YYYY-MM-DD";break;case"year":_="YYYY";break}return()=>k(D("el-date-picker"),{class:"w100",type:n.type,"value-format":_,...o.value,modelValue:n.modelValue,"onUpdate:modelValue":l},t)},d=()=>()=>k(ya,{type:n.type,modelValue:n.modelValue,"onUpdate:modelValue":l,...o.value},t),g=()=>()=>k(Na,{modelValue:n.modelValue,"onUpdate:modelValue":l,multiple:n.type!="remoteSelect",...o.value},t),v=new Map([["string",r],["number",r],["textarea",r],["password",r],["radio",a],["checkbox",a],["switch",()=>{const _=fe(()=>typeof o.value.activeValue<"u"&&typeof o.value.inactiveValue<"u"?"custom":typeof n.modelValue),c=fe(()=>{if(_.value==="boolean"||_.value==="custom")return n.modelValue;{let s=parseInt(n.modelValue);return!(isNaN(s)||s<=0)}});return()=>k(D("el-switch"),{...o.value,modelValue:c.value,"onUpdate:modelValue":s=>{let T=s;switch(_.value){case"string":T=s?"1":"0";break;case"number":T=s?1:0}e("update:modelValue",T)}},t)}],["datetime",u],["year",()=>()=>{const _=fe(()=>n.modelValue?""+n.modelValue:null);return k(D("el-date-picker"),{class:"w100",type:n.type,"value-format":"YYYY",...o.value,modelValue:_.value,"onUpdate:modelValue":l},t)}],["date",u],["time",()=>{const _=fe(()=>{if(n.modelValue instanceof Date)return n.modelValue;if(n.modelValue){let c=new Date;return new Date(c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()+" "+n.modelValue)}else return""});return()=>k(D("el-time-picker"),{class:"w100",clearable:!0,format:"HH:mm:ss",...o.value,modelValue:_.value,"onUpdate:modelValue":l},t)}],["select",i],["selects",i],["array",()=>()=>k(Vn,{modelValue:n.modelValue,"onUpdate:modelValue":l,...o.value},t)],["remoteSelect",g],["remoteSelects",g],["city",()=>{let _=o.value.level?o.value.level-1:2;const c=ye({value:"ready",nodes:[],key:"",currentRequest:null});let s={};const T=(A,z)=>s[A]&&s[A][z]?s[A][z]:!1,M=(A,z,F=[])=>{s[A]||(s[A]={}),s[A][z]=F};return()=>k(D("el-cascader"),{modelValue:n.modelValue,"onUpdate:modelValue":l,class:"w100",clearable:!0,props:{lazy:!0,lazyLoad(A,z){const{level:F,pathValues:V}=A;let p=V.join(",");p=p||"init";let f=T(F,p);if(f)return z(f);if(c.key==p&&c.value==n.modelValue)return c.currentRequest?c.currentRequest:z(c.nodes);let b=[];c.key=p,c.value=n.modelValue,c.currentRequest=Wo(V).then(E=>{let P=!1;n.modelValue&&typeof n.modelValue[0]=="string"&&(P=!0);for(const x in E.data)P&&(E.data[x].value=E.data[x].value.toString()),E.data[x].leaf=F>=_,b.push(E.data[x]);c.nodes=b,c.currentRequest=null,M(F,p,b),z(b)})}},...o.value},t)}],["image",d],["images",d],["file",d],["files",d],["icon",()=>()=>k(kn,{modelValue:n.modelValue,"onUpdate:modelValue":l,...o.value},t)],["color",()=>()=>k(D("el-color-picker"),{modelValue:n.modelValue,"onUpdate:modelValue":l,...o.value},t)],["editor",()=>()=>k(Ra,{class:"w100",modelValue:n.modelValue,"onUpdate:modelValue":l,...o.value},t)],["default",()=>{console.warn("暂不支持"+n.type+"的输入框类型，你可以自行在 BaInput 组件内添加逻辑")}]]);return(v.get(n.type)||v.get("default")).call(this)}}),Ma=ae($a,[["__scopeId","data-v-1b4dc5ec"]]);export{Ma as B,kn as I,Na as R,R as S,xl as T,gl as a,ca as b,Ba as d,za as f,Dn as i,H as n};
