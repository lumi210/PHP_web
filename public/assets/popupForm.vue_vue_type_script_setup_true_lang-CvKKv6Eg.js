import{h as A,s as N,al as $,a as q,q as r,W as y,o as m,N as d,O as i,Z as k,k as P,U as x,T as p,x as e,m as u,l as S,p as n,a5 as f,a6 as b,_ as z,Y as B,X as O,V as X}from"./vue-Cm_-Ome7.js";import{e as Y,w as Z}from"./index-BGkrm5xk.js";import{F as s}from"./index-Gg8Utg5G.js";import{b as C}from"./validate-CLs7Ey-q.js";import{g as J}from"./Extfield-CKk9p3fq.js";const Q={class:"title"},_={style:{"margin-right":"10px"}},ee={style:{"margin-left":"15px","margin-right":"10px"}},le={style:{"margin-left":"15px","margin-right":"10px"}},me=A({__name:"popupForm",setup(te){const v=Y(),c=N(),t=$("baTable"),h=$("mcode"),T=N([]),{t:l}=Z.useI18n(),F=q({activeTab:"basic"});J(h).then(U=>{U.code==1&&(T.value=U.data)});const V=q({});return setTimeout(()=>{V.title=[C({name:"required",title:l("cms.content.title")})],V.content=[C({name:"editorRequired",title:l("cms.content.content")})],V.scode=[C({name:"required",title:l("cms.content.scode")})]},200),(U,a)=>{const w=r("el-switch"),D=r("el-form-item"),W=r("el-tab-pane"),E=r("el-tabs"),K=r("el-form"),L=r("el-scrollbar"),I=r("el-button"),G=r("el-dialog"),R=y("drag"),j=y("zoom"),H=y("loading"),M=y("blur");return m(),d(G,{class:"ba-operate-dialog bd-right-full-dialog","close-on-click-modal":!1,"model-value":["Add","Edit"].includes(e(t).form.operate),onClose:e(t).toggleForm,width:"calc(100vw - 230px)"},{header:i(()=>[k((m(),P("div",Q,[x(p(e(t).form.operate?e(l)(e(t).form.operate):""),1)])),[[R,[".ba-operate-dialog",".el-dialog__header"]],[j,".ba-operate-dialog"]])]),footer:i(()=>[u("div",{style:S(["margin-left:"+e(t).form.labelWidth+"px",{"text-align":"left"}])},[n(I,{onClick:a[32]||(a[32]=o=>e(t).toggleForm())},{default:i(()=>[x(p(e(l)("Cancel")),1)]),_:1}),k((m(),d(I,{loading:e(t).form.submitLoading,onClick:a[33]||(a[33]=o=>e(t).onSubmit(c.value)),type:"primary"},{default:i(()=>[x(p(e(t).form.operateIds&&e(t).form.operateIds.length>1?e(l)("Save and edit next item"):e(l)("Save")),1)]),_:1},8,["loading"])),[[M]])],4)]),default:i(()=>[k((m(),d(L,{class:"ba-table-form-scrollbar"},{default:i(()=>[e(t).form.loading?X("",!0):(m(),d(K,{key:0,ref_key:"formRef",ref:c,onSubmit:a[30]||(a[30]=f(()=>{},["prevent"])),onKeyup:a[31]||(a[31]=b(o=>e(t).onSubmit(c.value),["enter"])),model:e(t).form.items,"label-position":e(v).layout.shrink?"top":"right","label-width":e(t).form.labelWidth+"px",rules:V},{default:i(()=>[n(E,{modelValue:F.activeTab,"onUpdate:modelValue":a[29]||(a[29]=o=>F.activeTab=o),type:"card"},{default:i(()=>[n(W,{class:"basic-tab-pane",name:"basic",label:e(l)("cms.content.basic")},{default:i(()=>[u("div",{class:z(["ba-operate-form","ba-"+e(t).form.operate+"-form"]),style:S(e(v).layout.shrink?"":"width: calc(100% - "+e(t).form.labelWidth/2+"px)")},[n(s,{label:e(l)("cms.content.scode"),type:"remoteSelect",modelValue:e(t).form.items.scode,"onUpdate:modelValue":a[0]||(a[0]=o=>e(t).form.items.scode=o),prop:"scode",placeholder:e(l)("Please select field",{field:e(l)("cms.content.scode")}),style:{width:"50%"},"input-attr":{pk:"content_sort.scode",params:{select:!0,order:"sorting,asc",istop:0,acode:e(t).table.filter.acode,search:[{field:"mcode",operator:"=",val:e(h)}]},field:"name",remoteUrl:"/admin/cms.ContentSort/index"}},null,8,["label","modelValue","placeholder","input-attr"]),n(s,{label:e(l)("cms.content.title"),type:"string",style:{width:"50%"},modelValue:e(t).form.items.title,"onUpdate:modelValue":a[1]||(a[1]=o=>e(t).form.items.title=o),prop:"title",placeholder:e(l)("Please input field",{field:e(l)("cms.content.title")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.ico"),type:"image",modelValue:e(t).form.items.ico,"onUpdate:modelValue":a[2]||(a[2]=o=>e(t).form.items.ico=o),prop:"ico",placeholder:e(l)("Please input field",{field:e(l)("cms.content.ico")})},null,8,["label","modelValue","placeholder"]),(m(!0),P(B,null,O(T.value,o=>(m(),P(B,{key:o.name},[o.component=="textarea"?(m(),d(s,{key:0,onKeyup:[a[3]||(a[3]=b(f(()=>{},["stop"]),["enter"])),a[4]||(a[4]=b(f(g=>e(t).onSubmit(c.value),["ctrl"]),["enter"]))],label:o.description,type:o.component,modelValue:e(t).form.items[o.name],"onUpdate:modelValue":g=>e(t).form.items[o.name]=g,prop:o.name,"input-attr":{content:o.content},placeholder:e(l)("Please input field")},null,8,["label","type","modelValue","onUpdate:modelValue","prop","input-attr","placeholder"])):(m(),d(s,{key:1,label:o.description,type:o.component,modelValue:e(t).form.items[o.name],"onUpdate:modelValue":g=>e(t).form.items[o.name]=g,prop:o.name,"input-attr":{content:o.content},placeholder:e(l)("Please input field")},null,8,["label","type","modelValue","onUpdate:modelValue","prop","input-attr","placeholder"]))],64))),128)),n(s,{label:e(l)("cms.content.content"),type:"editor",modelValue:e(t).form.items.content,"onUpdate:modelValue":a[5]||(a[5]=o=>e(t).form.items.content=o),prop:"content",onKeyup:[a[6]||(a[6]=b(f(()=>{},["stop"]),["enter"])),a[7]||(a[7]=b(f(o=>e(t).onSubmit(c.value),["ctrl"]),["enter"]))],placeholder:e(l)("Please input field",{field:e(l)("cms.content.content")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.tags"),type:"string",modelValue:e(t).form.items.tags,"onUpdate:modelValue":a[8]||(a[8]=o=>e(t).form.items.tags=o),prop:"tags",style:{width:"50%"},placeholder:e(l)("cms.content.Please enter the article tag, English comma separated")},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.author"),type:"string",modelValue:e(t).form.items.author,"onUpdate:modelValue":a[9]||(a[9]=o=>e(t).form.items.author=o),prop:"author",style:{width:"50%"},placeholder:e(l)("Please input field",{field:e(l)("cms.content.author")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.source"),type:"string",modelValue:e(t).form.items.source,"onUpdate:modelValue":a[10]||(a[10]=o=>e(t).form.items.source=o),prop:"source",style:{width:"50%"},placeholder:e(l)("Please input field",{field:e(l)("cms.content.source")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.pics"),type:"images",modelValue:e(t).form.items.pics,"onUpdate:modelValue":a[11]||(a[11]=o=>e(t).form.items.pics=o),prop:"pics",placeholder:e(l)("Please input field",{field:e(l)("cms.content.pics")})},null,8,["label","modelValue","placeholder"]),n(D,{label:e(l)("cms.content.parameter")},{default:i(()=>[u("label",_,p(e(l)("cms.content.istop")),1),n(w,{modelValue:e(t).form.items.istop,"onUpdate:modelValue":a[12]||(a[12]=o=>e(t).form.items.istop=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),u("label",ee,p(e(l)("cms.content.isrecommend")),1),n(w,{modelValue:e(t).form.items.isrecommend,"onUpdate:modelValue":a[13]||(a[13]=o=>e(t).form.items.isrecommend=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),u("label",le,p(e(l)("cms.content.isheadline")),1),n(w,{modelValue:e(t).form.items.isheadline,"onUpdate:modelValue":a[14]||(a[14]=o=>e(t).form.items.isheadline=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1},8,["label"]),n(s,{label:e(l)("cms.content.gid"),type:"remoteSelect",modelValue:e(t).form.items.gid,"onUpdate:modelValue":a[15]||(a[15]=o=>e(t).form.items.gid=o),prop:"gid","input-attr":{remoteUrl:"/admin/cms.memberGroup/getUserLevel",pk:"gcode",field:"gname"},style:{width:"50%"},placeholder:e(l)("Please input field",{field:e(l)("cms.content.gid")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.gtype"),type:"remoteSelect",modelValue:e(t).form.items.gtype,"onUpdate:modelValue":a[16]||(a[16]=o=>e(t).form.items.gtype=o),prop:"gtype","input-attr":{remoteUrl:"/admin/cms.memberGroup/getGtypeList",pk:"value",field:"label"},style:{width:"50%"},placeholder:e(l)("Please input field",{field:e(l)("cms.content.gtype")})},null,8,["label","modelValue","placeholder"])],6)]),_:1},8,["label"]),n(W,{name:"senior",class:"senior-tab-pane",label:e(l)("cms.content.senior")},{default:i(()=>[u("div",{class:z(["ba-operate-form","ba-"+e(t).form.operate+"-form"]),style:S(e(v).layout.shrink?"":"width: calc(100% - "+e(t).form.labelWidth/2+"px)")},[n(s,{label:e(l)("cms.content.subscode"),type:"remoteSelect",modelValue:e(t).form.items.subscode,"onUpdate:modelValue":a[17]||(a[17]=o=>e(t).form.items.subscode=o),prop:"subscode",style:{width:"50%"},placeholder:e(l)("Please input field",{field:e(l)("cms.content.subscode")}),"input-attr":{pk:"content_sort.id",params:{select:!0,order:"sorting,asc",istop:0,search:[{field:"mcode",operator:"=",val:e(h)}]},field:"name",remoteUrl:"/admin/cms.ContentSort/index"}},null,8,["label","modelValue","placeholder","input-attr"]),n(s,{label:e(l)("cms.content.titlecolor"),type:"color",modelValue:e(t).form.items.titlecolor,"onUpdate:modelValue":a[18]||(a[18]=o=>e(t).form.items.titlecolor=o),prop:"titlecolor",placeholder:e(l)("Please input field",{field:e(l)("cms.content.titlecolor")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.subtitle"),type:"string",style:{width:"50%"},modelValue:e(t).form.items.subtitle,"onUpdate:modelValue":a[19]||(a[19]=o=>e(t).form.items.subtitle=o),prop:"subtitle",placeholder:e(l)("Please input field",{field:e(l)("cms.content.subtitle")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.filename"),type:"string",modelValue:e(t).form.items.filename,"onUpdate:modelValue":a[20]||(a[20]=o=>e(t).form.items.filename=o),prop:"filename",style:{width:"50%"},placeholder:e(l)("Please input field",{field:e(l)("cms.content.filename")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.outlink"),type:"string",modelValue:e(t).form.items.outlink,"onUpdate:modelValue":a[21]||(a[21]=o=>e(t).form.items.outlink=o),prop:"outlink",style:{width:"50%"},placeholder:e(l)("Please input field",{field:e(l)("cms.content.outlink")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.insufficientPermissionPrompt"),type:"string",style:{width:"50%"},modelValue:e(t).form.items.gnote,"onUpdate:modelValue":a[22]||(a[22]=o=>e(t).form.items.gnote=o),prop:"gnote",placeholder:e(l)("Please input field",{field:e(l)("cms.content.insufficientPermissionPrompt")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.date"),type:"datetime",modelValue:e(t).form.items.date,"onUpdate:modelValue":a[23]||(a[23]=o=>e(t).form.items.date=o),prop:"date",style:{width:"50%"},blockHelp:e(l)("cms.content.Warm Tip: Set a future time for scheduled publishing"),placeholder:e(l)("Please select field",{field:e(l)("cms.content.date")})},null,8,["label","modelValue","blockHelp","placeholder"]),n(s,{label:e(l)("cms.content.enclosure"),type:"file",modelValue:e(t).form.items.enclosure,"onUpdate:modelValue":a[24]||(a[24]=o=>e(t).form.items.enclosure=o),prop:"enclosure",placeholder:e(l)("Please input field",{field:e(l)("cms.content.enclosure")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.keywords"),type:"string",modelValue:e(t).form.items.keywords,"onUpdate:modelValue":a[25]||(a[25]=o=>e(t).form.items.keywords=o),prop:"keywords",style:{width:"50%"},placeholder:e(l)("Please input field",{field:e(l)("cms.content.keywords")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.description"),type:"textarea",modelValue:e(t).form.items.description,"onUpdate:modelValue":a[26]||(a[26]=o=>e(t).form.items.description=o),prop:"description",style:{width:"50%"},placeholder:e(l)("Please input field",{field:e(l)("cms.content.description")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.sorting"),type:"number",prop:"sorting","input-attr":{step:1},style:{width:"50%"},modelValue:e(t).form.items.sorting,"onUpdate:modelValue":a[27]||(a[27]=o=>e(t).form.items.sorting=o),modelModifiers:{number:!0},placeholder:e(l)("Please input field",{field:e(l)("cms.content.sorting")})},null,8,["label","modelValue","placeholder"]),n(s,{label:e(l)("cms.content.status"),type:"radio",modelValue:e(t).form.items.status,"onUpdate:modelValue":a[28]||(a[28]=o=>e(t).form.items.status=o),prop:"status","input-attr":{content:{1:"显示",0:"隐藏"}},placeholder:e(l)("Please select field",{field:e(l)("cms.content.status")})},null,8,["label","modelValue","placeholder"])],6)]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["model","label-position","label-width","rules"]))]),_:1})),[[H,e(t).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{me as _};
