import{e as q,u as Ve,S as le,I as ce,J as Be,_ as F,w as ie,n as H,l as ge,h as J,K as $e,i as re,L as st,x as Xe,M as ee,N as rt,O as ut,c as ye,t as Ye,P as Ne,g as ct,f as Ee,Q as it,R as Te,r as Je,T as Ue,U as dt,V as Ze,W as mt,X as pt}from"./index-BGkrm5xk.js";import{u as Re,t as P}from"./terminal-CKCcw3Kf.js";import{h as D,a7 as X,q as m,o as c,k as B,x as e,V as A,l as ne,T as h,N as k,_ as U,X as te,Y as K,O as n,p as o,m as d,b as Ie,M as oe,a as j,j as Ae,B as G,a0 as de,n as Z,C as qe,Z as O,aa as Ge,ab as Le,ac as ft,$ as Qe,s as _e,a5 as ue,U as I,W as Me,ad as et,ae as He,d as _t,af as vt,ag as De,ah as tt,a9 as gt,D as yt,ai as bt,i as Oe,aj as Se,ak as ht}from"./vue-Cm_-Ome7.js";import{_ as Ct}from"./logo-CC6Ky0NS.js";import{c as kt,o as We,g as ze,r as ve,s as wt,a as xt}from"./router-CV4C8fOg.js";import{I as Tt}from"./index-D7pEq_sT.js";import{t as St,a as Bt,i as Mt}from"./index-Bah2dxKJ.js";import{F as pe}from"./index-Gg8Utg5G.js";import"./index-6wQyfZWi.js";const Vt={class:"layout-logo"},$t={key:0,class:"logo-img",src:Ct,alt:"logo"},Rt=D({__name:"logo",setup(y){X(u=>({adf9ae48:e(t).layout.layoutMode!="Streamline"?e(t).getColorVal("menuTopBarBackground"):"transparent"}));const t=q(),l=Ve(),i=function(){t.layout.shrink&&!t.layout.menuCollapse&&kt(),t.setLayout("menuCollapse",!t.layout.menuCollapse),le.set(ce,{layoutMode:t.layout.layoutMode,menuCollapse:t.layout.menuCollapse}),setTimeout(()=>{Be()},350)};return(u,s)=>{const b=m("Icon");return c(),B("div",Vt,[e(t).layout.menuCollapse?A("",!0):(c(),B("img",$t)),e(t).layout.menuCollapse?A("",!0):(c(),B("div",{key:1,style:ne({color:e(t).getColorVal("menuActiveColor")}),class:"website-name"},h(e(l).siteName),5)),e(t).layout.layoutMode!="Streamline"?(c(),k(b,{key:2,onClick:i,name:e(t).layout.menuCollapse?"fa fa-indent":"fa fa-dedent",class:U([e(t).layout.menuCollapse?"unfold":"","fold"]),color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["name","class","color"])):A("",!0)])}}}),ot=F(Rt,[["__scopeId","data-v-38fd2478"]]),It=D({__name:"menuTree",props:{menus:{default:()=>[]},extends:{default:()=>({level:1})}},setup(y){X(s=>({"5010b154":e(l).getColorVal("menuActiveBackground")}));const{t}=ie.useI18n(),l=q(),i=y,u=s=>{var b,f;if(((b=i.extends)==null?void 0:b.position)=="horizontal"&&i.extends.level<=1&&((f=s.children)!=null&&f.length)){const r=ze(s.children);r?We(r):Ie({type:"error",message:t("utils.No child menu to jump to!")})}};return(s,b)=>{const f=m("Icon"),r=m("menu-tree",!0),_=m("el-sub-menu"),x=m("el-menu-item");return c(!0),B(K,null,te(i.menus,p=>(c(),B(K,null,[p.children&&p.children.length>0?(c(),k(_,{onClick:a=>u(p),index:p.path,key:p.path},{title:n(()=>{var a,g,V,$;return[o(f,{color:e(l).getColorVal("menuColor"),name:(a=p.meta)!=null&&a.icon?(g=p.meta)==null?void 0:g.icon:e(l).layout.menuDefaultIcon},null,8,["color","name"]),d("span",null,h((V=p.meta)!=null&&V.title?($=p.meta)==null?void 0:$.title:s.$t("noTitle")),1)]}),default:n(()=>[o(r,{extends:{...i.extends,level:i.extends.level+1},menus:p.children},null,8,["extends","menus"])]),_:2},1032,["onClick","index"])):(c(),k(x,{index:p.path,key:p.path,onClick:a=>e(We)(p)},{default:n(()=>{var a,g,V,$;return[o(f,{color:e(l).getColorVal("menuColor"),name:(a=p.meta)!=null&&a.icon?(g=p.meta)==null?void 0:g.icon:e(l).layout.menuDefaultIcon},null,8,["color","name"]),d("span",null,h((V=p.meta)!=null&&V.title?($=p.meta)==null?void 0:$.title:s.$t("noTitle")),1)]}),_:2},1032,["index","onClick"]))],64))),256)}}}),be=F(It,[["__scopeId","data-v-99fc3008"]]),At=D({__name:"menuVertical",setup(y){X(r=>({"79587cfa":s.value,bc195cfe:e(t).getColorVal("menuBackground"),44015844:e(t).getColorVal("menuColor"),"00bbda10":e(t).getColorVal("menuActiveColor")}));const t=q(),l=H(),i=oe(),u=j({defaultActive:""}),s=Ae(()=>{let r=0;return t.layout.menuShowTopBar&&(r=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+r)+"px)":"calc(100vh - "+r+"px)"}),b=r=>{const _=l.getTabsViewDataByRoute(r);_&&(u.defaultActive=_.meta.matched)},f=()=>{Z(()=>{var _;let r=document.querySelector(".el-menu.layouts-menu-vertical li.is-active");if(!r)return!1;(_=J.value)==null||_.setScrollTop(r.offsetTop)})};return G(()=>{b(i),f()}),de(r=>{b(r)}),(r,_)=>{const x=m("el-menu"),p=m("el-scrollbar");return c(),k(p,{ref_key:"layoutMenuScrollbarRef",ref:J,class:"vertical-menus-scrollbar"},{default:n(()=>[o(x,{class:"layouts-menu-vertical","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":u.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:ge},{default:n(()=>[o(be,{menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),Lt=D({__name:"menuVerticalChildren",setup(y){X(r=>({c28d89f6:s.value,deb256e8:e(t).getColorVal("menuBackground"),d9fa541a:e(t).getColorVal("menuColor"),"31421d66":e(t).getColorVal("menuActiveColor")}));const t=q(),l=H(),i=oe(),u=j({defaultActive:"",routeChildren:[]}),s=Ae(()=>{let r=0;return t.layout.menuShowTopBar&&(r=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+r)+"px)":"calc(100vh - "+r+"px)"}),b=r=>{const _=l.getTabsViewDataByRoute(r);_&&(u.defaultActive=_.meta.matched);let x=l.getTabsViewDataByRoute(r,"above");x?x.children&&x.children.length>0?u.routeChildren=x.children:u.routeChildren=[x]:u.routeChildren||(u.routeChildren=l.state.tabsViewRoutes)},f=()=>{Z(()=>{var _;let r=document.querySelector(".el-menu.layouts-menu-vertical-children li.is-active");if(!r)return!1;(_=J.value)==null||_.setScrollTop(r.offsetTop)})};return G(()=>{b(i),f(),new $e(J.value.wrapRef)}),de(r=>{b(r)}),(r,_)=>{const x=m("el-menu"),p=m("el-scrollbar");return c(),k(p,{ref_key:"layoutMenuScrollbarRef",ref:J,class:"children-vertical-menus-scrollbar"},{default:n(()=>[o(x,{class:"layouts-menu-vertical-children","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":u.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:ge},{default:n(()=>[u.routeChildren.length>0?(c(),k(be,{key:0,menus:u.routeChildren},null,8,["menus"])):A("",!0)]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),Dt=D({name:"layout/aside",__name:"aside",setup(y){X(u=>({"12d2a223":i.value}));const t=q(),l=H(),i=Ae(()=>t.menuWidth());return(u,s)=>{const b=m("el-aside");return e(l).state.tabFullScreen?A("",!0):(c(),k(b,{key:0,class:U("layout-aside-"+e(t).layout.layoutMode+" "+(e(t).layout.shrink?"shrink":""))},{default:n(()=>[e(t).layout.menuShowTopBar?(c(),k(ot,{key:0})):A("",!0),e(t).layout.layoutMode=="Double"?(c(),k(Lt,{key:1})):(c(),k(At,{key:2}))]),_:1},8,["class"]))}}}),Fe=F(Dt,[["__scopeId","data-v-be977e32"]]);function at(){if(!qe())throw new Error("useCurrentInstance() can only be used inside setup() or functional components!");const{appContext:y}=qe();return{proxy:y.config.globalProperties}}const zt={class:"el-dropdown-menu"},Ft=["onClick"],Pt=D({__name:"index",props:{width:{default:150},items:{default:()=>[]}},emits:["menuClick","hideContextmenu"],setup(y,{expose:t,emit:l}){const i=y,u=l,s=j({show:!1,axis:{x:0,y:0},sourceData:null,showArrow:!0,arrowAxis:10}),b=(_,x)=>{s.showArrow=!0,s.sourceData=_;const p=document.documentElement.clientHeight-x.y-(i.items.length*40+20),a=document.documentElement.clientWidth-x.x-(i.width+20);p<0&&(x.y+=p,s.showArrow=!1),a<0&&(x.x+=a,s.showArrow=!1),s.axis=x,s.show=!0},f=()=>{s.show=!1,u("hideContextmenu")},r=_=>{_.disabled||(_.sourceData=ft(s.sourceData),u("menuClick",_))};return t({onShowContextmenu:b,onHideContextmenu:f}),G(()=>{re(document,"click",f),re(document,"scroll",f),re(document,"keydown",_=>{_.key==="Escape"&&f()})}),(_,x)=>{const p=m("Icon");return c(),k(Le,{name:"el-zoom-in-center"},{default:n(()=>[O((c(),B("div",{class:"el-popper is-pure is-light el-dropdown__popper ba-contextmenu",style:ne(`top: ${s.axis.y+5}px;left: ${s.axis.x-14}px;width:${i.width}px`),key:Math.random(),"aria-hidden":"false","data-popper-placement":"bottom"},[d("ul",zt,[(c(!0),B(K,null,te(i.items,(a,g)=>(c(),B("li",{key:g,class:U(["el-dropdown-menu__item",a.disabled?"is-disabled":""]),tabindex:"-1",onClick:V=>r(a)},[o(p,{size:"12",name:a.icon},null,8,["name"]),d("span",null,h(a.label),1)],10,Ft))),128))]),s.showArrow?(c(),B("span",{key:0,class:"el-popper__arrow",style:ne({left:`${s.arrowAxis}px`})},null,4)):A("",!0)],4)),[[Ge,s.show]])]),_:1})}}}),Nt=F(Pt,[["__scopeId","data-v-0380e8de"]]),Et=["onClick","onContextmenu"],Ut=D({__name:"tabs",setup(y,{expose:t}){X(C=>({"6f2fd06e":e(u).getColorVal("headerBarTabColor"),"6a84faa3":e(u).getColorVal("headerBarTabActiveColor"),"5a2975ba":e(u).layout.layoutMode=="Default"?"none":e(u).getColorVal("headerBarBackground")}));const l=oe(),i=Qe(),u=q(),s=H(),{proxy:b}=at(),f=_e(),r=st(),_=_e(),x=j({contextmenuItems:[{name:"refresh",label:"重新加载",icon:"fa fa-refresh"},{name:"close",label:"关闭标签",icon:"fa fa-times"},{name:"fullScreen",label:"当前标签全屏",icon:"el-icon-FullScreen"},{name:"closeOther",label:"关闭其他标签",icon:"fa fa-minus"},{name:"closeAll",label:"关闭全部标签",icon:"fa fa-stop"}]}),p=j({width:"0",transform:"translateX(0px)"}),a=C=>{i.push(C.fullPath)},g=function(C){if(!C)return!1;p.width=C.clientWidth+"px",p.transform=`translateX(${C.offsetLeft}px)`;let M=C.offsetLeft+C.clientWidth-f.value.clientWidth;C.offsetLeft<f.value.scrollLeft?f.value.scrollTo(C.offsetLeft,0):M>f.value.scrollLeft&&f.value.scrollTo(M,0)},V=()=>{const C=s.state.tabsView.slice(-1)[0];C?i.push(C.fullPath):i.push(Xe)},$=C=>{var M;s._closeTab(C),b.eventBus.emit("onTabViewClose",C),((M=s.state.activeRoute)==null?void 0:M.fullPath)===C.fullPath?V():(s._setActiveRoute(s.state.activeRoute),Z(()=>{g(r.value[s.state.activeIndex])})),_.value.onHideContextmenu()},R=C=>{var M;s._closeTabs(C),s._setActiveRoute(C),((M=s.state.activeRoute)==null?void 0:M.fullPath)!==l.fullPath&&i.push(C.fullPath)},L=C=>{var z;let M=ze(s.state.tabsViewRoutes);if(C&&M&&M.path==C.fullPath)return R(C);if(M&&M.path==((z=s.state.activeRoute)==null?void 0:z.fullPath))return R(s.state.activeRoute);s._closeTabs(!1),M&&ve(M.path)},T=(C,M)=>{x.contextmenuItems[0].disabled=l.fullPath!==C.fullPath,x.contextmenuItems[4].disabled=x.contextmenuItems[3].disabled=s.state.tabsView.length==1;const{clientX:z,clientY:E}=M;_.value.onShowContextmenu(C,{x:z,y:E})},S=C=>{const{name:M,sourceData:z}=C;if(z)switch(M){case"refresh":b.eventBus.emit("onTabViewRefresh",z);break;case"close":$(z);break;case"closeOther":R(z);break;case"closeAll":L(z);break;case"fullScreen":l.fullPath!==z.fullPath&&i.push(z.fullPath),s.setFullScreen(!0);break}},N=function(C){s._addTab(C),s._setActiveRoute(C),Z(()=>{g(r.value[s.state.activeIndex])})};return de(async C=>{N(C)}),G(()=>{N(i.currentRoute.value),new $e(f.value)}),t({closeAllTab:L,closeTabByPath:C=>{for(const M in s.state.tabsView)if(s.state.tabsView[M].fullPath==C){$(s.state.tabsView[M]);break}},updateTabTitle:(C,M)=>{s._updateTabTitle(C,M),Z(()=>{g(r.value[s.state.activeIndex])})}}),(C,M)=>{const z=m("Icon");return c(),B("div",{class:"nav-tabs",ref_key:"tabScrollbarRef",ref:f},[(c(!0),B(K,null,te(e(s).state.tabsView,(E,w)=>(c(),B("div",{onClick:v=>a(E),onContextmenu:ue(v=>T(E,v),["prevent"]),class:U(["ba-nav-tab",e(s).state.activeIndex==w?"active":""]),ref_for:!0,ref:e(r).set,key:w},[I(h(E.meta.title)+" ",1),o(Le,{onAfterLeave:M[0]||(M[0]=v=>g(e(r)[e(s).state.activeIndex])),name:"el-fade-in"},{default:n(()=>[O(o(z,{class:"close-icon",onClick:ue(v=>$(E),["stop"]),size:"15",name:"el-icon-Close"},null,8,["onClick"]),[[Ge,e(s).state.tabsView.length>1]])]),_:2},1024)],42,Et))),128)),d("div",{style:ne(p),class:"nav-tabs-active-box"},null,4),o(Nt,{ref_key:"contextmenuRef",ref:_,items:x.contextmenuItems,onMenuClick:S},null,8,["items"])],512)}}}),lt=F(Ut,[["__scopeId","data-v-a252f3cb"]]),Ke=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Q=(()=>{if(typeof document>"u")return!1;const y=Ke[0],t={};for(const l of Ke)if((l==null?void 0:l[1])in document){for(const[u,s]of l.entries())t[y[u]]=s;return t}return!1})(),je={change:Q.fullscreenchange,error:Q.fullscreenerror};let W={request(y=document.documentElement,t){return new Promise((l,i)=>{const u=()=>{W.off("change",u),l()};W.on("change",u);const s=y[Q.requestFullscreen](t);s instanceof Promise&&s.then(u).catch(i)})},exit(){return new Promise((y,t)=>{if(!W.isFullscreen){y();return}const l=()=>{W.off("change",l),y()};W.on("change",l);const i=document[Q.exitFullscreen]();i instanceof Promise&&i.then(l).catch(t)})},toggle(y,t){return W.isFullscreen?W.exit():W.request(y,t)},onchange(y){W.on("change",y)},onerror(y){W.on("error",y)},on(y,t){const l=je[y];l&&document.addEventListener(l,t,!1)},off(y,t){const l=je[y];l&&document.removeEventListener(l,t,!1)},raw:Q};Object.defineProperties(W,{isFullscreen:{get:()=>!!document[Q.fullscreenElement]},element:{enumerable:!0,get:()=>document[Q.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[Q.fullscreenEnabled]}});Q||(W={isEnabled:!1});const fe=W,qt={},Ht={class:"theme-toggle-content"},Ot={class:"switch"},Wt={class:"switch-action"};function Kt(y,t){const l=m("Icon");return c(),B("div",Ht,[d("div",Ot,[d("div",Wt,[o(l,{name:"local-dark",color:"#f2f2f2",size:"13px",class:"switch-icon dark-icon"}),o(l,{name:"local-light",color:"#303133",size:"13px",class:"switch-icon light-icon"})])])])}const jt=F(qt,[["render",Kt],["__scopeId","data-v-62d134a8"]]),Xt={class:"layout-config-drawer"},Yt={class:"layout-mode-styles-box"},Jt={class:"layout-mode-box-style"},Zt={class:"layout-mode-style-name"},Gt={class:"layout-mode-style-name"},Qt={class:"layout-mode-style-name"},eo={class:"layout-mode-style-name"},to={class:"layout-config-global"},oo={class:"layout-config-aside"},ao={class:"layout-config-aside"},lo={class:"ba-center"},no=D({__name:"config",setup(y){const{t}=ie.useI18n(),l=q(),i=H(),u=Qe(),s=(p,a)=>{l.setLayout(a,p)},b=(p,a)=>{if(p===null)return;const g=l.layout[a];l.layout.isDark?g[1]=p:g[0]=p,l.setLayout(a,g)},f=p=>{le.set(ce,{layoutMode:p,menuCollapse:l.layout.menuCollapse}),l.setLayoutMode(p)},r=(p,a)=>{l.setLayout(a,p);const g=i.state.tabsViewRoutes;i.setTabsViewRoutes([]),Z(()=>{i.setTabsViewRoutes(g)})},_=()=>{l.setLayout("showDrawer",!1)},x=()=>{ee.remove(rt),le.remove(ce),u.go(0)};return(p,a)=>{const g=m("el-divider"),V=m("el-col"),$=m("el-row"),R=m("el-form-item"),L=m("el-option"),T=m("el-select"),S=m("el-color-picker"),N=m("el-switch"),Y=m("el-input"),ae=m("el-button"),C=m("el-popconfirm"),M=m("el-form"),z=m("el-scrollbar"),E=m("el-drawer");return c(),B("div",Xt,[o(E,{"model-value":e(l).layout.showDrawer,title:e(t)("layouts.Layout configuration"),size:"310px",onClose:_},{default:n(()=>[o(z,{class:"layout-mode-style-scrollbar"},{default:n(()=>[o(M,{ref:"formRef",model:e(l).layout},{default:n(()=>[d("div",Yt,[o(g,{"border-style":"dashed"},{default:n(()=>[I(h(e(t)("layouts.Layout mode")),1)]),_:1}),d("div",Jt,[o($,{class:"layout-mode-box-style-row",gutter:10},{default:n(()=>[o(V,{span:12},{default:n(()=>[d("div",{onClick:a[0]||(a[0]=w=>f("Default")),class:U(["layout-mode-style default",e(l).layout.layoutMode=="Default"?"active":""])},[a[21]||(a[21]=d("div",{class:"layout-mode-style-box"},[d("div",{class:"layout-mode-style-aside"}),d("div",{class:"layout-mode-style-container-box"},[d("div",{class:"layout-mode-style-header"}),d("div",{class:"layout-mode-style-container"})])],-1)),d("div",Zt,h(e(t)("layouts.default")),1)],2)]),_:1}),o(V,{span:12},{default:n(()=>[d("div",{onClick:a[1]||(a[1]=w=>f("Classic")),class:U(["layout-mode-style classic",e(l).layout.layoutMode=="Classic"?"active":""])},[a[22]||(a[22]=d("div",{class:"layout-mode-style-box"},[d("div",{class:"layout-mode-style-aside"}),d("div",{class:"layout-mode-style-container-box"},[d("div",{class:"layout-mode-style-header"}),d("div",{class:"layout-mode-style-container"})])],-1)),d("div",Gt,h(e(t)("layouts.classic")),1)],2)]),_:1})]),_:1}),o($,{gutter:10},{default:n(()=>[o(V,{span:12},{default:n(()=>[d("div",{onClick:a[2]||(a[2]=w=>f("Streamline")),class:U(["layout-mode-style streamline",e(l).layout.layoutMode=="Streamline"?"active":""])},[a[23]||(a[23]=d("div",{class:"layout-mode-style-box"},[d("div",{class:"layout-mode-style-container-box"},[d("div",{class:"layout-mode-style-header"}),d("div",{class:"layout-mode-style-container"})])],-1)),d("div",Qt,h(e(t)("layouts.Single column")),1)],2)]),_:1}),o(V,{span:12},{default:n(()=>[d("div",{onClick:a[3]||(a[3]=w=>f("Double")),class:U(["layout-mode-style double",e(l).layout.layoutMode=="Double"?"active":""])},[a[24]||(a[24]=d("div",{class:"layout-mode-style-box"},[d("div",{class:"layout-mode-style-aside"}),d("div",{class:"layout-mode-style-container-box"},[d("div",{class:"layout-mode-style-header"}),d("div",{class:"layout-mode-style-container"})])],-1)),d("div",eo,h(e(t)("layouts.Double column")),1)],2)]),_:1})]),_:1})]),o(g,{"border-style":"dashed"},{default:n(()=>[I(h(e(t)("layouts.overall situation")),1)]),_:1}),d("div",to,[o(R,{size:"large",label:e(t)("layouts.Dark mode")},{default:n(()=>[o(jt,{onClick:a[4]||(a[4]=w=>e(St)())})]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Background page switching animation")},{default:n(()=>[o(T,{onChange:a[5]||(a[5]=w=>s(w,"mainAnimation")),"model-value":e(l).layout.mainAnimation,placeholder:e(t)("layouts.Please select an animation name")},{default:n(()=>[o(L,{label:"slide-right",value:"slide-right"}),o(L,{label:"slide-left",value:"slide-left"}),o(L,{label:"el-fade-in-linear",value:"el-fade-in-linear"}),o(L,{label:"el-fade-in",value:"el-fade-in"}),o(L,{label:"el-zoom-in-center",value:"el-zoom-in-center"}),o(L,{label:"el-zoom-in-top",value:"el-zoom-in-top"}),o(L,{label:"el-zoom-in-bottom",value:"el-zoom-in-bottom"})]),_:1},8,["model-value","placeholder"])]),_:1},8,["label"])]),o(g,{"border-style":"dashed"},{default:n(()=>[I(h(e(t)("layouts.sidebar")),1)]),_:1}),d("div",oo,[o(R,{label:e(t)("layouts.Side menu bar background color")},{default:n(()=>[o(S,{onChange:a[6]||(a[6]=w=>b(w,"menuBackground")),"model-value":e(l).getColorVal("menuBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu text color")},{default:n(()=>[o(S,{onChange:a[7]||(a[7]=w=>b(w,"menuColor")),"model-value":e(l).getColorVal("menuColor")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu active item background color")},{default:n(()=>[o(S,{onChange:a[8]||(a[8]=w=>b(w,"menuActiveBackground")),"model-value":e(l).getColorVal("menuActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu active item text color")},{default:n(()=>[o(S,{onChange:a[9]||(a[9]=w=>b(w,"menuActiveColor")),"model-value":e(l).getColorVal("menuActiveColor")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Show side menu top bar (logo bar)")},{default:n(()=>[o(N,{onChange:a[10]||(a[10]=w=>s(w,"menuShowTopBar")),"model-value":e(l).layout.menuShowTopBar},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu top bar background color")},{default:n(()=>[o(S,{onChange:a[11]||(a[11]=w=>b(w,"menuTopBarBackground")),"model-value":e(l).getColorVal("menuTopBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu width (when expanded)")},{default:n(()=>[o(Y,{onInput:a[12]||(a[12]=w=>s(w,"menuWidth")),type:"number",step:10,"model-value":e(l).layout.menuWidth},{append:n(()=>a[25]||(a[25]=[I("px")])),_:1},8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu default icon")},{default:n(()=>[o(Tt,{onChange:a[13]||(a[13]=w=>r(w,"menuDefaultIcon")),"model-value":e(l).layout.menuDefaultIcon},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu horizontal collapse")},{default:n(()=>[o(N,{onChange:a[14]||(a[14]=w=>s(w,"menuCollapse")),"model-value":e(l).layout.menuCollapse},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu accordion")},{default:n(()=>[o(N,{onChange:a[15]||(a[15]=w=>s(w,"menuUniqueOpened")),"model-value":e(l).layout.menuUniqueOpened},null,8,["model-value"])]),_:1},8,["label"])]),o(g,{"border-style":"dashed"},{default:n(()=>[I(h(e(t)("layouts.Top bar")),1)]),_:1}),d("div",ao,[o(R,{label:e(t)("layouts.Top bar background color")},{default:n(()=>[o(S,{onChange:a[16]||(a[16]=w=>b(w,"headerBarBackground")),"model-value":e(l).getColorVal("headerBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Top bar text color")},{default:n(()=>[o(S,{onChange:a[17]||(a[17]=w=>b(w,"headerBarTabColor")),"model-value":e(l).getColorVal("headerBarTabColor")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Background color when hovering over the top bar")},{default:n(()=>[o(S,{onChange:a[18]||(a[18]=w=>b(w,"headerBarHoverBackground")),"model-value":e(l).getColorVal("headerBarHoverBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Top bar menu active item background color")},{default:n(()=>[o(S,{onChange:a[19]||(a[19]=w=>b(w,"headerBarTabActiveBackground")),"model-value":e(l).getColorVal("headerBarTabActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Top bar menu active item text color")},{default:n(()=>[o(S,{onChange:a[20]||(a[20]=w=>b(w,"headerBarTabActiveColor")),"model-value":e(l).getColorVal("headerBarTabActiveColor")},null,8,["model-value"])]),_:1},8,["label"])]),o(C,{onConfirm:x,title:e(t)("layouts.Are you sure you want to restore all configurations to the default values?")},{reference:n(()=>[d("div",lo,[o(ae,{class:"w80",type:"info"},{default:n(()=>[I(h(e(t)("layouts.Restore default")),1)]),_:1})])]),_:1},8,["title"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title"])])}}}),so=F(no,[["__scopeId","data-v-64de73d3"]]),ro={class:"command"},uo={class:"task-opt"},co=["onClick"],io={class:"terminal-buttons"},mo={class:"config-buttons"},po=D({__name:"index",setup(y){const{t}=ie.useI18n(),l=Re(),i=_e(),u=j({registryLoading:!1,registryLoadingType:"npm",packageManagerLoading:!1}),s=p=>{let a=t("terminal.unknown"),g="info";switch(p){case P.Waiting:a=t("terminal.Waiting for execution"),g="info";break;case P.Connecting:a=t("terminal.Connecting"),g="warning";break;case P.Executing:a=t("terminal.Executing"),g="warning";break;case P.Success:a=t("terminal.Successful execution"),g="success";break;case P.Failed:a=t("terminal.Execution failed"),g="danger";break;case P.Unknown:a=t("terminal.Unknown execution result"),g="danger";break}return{statusText:a,statusType:g}},b=(p,a,g=!0,V="",$=()=>{})=>{a?l.addTaskPM(p,g,V,$):l.addTask(p,g,V,$),Z(()=>{i.value&&i.value.wrapRef&&i.value.setScrollTop(i.value.wrapRef.scrollHeight)})},f=()=>{He.confirm(t("terminal.Are you sure you want to republish?"),t("Reminder"),{confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{b("web-build",!0,!0,"",()=>{})})},r=p=>{u.packageManagerLoading=!0,ut({manager:p}).then(a=>{a.code==1&&l.changePackageManager(p)}).finally(()=>{u.packageManagerLoading=!1})},_=(p,a)=>{const g=a=="npm"?l.state.npmRegistry:l.state.composerRegistry;l.changeRegistry(p,a),u.registryLoading=!0,u.registryLoadingType=a,l.addTask(`set-${a}-registry.${p}`,!1,"",V=>{u.registryLoading=!1,(V==P.Failed||V==P.Unknown)&&He.confirm(t("terminal.Failed to modify the source command, Please try again manually"),t("Reminder"),{confirmButtonText:t("Confirm"),showCancelButton:!1,type:"warning"}).then(()=>{l.changeRegistry(g,a)})})},x=p=>{let a={};return p=="npm"?a={npm:"npm",taobao:"taobao",tencent:"tencent"}:p=="composer"&&(a={composer:"composer",huawei:"huawei",aliyun:"aliyun",tencent:"tencent",kkame:"kkame"}),l.state[p=="npm"?"npmRegistry":"composerRegistry"]=="unknown"&&(a.unknown=t("Unknown")),a};return G(()=>{l.init()}),(p,a)=>{const g=m("el-alert"),V=m("el-tag"),$=m("el-button"),R=m("Icon"),L=m("el-card"),T=m("el-timeline-item"),S=m("el-timeline"),N=m("el-empty"),Y=m("el-dropdown-item"),ae=m("el-dropdown-menu"),C=m("el-dropdown"),M=m("el-dialog"),z=m("el-form"),E=Me("blur"),w=Me("loading");return c(),B("div",null,[o(M,{modelValue:e(l).state.show,"onUpdate:modelValue":a[6]||(a[6]=v=>e(l).state.show=v),title:e(t)("terminal.Terminal"),class:"ba-terminal-dialog main-dialog"},{default:n(()=>[o(e(et),{ref_key:"terminalScrollbarRef",ref:i,"max-height":500,class:"terminal-scrollbar"},{default:n(()=>[e(l).state.phpDevelopmentServer?A("",!0):(c(),k(g,{key:0,class:"terminal-warning-alert",title:e(t)("terminal.The current terminal is not running under the installation service, and some commands may not be executed"),type:"error"},null,8,["title"])),e(l).state.taskList.length?(c(),k(S,{key:1,class:"terminal-timeline"},{default:n(()=>[(c(!0),B(K,null,te(e(l).state.taskList,(v,se)=>(c(),k(T,{key:se,class:U(["task-item","task-status-"+v.status]),type:s(v.status).statusType,center:"",timestamp:v.createTime,placement:"top"},{default:n(()=>[o(L,null,{default:n(()=>[d("div",null,[o(V,{type:s(v.status).statusType},{default:n(()=>[I(h(s(v.status).statusText),1)]),_:2},1032,["type"]),(v.status==e(P).Failed||v.status==e(P).Unknown)&&v.blockOnFailure?(c(),k(V,{key:0,class:"block-on-failure-tag",type:"warning"},{default:n(()=>[I(h(e(t)("terminal.Failure to execute this command will block the execution of the queue")),1)]),_:1})):A("",!0),v.status==e(P).Executing||v.status==e(P).Connecting?(c(),k(V,{key:1,class:"block-on-failure-tag",type:"danger"},{default:n(()=>[I(h(e(t)("terminal.Do not refresh the browser")),1)]),_:1})):A("",!0),d("span",ro,h(v.command),1),d("div",uo,[v.status==e(P).Failed||v.status==e(P).Unknown?O((c(),k($,{key:0,title:e(t)("Retry"),size:"small",type:"warning",icon:"el-icon-RefreshRight",circle:"",onClick:me=>e(l).retryTask(se)},null,8,["title","onClick"])),[[E]]):A("",!0),O(o($,{onClick:me=>e(l).delTask(se),title:e(t)("Delete"),size:"small",type:"danger",icon:"el-icon-Delete",circle:""},null,8,["onClick","title"]),[[E]])])]),v.status!=e(P).Waiting?(c(),B(K,{key:0},[v.status!=e(P).Connecting&&v.status!=e(P).Executing?(c(),B("div",{key:0,onClick:me=>e(l).setTaskShowMessage(se),class:"toggle-message-display"},[d("span",null,h(e(t)("terminal.Command run log")),1),o(R,{name:v.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,co)):A("",!0),v.status==e(P).Connecting||v.status==e(P).Executing||v.status>e(P).Executing&&v.showMessage?(c(),B("div",{key:1,class:U(["exec-message","exec-message-"+v.uuid])},[(c(!0),B(K,null,te(v.message,(me,nt)=>(c(),B("pre",{key:nt,class:"message-item"},h(me),1))),128))],2)):A("",!0)],64)):A("",!0)]),_:2},1024)]),_:2},1032,["class","type","timestamp"]))),128))]),_:1})):(c(),k(N,{key:2,"image-size":80,description:e(t)("terminal.No mission yet")},null,8,["description"]))]),_:1},512),d("div",io,[O((c(),k($,{class:"terminal-menu-item",icon:"el-icon-MagicStick",onClick:a[0]||(a[0]=v=>b("test",!0,!1))},{default:n(()=>[I(h(e(t)("terminal.Test command")),1)]),_:1})),[[E]]),o(C,{class:"terminal-menu-item"},{dropdown:n(()=>[o(ae,null,{default:n(()=>[e(l).state.packageManager!="none"?(c(),k(Y,{key:0,onClick:a[1]||(a[1]=v=>b("web-install",!0))},{default:n(()=>[I(h(e(l).state.packageManager)+" run install ",1)]),_:1})):A("",!0),o(Y,{onClick:a[2]||(a[2]=v=>b("composer.update",!1))},{default:n(()=>a[9]||(a[9]=[I("composer update")])),_:1})]),_:1})]),default:n(()=>[O((c(),k($,{icon:"el-icon-Download"},{default:n(()=>[I(h(e(t)("terminal.Install dependent packages")),1)]),_:1})),[[E]])]),_:1}),O((c(),k($,{class:"terminal-menu-item",icon:"el-icon-Sell",onClick:a[3]||(a[3]=v=>f())},{default:n(()=>[I(h(e(t)("terminal.Republish")),1)]),_:1})),[[E]]),O((c(),k($,{class:"terminal-menu-item",icon:"el-icon-Delete",onClick:a[4]||(a[4]=v=>e(l).clearSuccessTask())},{default:n(()=>[I(h(e(t)("terminal.Clean up task list")),1)]),_:1})),[[E]]),O((c(),k($,{class:"terminal-menu-item",icon:"el-icon-Tools",onClick:a[5]||(a[5]=v=>e(l).toggleConfigDialog())},{default:n(()=>[I(h(e(t)("terminal.Terminal settings")),1)]),_:1})),[[E]])])]),_:1},8,["modelValue","title"]),o(M,{onClose:a[8]||(a[8]=v=>e(l).toggleConfigDialog(!1)),"model-value":e(l).state.showConfig,class:"ba-terminal-dialog",title:e(t)("terminal.Terminal settings")},{default:n(()=>[o(z,{"label-position":"left","label-width":"140"},{default:n(()=>[O((c(),k(pe,{label:"NPM "+e(t)("terminal.Source"),"model-value":e(l).state.npmRegistry,key:e(l).state.npmRegistry,type:"select","input-attr":{border:!0,content:x("npm"),teleported:!1,onChange:v=>_(v,"npm")}},null,8,["label","model-value","input-attr"])),[[w,u.registryLoading&&u.registryLoadingType=="npm"]]),O((c(),k(pe,{label:"Composer "+e(t)("terminal.Source"),"model-value":e(l).state.composerRegistry,key:e(l).state.composerRegistry,type:"select","input-attr":{border:!0,content:x("composer"),teleported:!1,onChange:v=>_(v,"composer")}},null,8,["label","model-value","input-attr"])),[[w,u.registryLoading&&u.registryLoadingType=="composer"]]),O(o(pe,{label:e(t)("terminal.NPM package manager"),"model-value":e(l).state.packageManager,type:"select","input-attr":{border:!0,content:{npm:"NPM",cnpm:"CNPM",pnpm:"PNPM",yarn:"YARN",ni:"NI",none:e(t)("terminal.Manual execution")},teleported:!1,onChange:v=>r(v)},tip:e(t)("terminal.NPM package manager tip")},null,8,["label","model-value","input-attr","tip"]),[[w,u.packageManagerLoading]]),o(pe,{label:e(t)("terminal.Clear successful task"),"model-value":e(l).state.automaticCleanupTask,type:"radio","input-attr":{border:!0,content:{0:e(t)("Disable"),1:e(t)("Enable")},onChange:e(l).changeAutomaticCleanupTask},tip:e(t)("terminal.Clear successful task tip")},null,8,["label","model-value","input-attr","tip"])]),_:1}),d("div",mo,[o($,{onClick:a[7]||(a[7]=v=>e(l).toggleConfigDialog(!1))},{default:n(()=>[I(h(e(t)("terminal.Back to terminal")),1)]),_:1})])]),_:1},8,["model-value","title"])])}}}),fo=F(po,[["__scopeId","data-v-3d8b491f"]]),Pe=_t("Badoucms",{state:()=>({version:"1.0.0",apiUrl:"",isUpdate:!1,upgradeDialog:!1}),actions:{dataFill(y){this.$state=y},setIsUpdate(y){this.isUpdate=y}}}),he="/admin/Upgrade/";function _o(){return ye({url:he+"version",method:"get"},{showCodeMessage:!1})}function vo(){return ye({url:he+"getList",method:"get"})}function go(){return ye({url:he+"backup",method:"get",timeout:60*1e3},{loading:!0},{text:"备份中……",background:"rgba(0, 0, 0, 0.7)"})}function yo(y={}){return ye({url:he+"update",method:"post",data:y,timeout:60*1e3},{loading:!0},{text:"升级中……",background:"rgba(0, 0, 0, 0.7)"})}const bo={class:"command"},ho={class:"task-opt"},Co=["onClick"],ko={key:0,class:"exec-message"},wo=D({__name:"index",setup(y){const{t}=ie.useI18n(),l=Pe(),i=j({list:[]}),u=()=>{l.upgradeDialog=!1},s=()=>{vo().then(f=>{f.code==1&&(i.list=f.data.map(r=>({...r,showMessage:!1})))})},b=f=>{go().then(r=>{r.code==1&&yo({version:f}).then(_=>{_.code==1&&(l.upgradeDialog=!1,Ie.success({title:t("upgrade.Upgrade success"),message:t("upgrade.Upgrade success")}),setTimeout(()=>{window.location.reload()},1e3))})})};return(f,r)=>{const _=m("el-alert"),x=m("el-tag"),p=m("el-button"),a=m("Icon"),g=m("el-card"),V=m("el-timeline-item"),$=m("el-timeline"),R=m("el-empty"),L=m("el-dialog"),T=Me("blur");return c(),B("div",null,[o(L,{modelValue:e(l).upgradeDialog,"onUpdate:modelValue":r[0]||(r[0]=S=>e(l).upgradeDialog=S),title:e(t)("upgrade.Upgrade"),onOpen:s,onClose:u,class:"ba-terminal-dialog main-dialog"},{default:n(()=>[o(e(et),{ref:"terminalScrollbarRef","max-height":500,class:"terminal-scrollbar"},{default:n(()=>[o(_,{class:"terminal-warning-alert",title:e(t)("upgrade.Please back up your data and programs before upgrading"),type:"error",closable:!1},null,8,["title"]),i.list.length>0?(c(),k($,{key:0,class:"terminal-timeline"},{default:n(()=>[(c(!0),B(K,null,te(i.list,(S,N)=>(c(),k(V,{key:N,class:"task-item",type:"success",center:"",placement:"top"},{default:n(()=>[o(g,null,{default:n(()=>[d("div",null,[o(x,{type:"success"},{default:n(()=>[I(h(S.software.title),1)]),_:2},1024),d("span",bo,"V"+h(S==null?void 0:S.version),1),d("div",ho,[O((c(),k(p,{title:e(t)("upgrade.Start upgrading"),size:"small",type:"primary",onClick:Y=>b(S.version)},{default:n(()=>[I(h(e(t)("upgrade.Start upgrading")),1)]),_:2},1032,["title","onClick"])),[[T]])])]),d("div",{onClick:Y=>S.showMessage=!S.showMessage,class:"toggle-message-display"},[r[1]||(r[1]=d("span",null,"更新日志",-1)),o(a,{name:S!=null&&S.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,Co),S!=null&&S.showMessage?(c(),B("div",ko,h(S==null?void 0:S.remark),1)):A("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(c(),k(R,{key:1,"image-size":80,description:e(t)("upgrade.The current program is the latest")},null,8,["description"]))]),_:1},512),r[2]||(r[2]=d("div",{class:"terminal-buttons"},null,-1))]),_:1},8,["modelValue","title"])])}}}),xo=F(wo,[["__scopeId","data-v-a9c165a8"]]),To={class:"el-popover__title"},So={class:"reload-hot-server-content"},Bo={class:"reload-hot-server-buttons"},Mo=["href"],Vo={class:"nav-menu-item"},$o={class:"admin-name"},Ro={class:"admin-info-base"},Io={class:"admin-info-other"},Ao={class:"admin-info-name"},Lo={class:"admin-info-lasttime"},Do={class:"admin-info-footer"},zo=D({__name:"navMenus",setup(y){X(L=>({"7926e862":e(u).getColorVal("headerBarBackground"),"8e4e517c":e(u).getColorVal("headerBarTabColor"),"71b74304":e(u).getColorVal("headerBarHoverBackground")}));const{t}=ie.useI18n(),l=it(),i=Ye(),u=q(),s=Re(),b=Ve(),f=Pe(),r=_e(),_=j({isFullScreen:!1,currentNavMenu:"",showLayoutDrawer:!1,showAdminInfoPopover:!1}),x=()=>{f.upgradeDialog=!0},p=(L,T)=>{_.currentNavMenu=L?T:""},a=L=>{var T;L=="cancel"&&((T=r.value)==null||T.hide())},g=()=>{if(!fe.isEnabled)return vt.warning(t("layouts.Full screen is not supported")),!1;fe.toggle(),fe.onchange(()=>{_.isFullScreen=fe.isFullscreen})},V=()=>{_.showAdminInfoPopover=!1,ve({name:"routine/adminInfo"})},$=()=>{Bt().then(()=>{ee.remove(Te),Je.go(0)})},R=L=>{if(L=="storage"||L=="all"){const T=ee.get(Te),S=ee.get(Ue);if(le.clear(),ee.clear(),ee.set(Te,T),ee.set(Ue,S),L=="storage")return}dt(L).then(()=>{})};return(L,T)=>{const S=m("el-button"),N=m("Icon"),Y=m("el-popover"),ae=m("el-tag"),C=m("el-badge"),M=m("el-dropdown-item"),z=m("el-dropdown-menu"),E=m("el-dropdown"),w=m("el-avatar");return c(),B("div",{class:U(["nav-menus",e(u).layout.layoutMode])},[e(Ne).dirtyFile?(c(),k(Y,{key:0,ref_key:"reloadHotServerPopover",ref:r,onShow:T[2]||(T[2]=v=>p(!0,"reloadHotServer")),onHide:T[3]||(T[3]=v=>p(!1,"reloadHotServer")),width:360},{reference:n(()=>[d("div",{class:U(["nav-menu-item",_.currentNavMenu=="reloadHotServer"?"hover":""])},[o(N,{color:"var(--el-color-danger)",class:"nav-menu-icon",name:"el-icon-Warning",size:"18"})],2)]),default:n(()=>[d("div",null,[d("div",To,h(e(t)("vite.Reload hot server title")),1),d("div",So,[d("p",null,[d("span",null,h(e(t)("vite.Reload hot server tips 1")),1),d("span",null,"【"+h(e(t)(`vite.Close type ${e(Ne).closeType}`))+"】",1),d("span",null,h(e(t)("vite.Reload hot server tips 2")),1)]),d("p",null,h(e(t)("vite.Reload hot server tips 3")),1),d("div",Bo,[o(S,{onClick:T[0]||(T[0]=v=>a("cancel"))},{default:n(()=>[I(h(e(t)("vite.Later")),1)]),_:1}),o(S,{onClick:T[1]||(T[1]=v=>a("reload")),type:"primary"},{default:n(()=>[I(h(e(t)("vite.Restart hot update")),1)]),_:1})])])])]),_:1},512)):A("",!0),d("a",{href:e(l),class:"h100",target:"_blank"},[d("div",Vo,[o(N,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Monitor",size:"18"},null,8,["color"])])],8,Mo),e(i).super?(c(),B("div",{key:1,onClick:x,class:"nav-menu-item pt2",style:{width:"70px"}},[o(C,{isDot:e(f).isUpdate},{default:n(()=>[o(ae,{type:"warning",round:""},{default:n(()=>[I("V"+h(e(f).version),1)]),_:1})]),_:1},8,["isDot"])])):A("",!0),o(E,{onVisibleChange:T[4]||(T[4]=v=>p(v,"lang")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:n(()=>[o(z,{class:"dropdown-menu-box"},{default:n(()=>[(c(!0),B(K,null,te(e(u).lang.langArray,v=>(c(),k(M,{key:v.name,onClick:se=>e(ct)(v.name)},{default:n(()=>[I(h(v.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:n(()=>[d("div",{class:U(["nav-menu-item pt2",_.currentNavMenu=="lang"?"hover":""])},[o(N,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),d("div",{onClick:g,class:U(["nav-menu-item",_.isFullScreen?"hover":""])},[_.isFullScreen?(c(),k(N,{key:0,color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-full-screen-cancel",size:"18"},null,8,["color"])):(c(),k(N,{key:1,color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-FullScreen",size:"18"},null,8,["color"]))],2),e(i).super?(c(),B("div",{key:2,onClick:T[5]||(T[5]=v=>e(s).toggle()),class:"nav-menu-item pt2"},[o(C,{"is-dot":e(s).state.showDot},{default:n(()=>[o(N,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-terminal",size:"26"},null,8,["color"])]),_:1},8,["is-dot"])])):A("",!0),e(i).super?(c(),k(E,{key:3,onVisibleChange:T[9]||(T[9]=v=>p(v,"clear")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:n(()=>[o(z,{class:"dropdown-menu-box"},{default:n(()=>[o(M,{onClick:T[6]||(T[6]=v=>R("tp"))},{default:n(()=>[I(h(e(t)("utils.Clean up system cache")),1)]),_:1}),o(M,{onClick:T[7]||(T[7]=v=>R("storage"))},{default:n(()=>[I(h(e(t)("utils.Clean up browser cache")),1)]),_:1}),o(M,{onClick:T[8]||(T[8]=v=>R("all")),divided:""},{default:n(()=>[I(h(e(t)("utils.Clean up all cache")),1)]),_:1})]),_:1})]),default:n(()=>[d("div",{class:U(["nav-menu-item",_.currentNavMenu=="clear"?"hover":""])},[o(N,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Delete",size:"18"},null,8,["color"])],2)]),_:1})):A("",!0),e(b).userInitialize?(c(),k(Y,{key:4,onShow:T[10]||(T[10]=v=>p(!0,"adminInfo")),onHide:T[11]||(T[11]=v=>p(!1,"adminInfo")),placement:"bottom-end","hide-after":0,width:260,trigger:"click","popper-class":"admin-info-box",visible:_.showAdminInfoPopover,"onUpdate:visible":T[12]||(T[12]=v=>_.showAdminInfoPopover=v)},{reference:n(()=>[d("div",{class:U(["admin-info",_.currentNavMenu=="adminInfo"?"hover":""])},[o(w,{size:25,src:e(Ee)(e(i).avatar)},null,8,["src"]),d("div",$o,h(e(i).nickname),1)],2)]),default:n(()=>[d("div",null,[d("div",Ro,[o(w,{size:70,src:e(Ee)(e(i).avatar)},null,8,["src"]),d("div",Io,[d("div",Ao,h(e(i).nickname),1),d("div",Lo,h(e(i).last_login_time),1)])]),d("div",Do,[o(S,{onClick:V,type:"primary",plain:""},{default:n(()=>[I(h(e(t)("layouts.personal data")),1)]),_:1}),o(S,{onClick:$,type:"danger",plain:""},{default:n(()=>[I(h(e(t)("layouts.cancellation")),1)]),_:1})])])]),_:1},8,["visible"])):A("",!0),d("div",{onClick:T[13]||(T[13]=v=>e(u).setLayout("showDrawer",!0)),class:"nav-menu-item"},[o(N,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"fa fa-cogs",size:"18"},null,8,["color"])]),o(so),o(fo),o(xo)],2)}}}),Ce=F(zo,[["__scopeId","data-v-663d1143"]]),Fo={class:"nav-bar"},Po=D({__name:"default",setup(y){X(l=>({"67abd059":e(t).getColorVal("headerBarTabColor"),f0bff19a:e(t).getColorVal("headerBarTabActiveColor"),"00d66b4c":e(t).getColorVal("headerBarTabActiveBackground")}));const t=q();return(l,i)=>(c(),B("div",Fo,[o(lt,{ref_key:"layoutNavTabsRef",ref:Ze},null,512),o(Ce)]))}}),No=F(Po,[["__scopeId","data-v-528ceb49"]]),Eo={class:"nav-bar"},Uo={key:0,class:"unfold"},qo=D({__name:"classic",setup(y){X(i=>({"737cd666":e(t).getColorVal("headerBarBackground"),"0af9a26d":e(t).getColorVal("headerBarTabColor"),"88760b72":e(t).getColorVal("headerBarTabActiveColor"),"7cfea179":e(t).getColorVal("headerBarHoverBackground"),e21b7690:e(t).getColorVal("headerBarTabActiveBackground")}));const t=q(),l=()=>{wt("ba-aside-menu-shade",()=>{t.setLayout("menuCollapse",!0)}),t.setLayout("menuCollapse",!1)};return(i,u)=>{const s=m("Icon");return c(),B("div",Eo,[e(t).layout.shrink&&e(t).layout.menuCollapse?(c(),B("div",Uo,[o(s,{onClick:l,name:"fa fa-indent",color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["color"])])):A("",!0),e(t).layout.shrink?A("",!0):(c(),k(lt,{key:1,ref_key:"layoutNavTabsRef",ref:Ze},null,512)),o(Ce)])}}}),Ho=F(qo,[["__scopeId","data-v-952ef580"]]),Oo={class:"layouts-menu-horizontal"},Wo={key:0,class:"menu-horizontal-logo"},Ko=D({__name:"menuHorizontal",setup(y){X(f=>({10033249:e(t).getColorVal("headerBarHoverBackground"),"36ec1512":e(t).getColorVal("menuBackground"),aa264ca6:e(t).getColorVal("menuColor"),"09c1c187":e(t).getColorVal("menuActiveColor"),bfdff510:e(t).getColorVal("menuActiveBackground")}));const t=q(),l=H(),i=oe(),u=j({defaultActive:""}),s=f=>{const r=l.getTabsViewDataByRoute(f);r&&(u.defaultActive=r.meta.matched)},b=()=>{Z(()=>{var r;let f=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!f)return!1;(r=J.value)==null||r.setScrollTop(f.offsetTop)})};return G(()=>{s(i),b(),new $e(J.value.wrapRef)}),de(f=>{s(f)}),(f,r)=>{const _=m("el-menu"),x=m("el-scrollbar");return c(),B("div",Oo,[e(t).layout.menuShowTopBar?(c(),B("div",Wo,[o(ot)])):A("",!0),o(x,{ref_key:"layoutMenuScrollbarRef",ref:J,class:"horizontal-menus-scrollbar"},{default:n(()=>[o(_,{ref_key:"layoutMenuRef",ref:ge,class:"menu-horizontal",mode:"horizontal","default-active":u.defaultActive},{default:n(()=>[o(be,{extends:{position:"horizontal",level:1},menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),o(Ce)])}}}),jo=F(Ko,[["__scopeId","data-v-7a8a4c48"]]),Xo={class:"layouts-menu-horizontal-double"},Yo=D({__name:"double",setup(y){X(f=>({"5bd171b2":e(t).getColorVal("menuBackground"),"2408190d":e(t).getColorVal("menuColor"),fcf00e32:e(t).getColorVal("menuActiveColor"),db352bd0:e(t).getColorVal("menuActiveBackground")}));const t=q(),l=H(),i=oe(),u=j({defaultActive:""}),s=f=>{const r=l.getTabsViewDataByRoute(f);r&&(u.defaultActive=r.meta.matched)},b=()=>{Z(()=>{var r;let f=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!f)return!1;(r=J.value)==null||r.setScrollTop(f.offsetTop)})};return G(()=>{s(i),b()}),de(f=>{s(f)}),(f,r)=>{const _=m("el-menu"),x=m("el-scrollbar");return c(),B("div",Xo,[o(x,{ref_key:"layoutMenuScrollbarRef",ref:J,class:"double-menus-scrollbar"},{default:n(()=>[o(_,{ref_key:"layoutMenuRef",ref:ge,class:"menu-horizontal",mode:"horizontal","default-active":u.defaultActive},{default:n(()=>[o(be,{extends:{position:"horizontal",level:1},menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),o(Ce)])}}}),Jo=F(Yo,[["__scopeId","data-v-6948fe22"]]),Zo=D({name:"layout/header",components:{DefaultNavBar:No,ClassicNavBar:Ho,StreamlineNavBar:jo,DoubleNavBar:Jo},__name:"header",setup(y){const t=q(),l=H();return(i,u)=>{const s=m("el-header");return e(l).state.tabFullScreen?A("",!0):(c(),k(s,{key:0,class:"layout-header"},{default:n(()=>[(c(),k(De(e(t).layout.layoutMode+"NavBar")))]),_:1}))}}}),ke=F(Zo,[["__scopeId","data-v-9014eea9"]]),Go=D({name:"layout/main",__name:"main",setup(y){const{proxy:t}=at(),l=oe(),i=q(),u=H(),s=j({componentKey:l.fullPath,keepAliveComponentNameList:[]}),b=function(r){if(r){if(s.keepAliveComponentNameList.find(x=>x===r))return;s.keepAliveComponentNameList.push(r)}},f=()=>{var r;if(u.state.activeRoute){const _=u.getTabsViewDataByRoute(u.state.activeRoute);_&&typeof((r=_.meta)==null?void 0:r.keepalive)=="string"&&b(_.meta.keepalive)}};return tt(()=>{t.eventBus.on("onTabViewRefresh",r=>{s.keepAliveComponentNameList=s.keepAliveComponentNameList.filter(_=>r.meta.keepalive!==_),s.componentKey="",Z(()=>{s.componentKey=r.fullPath,b(r.meta.keepalive)})}),t.eventBus.on("onTabViewClose",r=>{s.keepAliveComponentNameList=s.keepAliveComponentNameList.filter(_=>r.meta.keepalive!==_)})}),gt(()=>{t.eventBus.off("onTabViewRefresh"),t.eventBus.off("onTabViewClose")}),G(()=>{f()}),yt(()=>l.fullPath,()=>{s.componentKey=l.fullPath,f()}),(r,_)=>{const x=m("router-view"),p=m("el-scrollbar"),a=m("el-main");return c(),k(a,{class:"layout-main"},{default:n(()=>[o(p,{class:"layout-main-scrollbar",style:ne(e(mt)),ref_key:"layoutMainScrollbarRef",ref:pt},{default:n(()=>[o(x,null,{default:n(({Component:g})=>[o(Le,{name:e(i).layout.mainAnimation,mode:"out-in"},{default:n(()=>[(c(),k(bt,{include:s.keepAliveComponentNameList},[(c(),k(De(g),{key:s.componentKey}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})]),_:1},8,["style"])]),_:1})}}}),we=F(Go,[["__scopeId","data-v-93dd102f"]]),Qo=["title"],ea=D({__name:"closeFullScreen",setup(y){const t=H(),l=j({closeBoxTop:20});G(()=>{setTimeout(()=>{l.closeBoxTop=-30},300)});const i=()=>{l.closeBoxTop=20},u=()=>{l.closeBoxTop=-30},s=()=>{t.setFullScreen(!1)};return(b,f)=>{const r=m("Icon");return c(),B("div",{title:b.$t("layouts.Exit full screen"),onMouseover:ue(i,["stop"]),onMouseout:ue(u,["stop"])},[d("div",{onClick:ue(s,["stop"]),class:"close-full-screen",style:ne({top:l.closeBoxTop+"px"})},[o(r,{name:"el-icon-Close"})],4),f[0]||(f[0]=d("div",{class:"close-full-screen-on"},null,-1))],40,Qo)}}}),xe=F(ea,[["__scopeId","data-v-0aa634f1"]]),ta=D({__name:"default",setup(y){const t=H();return(l,i)=>{const u=m("el-container");return c(),B(K,null,[o(u,{class:"layout-container"},{default:n(()=>[o(Fe),o(u,{class:"content-wrapper"},{default:n(()=>[o(ke),o(we)]),_:1})]),_:1}),e(t).state.tabFullScreen?(c(),k(xe,{key:0})):A("",!0)],64)}}}),oa=F(ta,[["__scopeId","data-v-59d252c1"]]),aa=D({__name:"classic",setup(y){const t=H();return(l,i)=>{const u=m("el-container");return c(),B(K,null,[o(u,{class:"layout-container"},{default:n(()=>[o(Fe),o(u,{class:"content-wrapper"},{default:n(()=>[o(ke),o(we)]),_:1})]),_:1}),e(t).state.tabFullScreen?(c(),k(xe,{key:0})):A("",!0)],64)}}}),la=F(aa,[["__scopeId","data-v-fb349671"]]),na=D({__name:"streamline",setup(y){const t=H();return(l,i)=>{const u=m("el-container");return c(),B(K,null,[o(u,{class:"layout-container"},{default:n(()=>[o(u,{class:"content-wrapper"},{default:n(()=>[o(ke),o(we)]),_:1})]),_:1}),e(t).state.tabFullScreen?(c(),k(xe,{key:0})):A("",!0)],64)}}}),sa=F(na,[["__scopeId","data-v-fcdc1bd3"]]),ra=D({__name:"double",setup(y){const t=H();return(l,i)=>{const u=m("el-container");return c(),B(K,null,[o(u,{class:"layout-container"},{default:n(()=>[o(Fe),o(u,{class:"content-wrapper"},{default:n(()=>[o(ke),o(we)]),_:1})]),_:1}),e(t).state.tabFullScreen?(c(),k(xe,{key:0})):A("",!0)],64)}}}),ua=F(ra,[["__scopeId","data-v-d08319bd"]]),ya=D({components:{Default:oa,Classic:la,Streamline:sa,Double:ua},__name:"index",setup(y){const t=Re(),l=H(),i=q(),u=oe(),s=Ve(),b=Ye(),f=Pe(),r=j({autoMenuCollapseLock:!1});G(()=>{if(!b.token)return Je.push({name:"adminLogin"});_(),p(),Be(),re(window,"resize",Be)}),tt(()=>{x(),re(window,"resize",x)});const _=()=>{Mt().then(a=>{if(s.dataFill(a.data.siteConfig),t.changePackageManager(a.data.terminal.npmPackageManager),t.changePHPDevelopmentServer(a.data.terminal.phpDevelopmentServer),s.setInitialize(!0),f.dataFill(a.data.badoucms),Oe(a.data.adminInfo)||(b.dataFill(a.data.adminInfo),s.setUserInitialize(!0)),a.data.menus){if(xt(a.data.menus),u.params.to){const V=JSON.parse(u.params.to);if(V.path!=Xe){let $=Oe(V.query)?{}:V.query;ve({path:V.path,query:$});return}}let g=ze(l.state.tabsViewRoutes);g&&ve(g.path)}})},x=()=>{let a={layoutMode:i.layout.layoutMode,menuCollapse:i.layout.menuCollapse},g=le.get(ce);if(g||le.set(ce,a),document.body.clientWidth<1024)r.autoMenuCollapseLock||(r.autoMenuCollapseLock=!0,i.setLayout("menuCollapse",!0)),i.setLayout("shrink",!0),i.setLayoutMode("Classic");else{r.autoMenuCollapseLock=!1;let $=g||a;i.setLayout("menuCollapse",$.menuCollapse),i.setLayout("shrink",!1),i.setLayoutMode($.layoutMode)}},p=()=>{_o().then(a=>{a.code==1&&(f.setIsUpdate(!0),Ie({title:"新版本更新",type:"warning",message:Se("div",{style:"display: flex; align-items: center; gap: 8px"},[Se("span","发现新版本，请及时更新"),Se(ht,{type:"success",size:"small",round:!0,onClick:()=>{f.upgradeDialog=!0}},"立即升级")])}))})};return(a,g)=>(c(),k(De(e(i).layout.layoutMode)))}});export{ya as default};
