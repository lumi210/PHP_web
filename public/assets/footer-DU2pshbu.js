import{_ as H}from"./logo-CC6Ky0NS.js";import{i as W,h as B,q as p,W as Y,o as a,k as E,X as j,Y as V,x as t,Z as R,N as l,O as r,V as C,U as b,T as f,p as g,_ as P,M as J,$ as X,a as K,a0 as Z,m as k,n as Q}from"./vue-Cm_-Ome7.js";import{d as ee,r as ne,b as G,u as D,a as T,c as te,s as oe,_ as A,e as ae,f as se,g as re,l as le,h as ie}from"./index-BGkrm5xk.js";import{h as ue,o as q}from"./router-CV4C8fOg.js";const ce="/api/index/";function de(x,y){ee(()=>{if(ne.currentRoute.value.meta.initialize===!1)return;const u=G(),s=D();if(!u.isLogin()&&s.initialize||u.isLogin()&&s.userInitialize)return;const d=T();te({url:ce+"index",method:"get",params:{requiredLogin:y?1:0}}).then(n=>{ue(n.data.rules,n.data.menus),s.dataFill(n.data.site),d.setStatus(n.data.openMemberCenter),W(n.data.userInfo)||(n.data.userInfo.refresh_token=u.getToken("refresh"),u.dataFill(n.data.userInfo),s.setUserInitialize(!0)),n.data.openMemberCenter||d.setLayoutMode("Disable"),s.setInitialize(!0),oe(),typeof x=="function"&&x(n)})},200)()}const me=B({__name:"menuSub",props:{menus:{default:()=>[]},showIcon:{type:Boolean,default:!1}},setup(x){const y=x,u=s=>{var d;s.path=="/"||((d=s.meta)==null?void 0:d.type)=="menu_dir"||q(s)};return(s,d)=>{const n=p("Icon"),h=p("el-sub-menu"),U=p("el-menu-item"),v=Y("blur");return a(!0),E(V,null,j(y.menus,(c,L)=>{var $,w;return a(),E(V,{key:L},[t(W)(c.children)?R((a(),l(U,{key:1,onClick:m=>t(q)(c),index:"column-"+((w=c.meta)==null?void 0:w.id),class:P(c.name.replace(/[\/]/g,"-"))},{title:r(()=>{var m;return[b(f((m=c.meta)==null?void 0:m.title),1)]}),default:r(()=>{var m;return[s.showIcon?(a(),l(n,{key:0,name:(m=c.meta)==null?void 0:m.icon,color:"var(--el-text-color-primary)"},null,8,["name"])):C("",!0)]}),_:2},1032,["onClick","index","class"])),[[v]]):R((a(),l(h,{key:0,onClick:m=>u(c),index:`column-${($=c.meta)==null?void 0:$.id}`},{title:r(()=>{var m,S;return[s.showIcon?(a(),l(n,{key:0,name:(m=c.meta)==null?void 0:m.icon,color:"var(--el-text-color-primary)"},null,8,["name"])):C("",!0),b(" "+f((S=c.meta)==null?void 0:S.title),1)]}),default:r(()=>[g(F,{menus:c.children,"show-icon":s.showIcon},null,8,["menus","show-icon"])]),_:2},1032,["onClick","index"])),[[v]])],64)}),128)}}}),F=A(me,[["__scopeId","data-v-0badd86c"]]),fe={class:"header-user-box"},pe=["src"],_e=B({__name:"menu",props:{showIcon:{type:Boolean,default:!1}},setup(x){const y=J(),u=X(),s=ae(),d=G(),n=D(),h=T(),U=x,v=K({activeMenu:""}),c=e=>{if(e.path=="/")return v.activeMenu="index";const o=S(e);o?v.activeMenu="column-"+o:e.path.startsWith("/user")&&(v.activeMenu="user")},L=e=>{if($(n.headNav,e)||$(h.state.navUserMenus,e)||$(h.state.viewRoutes,e)){const o=v.activeMenu;v.activeMenu="",Q(()=>{v.activeMenu=o})}},$=(e,o)=>o.indexOf("language-switch")===0||o=="theme-switch"?!0:w(e,o),w=(e,o)=>{var i,I,N;for(const _ in e){if(`column-${(i=e[_].meta)==null?void 0:i.id}`==o)return((I=e[_].meta)==null?void 0:I.menu_type)=="link";if((N=e[_].children)!=null&&N.length)return w(e[_].children,o)}return!1},m=(e,o)=>{var I,N;let i=!1;for(const _ in e){if((I=e[_].meta)!=null&&I.id&&e[_].path==o.fullPath)return e[_].meta.id;if(e[_].children&&((N=e[_].children)!=null&&N.length)&&(i=m(e[_].children,o),i!==!1))return i}return i},S=e=>{const o=m(n.headNav,e);if(o!==!1)return o;const i=m(h.state.navUserMenus,e);return i!==!1?i:m(h.state.viewRoutes,e)};return c(y),Z(e=>{c(e)}),(e,o)=>{const i=p("Icon"),I=p("el-menu-item"),N=p("el-sub-menu"),_=p("el-menu"),z=Y("blur");return a(),l(_,{ref_key:"layoutMenuRef",ref:le,"default-active":v.activeMenu,onSelect:L},{default:r(()=>[R((a(),l(I,{onClick:o[0]||(o[0]=M=>t(u).push({name:"/"})),index:"index"},{title:r(()=>[b(f(e.$t("Home")),1)]),default:r(()=>[U.showIcon?(a(),l(i,{key:0,name:"fa fa-home",color:"var(--el-text-color-primary)"})):C("",!0)]),_:1})),[[z]]),g(F,{menus:t(n).headNav,"show-icon":e.showIcon},null,8,["menus","show-icon"]),t(h).state.open?(a(),E(V,{key:0},[t(d).isLogin()?R((a(),l(N,{key:0,onClick:o[3]||(o[3]=M=>e.$attrs.mode=="vertical"?"":t(u).push({name:"user"})),index:"user-box"},{title:r(()=>[k("div",fe,[k("img",{class:P(["header-user-avatar",e.$attrs.mode=="vertical"?"icon-header-user-avatar":""]),src:t(se)(t(d).avatar?t(d).avatar:"/static/images/avatar.png"),alt:""},null,10,pe),b(" "+f(t(d).nickname),1)])]),default:r(()=>[R((a(),l(I,{onClick:o[1]||(o[1]=M=>t(u).push({name:"user"})),index:"user"},{default:r(()=>[e.showIcon?(a(),l(i,{key:0,name:"fa fa-user-circle",color:"var(--el-text-color-primary)"})):C("",!0),b(" "+f(e.$t("Member Center")),1)]),_:1})),[[z]]),g(F,{menus:t(h).state.navUserMenus,"show-icon":e.showIcon},null,8,["menus","show-icon"]),g(F,{menus:t(h).state.viewRoutes,"show-icon":e.showIcon},null,8,["menus","show-icon"]),R((a(),l(I,{onClick:o[2]||(o[2]=M=>t(d).logout()),index:"user-logout"},{default:r(()=>[e.showIcon?(a(),l(i,{key:0,name:"fa fa-sign-out",color:"var(--el-text-color-primary)"})):C("",!0),b(" "+f(e.$t("Logout login")),1)]),_:1})),[[z]])]),_:1})),[[z]]):R((a(),l(I,{key:1,onClick:o[4]||(o[4]=M=>t(u).push({name:"user"})),index:"user"},{default:r(()=>[e.showIcon?(a(),l(i,{key:0,name:"fa fa-user-circle",color:"var(--el-text-color-primary)"})):C("",!0),b(" "+f(e.$t("Member Center")),1)]),_:1})),[[z]]),R((a(),l(N,{index:"language-switch",class:"language-switch"},{title:r(()=>[e.showIcon?(a(),l(i,{key:0,name:"local-lang",color:"var(--el-text-color-primary)"})):C("",!0),b(" "+f(e.$t("Language")),1)]),default:r(()=>[(a(!0),E(V,null,j(t(s).lang.langArray,M=>(a(),l(I,{onClick:Ie=>t(re)(M.name),key:M.name,index:"language-switch-"+M.value,class:"language-switch"},{default:r(()=>[e.showIcon?(a(),l(i,{key:0,name:"fa fa-circle-o",color:"var(--el-text-color-primary)"})):C("",!0),b(" "+f(M.value),1)]),_:2},1032,["onClick","index"]))),128))]),_:1})),[[z]])],64)):C("",!0)]),_:1},8,["default-active"])}}}),O=A(_e,[["__scopeId","data-v-b581aef6"]]),he={class:"site-name"},ve={class:"header-row"},ge={class:"site-name"},ke=B({__name:"header",setup(x){const y=X(),u=D(),s=T();return Z(()=>{s.toggleMenuExpand(!1)}),de(),(d,n)=>{const h=p("Icon"),U=p("el-scrollbar"),v=p("el-col"),c=p("el-row"),L=p("el-drawer"),$=p("el-header");return a(),l($,{class:"header"},{default:r(()=>[g(c,{justify:"center"},{default:r(()=>[g(v,{class:"header-row",xs:24,sm:24,md:16},{default:r(()=>[k("div",{onClick:n[0]||(n[0]=w=>t(y).push({name:"/"})),class:"header-logo"},[n[5]||(n[5]=k("img",{src:H},null,-1)),k("span",he,f(t(u).siteName),1)]),t(s).state.menuExpand?C("",!0):(a(),E("div",{key:0,onClick:n[1]||(n[1]=w=>t(s).toggleMenuExpand(!0)),class:"user-menus-expand hidden-md-and-up"},[g(h,{name:"fa fa-indent",color:"var(--el-color-primary)",size:"20"})])),g(U,{ref_key:"layoutMenuScrollbarRef",ref:ie,class:"hidden-sm-and-down"},{default:r(()=>[g(O,{class:"frontend-header-menu",ellipsis:!1,mode:"horizontal"})]),_:1},512)]),_:1})]),_:1}),g(L,{class:"ba-aside-drawer","append-to-body":!0,modelValue:t(s).state.menuExpand,"onUpdate:modelValue":n[4]||(n[4]=w=>t(s).state.menuExpand=w),"with-header":!1,direction:"ltr",size:t(s).state.shrink?"70%":"40%"},{default:r(()=>[k("div",ve,[k("div",{onClick:n[2]||(n[2]=w=>t(y).push({name:"/"})),class:"header-logo"},[n[6]||(n[6]=k("img",{src:H},null,-1)),k("span",ge,f(t(u).siteName),1)]),k("div",{onClick:n[3]||(n[3]=w=>t(s).toggleMenuExpand(!1)),class:"user-menus-expand hidden-md-and-up"},[g(h,{name:"fa fa-dedent",color:"var(--el-color-primary)",size:"20"})])]),g(O,{"show-icon":!0,mode:"vertical"})]),_:1},8,["modelValue","size"])]),_:1})}}}),$e=A(ke,[["__scopeId","data-v-47a66cae"]]),ye={href:"http://beian.miit.gov.cn/"},we=B({__name:"footer",setup(x){const y=D();return(u,s)=>{const d=p("el-footer");return a(),l(d,{class:"footer"},{default:r(()=>[k("div",null,[b(" Copyright @ 2020~"+f(new Date().getFullYear())+" "+f(t(y).siteName)+" "+f(u.$t("Copyright"))+" ",1),k("a",ye,f(t(y).recordNumber),1)])]),_:1})}}}),Ne=A(we,[["__scopeId","data-v-ff7303bf"]]);export{Ne as F,$e as H,de as i};
