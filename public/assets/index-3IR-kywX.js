import{w as C,a7 as I,_ as B}from"./index-BGkrm5xk.js";import{b as z,T as D,a as N}from"./index-D7pEq_sT.js";import{b as E,a as S,o as V,r as M}from"./backupdb-D0ubyxCa.js";import{h as R,s as O,at as j,B as q,q as u,W as A,o as c,k as F,x as o,N as b,V as H,p as n,O as s,Z as f,m,T as _,af as k,b as h}from"./vue-Cm_-Ome7.js";import"./index-6wQyfZWi.js";const W={class:"default-main ba-table-box"},Z={class:"table-header-operate-text"},$={class:"table-header-operate-text"},G={class:"table-header-operate-text"},J={class:"table-header-operate-text"},K=R({__name:"index",setup(L){const{t:e}=C.useI18n(),g=O(),a=new z(new I("/admin/backupdb/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:e("backupdb.table name"),prop:"table_name",operator:!1},{label:e("backupdb.engine"),prop:"engine",operator:!1,width:100},{label:e("backupdb.collation"),prop:"collation",operator:!1,width:180},{label:e("backupdb.version"),prop:"version",operator:!1,width:80},{label:e("backupdb.rows"),prop:"rows",operator:!1,width:80},{label:e("backupdb.create time"),prop:"create_time",operator:!1,width:180},{label:e("backupdb.update time"),prop:"update_time",operator:!1,width:180},{label:e("backupdb.size"),prop:"size",operator:!1,width:100},{label:e("backupdb.bredundancy"),prop:"bredundancy",operator:!1,width:130},{label:e("backupdb.comment"),prop:"comment",operator:!1,width:200}],dblClickNotEditColumn:[void 0]});j("baTable",a),q(()=>{var l;a.table.ref=g.value,a.mount(),(l=a.getIndex())==null||l.then(()=>{a.initSort(),a.dragSort()})});const w=()=>{if(a.table.selection.length==0){k.warning(e("backupdb.no selected table"));return}const l=a.table.selection.map(t=>t.table_name);E({tables:l}).then(t=>{t.code==1&&(h({type:"success",message:t.msg}),a.getIndex())})},y=()=>{S().then(l=>{l.code==1&&(h({type:"success",message:l.msg}),a.getIndex())})},x=()=>{if(a.table.selection.length==0){k.warning(e("backupdb.no selected table"));return}const l=a.table.selection.map(t=>t.table_name);V({tables:l}).then(t=>{t.code==1&&(h({type:"success",message:t.msg}),a.getIndex())})},T=()=>{if(a.table.selection.length==0){k.warning(e("backupdb.no selected table"));return}const l=a.table.selection.map(t=>t.table_name);M({tables:l}).then(t=>{t.code==1&&h({type:"success",message:t.msg})})};return(l,t)=>{const v=u("el-alert"),r=u("Icon"),p=u("el-button"),i=u("el-tooltip"),d=A("blur");return c(),F("div",W,[o(a).table.remark?(c(),b(v,{key:0,class:"ba-table-alert",title:o(a).table.remark,type:"info","show-icon":""},null,8,["title"])):H("",!0),n(D,{buttons:["refresh","columnDisplay"]},{default:s(()=>[n(i,{content:o(e)("backupdb.table header backups the database"),placement:"top"},{default:s(()=>[f((c(),b(p,{onClick:w,disabled:!(o(a).table.selection.length>0),class:"table-header-operate",type:"primary"},{default:s(()=>[n(r,{color:"#ffffff",name:"el-icon-Coin"}),m("span",Z,_(o(e)("backupdb.button backups table")),1)]),_:1},8,["disabled"])),[[d]])]),_:1},8,["content"]),n(i,{content:o(e)("backupdb.table header optimize the database"),placement:"top"},{default:s(()=>[f((c(),b(p,{onClick:x,disabled:!(o(a).table.selection.length>0),class:"table-header-operate",type:"warning"},{default:s(()=>[n(r,{color:"#ffffff",name:"el-icon-Finished"}),m("span",$,_(o(e)("backupdb.button optimize table")),1)]),_:1},8,["disabled"])),[[d]])]),_:1},8,["content"]),n(i,{content:o(e)("backupdb.table header repair the database"),placement:"top"},{default:s(()=>[f((c(),b(p,{onClick:T,disabled:!(o(a).table.selection.length>0),class:"table-header-operate",type:"success"},{default:s(()=>[n(r,{color:"#ffffff",name:"el-icon-MagicStick"}),m("span",G,_(o(e)("backupdb.button repair table")),1)]),_:1},8,["disabled"])),[[d]])]),_:1},8,["content"]),n(i,{content:o(e)("backupdb.table header backups the database"),placement:"top"},{default:s(()=>[f((c(),b(p,{class:"table-header-operate",type:"primary",onClick:y},{default:s(()=>[n(r,{color:"#ffffff",name:"el-icon-Coin"}),m("span",J,_(o(e)("backupdb.button backups db")),1)]),_:1})),[[d]])]),_:1},8,["content"])]),_:1}),n(N,{ref_key:"tableRef",ref:g,pagination:!1},null,512)])}}}),ee=B(K,[["__scopeId","data-v-a60ce8cc"]]);export{ee as default};
