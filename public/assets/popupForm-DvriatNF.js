import{h,s as j,al as z,a as B,D as L,q as d,W as v,o as i,N as n,O as s,Z as _,k as W,U as b,T as g,x as e,m as C,l as S,p as a,_ as Y,a6 as w,V as k,a5 as D}from"./vue-Cm_-Ome7.js";import{e as G,w as K,r as M,_ as R}from"./index-BGkrm5xk.js";import{b as p,r as O}from"./validate-CLs7Ey-q.js";import{F as V}from"./index-Gg8Utg5G.js";import"./index-D7pEq_sT.js";import"./index-6wQyfZWi.js";const Z={class:"title"},H=h({__name:"popupForm",setup(J){const U=G(),y=j(),l=z("baTable"),{t:o}=K.useI18n(),P=B({username:[p({name:"required",title:o("user.user.User name")}),p({name:"account"})],nickname:[p({name:"required",title:o("user.user.nickname")})],group_id:[p({name:"required",message:o("Please select field",{field:o("user.user.grouping")})})],email:[p({name:"email",title:o("user.user.email")})],mobile:[p({name:"mobile"})],password:[{validator:(f,r,m)=>{if(l.form.operate=="Add"){if(!r)return m(new Error(o("Please input field",{field:o("user.user.password")})))}else if(!r)return m();return O(r)?m():m(new Error(o("validate.Please enter the correct password")))},trigger:"blur"}]}),x=f=>{l.toggleForm(),M.push({name:f=="money"?"user/moneyLog":"user/scoreLog",query:{user_id:l.form.items.id}})};return L(()=>l.form.operate,f=>{P.password[0].required=f=="Add"}),(f,r)=>{const m=d("el-input"),u=d("el-form-item"),E=d("el-date-picker"),c=d("el-button"),q=d("el-form"),A=d("el-scrollbar"),F=d("el-dialog"),I=v("drag"),$=v("zoom"),N=v("loading"),T=v("blur");return i(),n(F,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":["Add","Edit"].includes(e(l).form.operate),onClose:e(l).toggleForm},{header:s(()=>[_((i(),W("div",Z,[b(g(e(l).form.operate?e(o)(e(l).form.operate):""),1)])),[[I,[".ba-operate-dialog",".el-dialog__header"]],[$,".ba-operate-dialog"]])]),footer:s(()=>[C("div",{style:S("width: calc(100% - "+e(l).form.labelWidth/1.8+"px)")},[a(c,{onClick:r[19]||(r[19]=t=>e(l).toggleForm(""))},{default:s(()=>[b(g(e(o)("Cancel")),1)]),_:1}),_((i(),n(c,{loading:e(l).form.submitLoading,onClick:r[20]||(r[20]=t=>e(l).onSubmit(y.value)),type:"primary"},{default:s(()=>[b(g(e(l).form.operateIds&&e(l).form.operateIds.length>1?e(o)("Save and edit next item"):e(o)("Save")),1)]),_:1},8,["loading"])),[[T]])],4)]),default:s(()=>[_((i(),n(A,{class:"ba-table-form-scrollbar"},{default:s(()=>[C("div",{class:Y(["ba-operate-form","ba-"+e(l).form.operate+"-form"]),style:S(e(U).layout.shrink?"":"width: calc(100% - "+e(l).form.labelWidth/2+"px)")},[e(l).form.loading?k("",!0):(i(),n(q,{key:0,ref_key:"formRef",ref:y,onKeyup:r[18]||(r[18]=w(t=>e(l).onSubmit(y.value),["enter"])),model:e(l).form.items,"label-position":e(U).layout.shrink?"top":"right","label-width":e(l).form.labelWidth+"px",rules:P},{default:s(()=>[a(u,{prop:"username",label:e(o)("user.user.User name")},{default:s(()=>[a(m,{modelValue:e(l).form.items.username,"onUpdate:modelValue":r[0]||(r[0]=t=>e(l).form.items.username=t),type:"string",placeholder:e(o)("Please input field",{field:e(o)("user.user.User name")+"("+e(o)("user.user.Login account")+")"})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{prop:"nickname",label:e(o)("user.user.nickname")},{default:s(()=>[a(m,{modelValue:e(l).form.items.nickname,"onUpdate:modelValue":r[1]||(r[1]=t=>e(l).form.items.nickname=t),type:"string",placeholder:e(o)("Please input field",{field:e(o)("user.user.nickname")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(V,{type:"remoteSelect",label:e(o)("user.user.grouping"),modelValue:e(l).form.items.group_id,"onUpdate:modelValue":r[2]||(r[2]=t=>e(l).form.items.group_id=t),prop:"group_id",placeholder:e(o)("user.user.grouping"),"input-attr":{params:{isTree:!0,search:[{field:"status",val:"1",operator:"eq"}]},field:"name",remoteUrl:"/admin/user.Group/index"}},null,8,["label","modelValue","placeholder"]),a(V,{label:e(o)("user.user.head portrait"),type:"image",modelValue:e(l).form.items.avatar,"onUpdate:modelValue":r[3]||(r[3]=t=>e(l).form.items.avatar=t)},null,8,["label","modelValue"]),a(V,{label:e(o)("user.user.level"),type:"remoteSelect",modelValue:e(l).form.items.level,"onUpdate:modelValue":r[4]||(r[4]=t=>e(l).form.items.level=t),"input-attr":{remoteUrl:"/admin/cms.memberGroup/index",pk:"gcode",field:"gname"}},null,8,["label","modelValue"]),a(u,{prop:"email",label:e(o)("user.user.email")},{default:s(()=>[a(m,{modelValue:e(l).form.items.email,"onUpdate:modelValue":r[5]||(r[5]=t=>e(l).form.items.email=t),type:"string",placeholder:e(o)("Please input field",{field:e(o)("user.user.email")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{prop:"mobile",label:e(o)("user.user.mobile")},{default:s(()=>[a(m,{modelValue:e(l).form.items.mobile,"onUpdate:modelValue":r[6]||(r[6]=t=>e(l).form.items.mobile=t),type:"string",placeholder:e(o)("Please input field",{field:e(o)("user.user.mobile")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(V,{label:e(o)("user.user.Gender"),modelValue:e(l).form.items.gender,"onUpdate:modelValue":r[7]||(r[7]=t=>e(l).form.items.gender=t),type:"radio","input-attr":{border:!0,content:{0:e(o)("Unknown"),1:e(o)("user.user.male"),2:e(o)("user.user.female")}}},null,8,["label","modelValue","input-attr"]),a(u,{label:e(o)("user.user.birthday")},{default:s(()=>[a(E,{class:"w100","value-format":"YYYY-MM-DD",modelValue:e(l).form.items.birthday,"onUpdate:modelValue":r[8]||(r[8]=t=>e(l).form.items.birthday=t),type:"date",placeholder:e(o)("Please select field",{field:e(o)("user.user.birthday")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(l).form.operate=="Edit"?(i(),n(u,{key:0,label:e(o)("user.user.balance")},{default:s(()=>[a(m,{modelValue:e(l).form.items.money,"onUpdate:modelValue":r[10]||(r[10]=t=>e(l).form.items.money=t),readonly:""},{append:s(()=>[a(c,{onClick:r[9]||(r[9]=t=>x("money"))},{default:s(()=>[b(g(e(o)("user.user.Adjustment balance")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):k("",!0),e(l).form.operate=="Edit"?(i(),n(u,{key:1,label:e(o)("user.user.integral")},{default:s(()=>[a(m,{modelValue:e(l).form.items.score,"onUpdate:modelValue":r[12]||(r[12]=t=>e(l).form.items.score=t),readonly:""},{append:s(()=>[a(c,{onClick:r[11]||(r[11]=t=>x("score"))},{default:s(()=>[b(g(e(o)("user.user.Adjust integral")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):k("",!0),a(u,{prop:"password",label:e(o)("user.user.password")},{default:s(()=>[a(m,{modelValue:e(l).form.items.password,"onUpdate:modelValue":r[13]||(r[13]=t=>e(l).form.items.password=t),type:"password",placeholder:e(l).form.operate=="Add"?e(o)("Please input field",{field:e(o)("user.user.password")}):e(o)("user.user.Please leave blank if not modified")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{prop:"motto",label:e(o)("user.user.Personal signature")},{default:s(()=>[a(m,{onKeyup:[r[14]||(r[14]=w(D(()=>{},["stop"]),["enter"])),r[15]||(r[15]=w(D(t=>e(l).onSubmit(y.value),["ctrl"]),["enter"]))],modelValue:e(l).form.items.motto,"onUpdate:modelValue":r[16]||(r[16]=t=>e(l).form.items.motto=t),type:"textarea",placeholder:e(o)("Please input field",{field:e(o)("user.user.Personal signature")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(V,{label:e(o)("State"),modelValue:e(l).form.items.status,"onUpdate:modelValue":r[17]||(r[17]=t=>e(l).form.items.status=t),type:"radio","input-attr":{border:!0,content:{disable:e(o)("Disable"),enable:e(o)("Enable")}}},null,8,["label","modelValue","input-attr"])]),_:1},8,["model","label-position","label-width","rules"]))],6)]),_:1})),[[N,e(l).form.loading]])]),_:1},8,["model-value","onClose"])}}}),te=R(H,[["__scopeId","data-v-d3178837"]]);export{te as default};
