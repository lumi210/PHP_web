import{h as N,al as T,a as B,q as d,W as p,o as s,k as u,p as m,O as n,Z as x,U as i,T as c,x as a,m as o,l as v,N as _,a6 as L,V as f}from"./vue-Cm_-Ome7.js";import{F as y}from"./index-Gg8Utg5G.js";import{c as W}from"./modulesdev-C1PYeWMv.js";import{_ as z}from"./index-BGkrm5xk.js";import"./index-D7pEq_sT.js";import"./index-6wQyfZWi.js";const A={class:"title"},D={key:0,class:"install-tip-box"},S={key:1,class:"install-tip-box"},U=N({__name:"manage",setup(F){const t=T("baTable"),l=B({items:{opt:"install_mode",fun:"install"},rules:{},submitLoading:!1}),b=()=>{l.submitLoading=!0,W({...l.items,uid:t.form.extend.info.uid,mode:t.form.extend.info.install_mode=="full"?"pure":"full"}).then(()=>{t.form.extend.showManage=!1,t.onTableHeaderAction("refresh",{})}).finally(()=>{l.submitLoading=!1})};return(H,e)=>{const k=d("el-form-item"),w=d("el-form"),h=d("el-scrollbar"),g=d("el-button"),V=d("el-dialog"),q=p("drag"),C=p("zoom"),M=p("blur");return s(),u("div",null,[m(V,{class:"ba-operate-dialog manage-operate-dialog","close-on-click-modal":!1,"model-value":a(t).form.extend.showManage,onClose:e[3]||(e[3]=r=>a(t).form.extend.showManage=!1),width:"50%","destroy-on-close":!0},{header:n(()=>[x((s(),u("div",A,[i(" 模块管理 - "+c(a(t).form.extend.info.title),1)])),[[q,[".ba-operate-dialog",".el-dialog__header"]],[C,".ba-operate-dialog"]])]),footer:n(()=>[o("div",{style:v("width: calc(100% - "+a(t).form.labelWidth/1.8+"px)")},[m(g,{onClick:e[2]||(e[2]=r=>a(t).form.extend.showManage=!1)},{default:n(()=>e[6]||(e[6]=[i("关闭")])),_:1}),x((s(),_(g,{loading:l.submitLoading,onClick:b,type:"primary"},{default:n(()=>e[7]||(e[7]=[i(" 执行操作 ")])),_:1},8,["loading"])),[[M]])],4)]),default:n(()=>[m(h,{class:"ba-table-form-scrollbar"},{default:n(()=>[o("div",{class:"ba-operate-form",style:v("width: calc(100% - "+a(t).form.labelWidth/2+"px)")},[m(w,{ref:"formRef",onKeyup:L(b,["enter"]),model:l.items,"label-position":"right","label-width":a(t).form.labelWidth+"px",rules:l.rules},{default:n(()=>[m(y,{label:"操作",modelValue:l.items.opt,"onUpdate:modelValue":e[0]||(e[0]=r=>l.items.opt=r),type:"radio",class:"form-item-opts",data:{content:{install_mode:"安装模式切换",install_sql:"安装sql调试",exec_function:"模块核心控制器方法调试"},childrenAttr:{border:!0}}},null,8,["modelValue"]),["install_sql","install_mode"].includes(l.items.opt)?(s(),_(k,{key:0,label:"操作说明"},{default:n(()=>[l.items.opt=="install_sql"?(s(),u("div",D," 点击执行操作将找到模块根目录/install.sql，并执行其中的sql查询（同模块安装时一致，无该文件或查询出错不会抛出异常）。 ")):f("",!0),l.items.opt=="install_mode"?(s(),u("div",S,[e[5]||(e[5]=o("div",null,[o("span",null,"模块有两种安装模式："),o("p",null,[i("1、完整安装：模块中需要安装至系统的代码文件将"),o("b",null,"复制"),i("到系统之中")]),o("p",null,[i("2、纯净安装：模块中需要安装至系统的代码文件将"),o("b",null,"移动"),i("到系统之中")])],-1)),o("div",null,[e[4]||(e[4]=o("span",null,"当前模块的安装模式为：",-1)),o("b",null,c(a(t).form.extend.info.install_mode=="full"?"完整":"纯净"),1),o("span",null,"，点击执行操作将切换为"+c(a(t).form.extend.info.install_mode=="full"?"纯净":"完整")+"安装",1)])])):f("",!0)]),_:1})):f("",!0),l.items.opt=="exec_function"?(s(),_(y,{key:1,label:"调用方法",modelValue:l.items.fun,"onUpdate:modelValue":e[1]||(e[1]=r=>l.items.fun=r),type:"select",data:{content:{install:"安装",uninstall:"卸载",enable:"启用",disable:"禁用",update:"更新"},childrenAttr:{border:!0}},attr:{blockHelp:"只调用模块核心控制器内对应方法代码，并不等同于真正的模块安装/卸载等操作（找不到方法不会抛出异常，但代码错误可以抛出异常）"}},null,8,["modelValue"])):f("",!0)]),_:1},8,["model","label-width","rules"])],4)]),_:1})]),_:1},8,["model-value"])])}}}),R=z(U,[["__scopeId","data-v-99d5fc13"]]);export{R as default};
