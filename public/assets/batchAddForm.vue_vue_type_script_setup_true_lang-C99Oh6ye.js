import{h as I,al as N,s as P,a as z,q as c,W as u,o as d,N as f,O as s,Z as y,k as A,U as b,T as g,x as e,m as _,l as k,p as n,a5 as D,a6 as R,_ as W,V as j}from"./vue-Cm_-Ome7.js";import{e as q,w as $}from"./index-BGkrm5xk.js";import{F as i}from"./index-Gg8Utg5G.js";import{b as S}from"./validate-CLs7Ey-q.js";import{u as v}from"./ContentSort-B8g_wCC7.js";const K={class:"title"},H=I({__name:"batchAddForm",setup(L){const t=N("baTable"),U=t.api.actionUrl.get("index"),V=q(),p=P(),{t:o}=$.useI18n(),x=z({name:[S({name:"required",title:o("cms.contentSort.name")})],mcode:[S({name:"required",title:o("cms.contentSort.mcode")})],sorting:[S({name:"number",title:o("cms.contentSort.sorting")})]}),C=r=>{t.form.items.listtpl=r.listtpl,t.form.items.contenttpl=r.contenttpl};return console.log(t.form),t.form.operate=="BatchAdd"&&(t.onSubmit=(r=void 0)=>{if(t.runBefore("onSubmit",{formEl:r,operate:"BatchAdd",items:t.form.items})===!1)return;Object.keys(t.form.items).forEach(m=>{t.form.items[m]===null&&delete t.form.items[m]});const l=()=>{t.form.submitLoading=!0};r?(t.form.ref=r,r.validate(m=>{m&&l()})):l()}),(r,l)=>{const m=c("el-form"),h=c("el-button"),w=c("el-dialog"),B=u("drag"),T=u("zoom"),F=u("blur");return d(),f(w,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":e(t).form.operate=="BatchAdd",onClose:e(t).toggleForm,width:"50%"},{header:s(()=>[y((d(),A("div",K,[b(g(e(t).form.operate?e(o)("cms.contentSort.batchadd"):""),1)])),[[B,[".ba-operate-dialog",".el-dialog__header"]],[T,".ba-operate-dialog"]])]),footer:s(()=>[_("div",{style:k("width: calc(100% - "+e(t).form.labelWidth/1.8+"px)")},[n(h,{onClick:l[8]||(l[8]=a=>e(t).toggleForm())},{default:s(()=>[b(g(e(o)("Cancel")),1)]),_:1}),y((d(),f(h,{loading:e(t).form.submitLoading,onClick:l[9]||(l[9]=a=>e(t).onSubmit(p.value)),type:"primary"},{default:s(()=>[b(g(e(t).form.operateIds&&e(t).form.operateIds.length>1?e(o)("Save and edit next item"):e(o)("Save")),1)]),_:1},8,["loading"])),[[F]])],4)]),default:s(()=>[e(t).form.loading?j("",!0):(d(),f(m,{key:0,ref_key:"formRef",ref:p,onSubmit:l[6]||(l[6]=D(()=>{},["prevent"])),onKeyup:l[7]||(l[7]=R(a=>e(t).onSubmit(p.value),["enter"])),model:e(t).form.items,"label-position":e(V).layout.shrink?"top":"right","label-width":e(t).form.labelWidth+"px",rules:x},{default:s(()=>[_("div",{class:W(["ba-operate-form","ba-"+e(t).form.operate+"-form"]),style:k(e(V).layout.shrink?"":"width: calc(100% - "+e(t).form.labelWidth/2+"px)")},[n(i,{label:e(o)("cms.contentSort.pcode"),type:"remoteSelect",modelValue:e(t).form.items.pcode,"onUpdate:modelValue":l[0]||(l[0]=a=>e(t).form.items.pcode=a),prop:"pcode","input-attr":{pk:"content_sort.scode",params:{select:!0,order:"sorting,asc",acode:e(t).table.filter.acode},field:"name",remoteUrl:e(U),placeholder:e(o)("cms.contentSort.Please select the column")}},null,8,["label","modelValue","input-attr"]),n(i,{label:e(o)("cms.contentSort.name"),type:"string",modelValue:e(t).form.items.name,"onUpdate:modelValue":l[1]||(l[1]=a=>e(t).form.items.name=a),prop:"name",placeholder:e(o)("cms.contentSort.batchaddname")},null,8,["label","modelValue","placeholder"]),n(i,{label:e(o)("cms.contentSort.mcode"),type:"remoteSelect",modelValue:e(t).form.items.mcode,"onUpdate:modelValue":l[2]||(l[2]=a=>e(t).form.items.mcode=a),prop:"mcode","input-attr":{field:"name",remoteUrl:e(v)+"models",placeholder:e(o)("Please select field",{field:e(o)("cms.contentSort.mcode")}),onRow:C}},null,8,["label","modelValue","input-attr"]),n(i,{label:e(o)("cms.contentSort.listtpl"),type:"remoteSelect",modelValue:e(t).form.items.listtpl,"onUpdate:modelValue":l[3]||(l[3]=a=>e(t).form.items.listtpl=a),prop:"listtpl","input-attr":{remoteUrl:e(v)+"getTpls"},placeholder:e(o)("Please input field",{field:e(o)("cms.contentSort.listtpl")})},null,8,["label","modelValue","input-attr","placeholder"]),n(i,{label:e(o)("cms.contentSort.contenttpl"),type:"remoteSelect",modelValue:e(t).form.items.contenttpl,"onUpdate:modelValue":l[4]||(l[4]=a=>e(t).form.items.contenttpl=a),prop:"contenttpl","input-attr":{remoteUrl:e(v)+"getTpls"},placeholder:e(o)("Please input field",{field:e(o)("cms.contentSort.contenttpl")})},null,8,["label","modelValue","input-attr","placeholder"]),n(i,{label:e(o)("cms.contentSort.status"),type:"radio",modelValue:e(t).form.items.status,"onUpdate:modelValue":l[5]||(l[5]=a=>e(t).form.items.status=a),prop:"status","input-attr":{content:{1:"显示",0:"隐藏"}},placeholder:e(o)("Please select field",{field:e(o)("cms.contentSort.status")})},null,8,["label","modelValue","placeholder"])],6)]),_:1},8,["model","label-position","label-width","rules"]))]),_:1},8,["model-value","onClose"])}}});export{H as _};
